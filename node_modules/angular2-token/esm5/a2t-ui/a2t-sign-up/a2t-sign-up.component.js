/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes} checked by tsc
 */
import { Component } from '@angular/core';
import { Router } from '@angular/router';
import { Angular2TokenService } from '../../angular2-token.service';
import { A2tFormService } from '../a2t-shared/a2t-form/a2t-form.service';
import { SIGN_UP_FORM } from '../a2t-ui.forms';
var A2tSignUpComponent = /** @class */ (function () {
    function A2tSignUpComponent(_formService, _sessionService, _router) {
        var _this = this;
        this._formService = _formService;
        this._sessionService = _sessionService;
        this._router = _router;
        this._formService.initForm(SIGN_UP_FORM);
        this._formService.submit$.subscribe(function (data) { return _this._sessionService.registerAccount(data).subscribe(function (res) { return _this._handleSuccess(res); }, function (error) { return _this._handleError(error); }); });
    }
    /**
     * @param {?} data
     * @return {?}
     */
    A2tSignUpComponent.prototype._handleSuccess = /**
     * @param {?} data
     * @return {?}
     */
    function (data) {
        this._errors = null;
        this._formService.unlockSubmit();
        this._router.navigate(['restricted']);
    };
    /**
     * @param {?} error
     * @return {?}
     */
    A2tSignUpComponent.prototype._handleError = /**
     * @param {?} error
     * @return {?}
     */
    function (error) {
        this._errors = error.json().errors.full_messages;
        this._formService.unlockSubmit();
    };
    A2tSignUpComponent.decorators = [
        { type: Component, args: [{
                    selector: 'a2t-sign-up',
                    providers: [A2tFormService],
                    template: "\n        <a2t-headline>Sign Up</a2t-headline>\n        <a2t-error [errors]=\"_errors\"></a2t-error>\n        <a2t-form>Sign Up</a2t-form>\n        <a2t-links case=\"sign-up\"></a2t-links>\n    "
                },] },
    ];
    /** @nocollapse */
    A2tSignUpComponent.ctorParameters = function () { return [
        { type: A2tFormService },
        { type: Angular2TokenService },
        { type: Router }
    ]; };
    return A2tSignUpComponent;
}());
export { A2tSignUpComponent };
function A2tSignUpComponent_tsickle_Closure_declarations() {
    /** @type {?} */
    A2tSignUpComponent.prototype._errors;
    /** @type {?} */
    A2tSignUpComponent.prototype._formService;
    /** @type {?} */
    A2tSignUpComponent.prototype._sessionService;
    /** @type {?} */
    A2tSignUpComponent.prototype._router;
}

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYTJ0LXNpZ24tdXAuY29tcG9uZW50LmpzIiwic291cmNlUm9vdCI6Im5nOi8vYW5ndWxhcjItdG9rZW4vIiwic291cmNlcyI6WyJhMnQtdWkvYTJ0LXNpZ24tdXAvYTJ0LXNpZ24tdXAuY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7QUFBQSxPQUFPLEVBQUUsU0FBUyxFQUFTLE1BQU0sZUFBZSxDQUFDO0FBQ2pELE9BQU8sRUFBRSxNQUFNLEVBQUUsTUFBTSxpQkFBaUIsQ0FBQztBQUN6QyxPQUFPLEVBQUUsb0JBQW9CLEVBQUUsTUFBTSw4QkFBOEIsQ0FBQztBQUdwRSxPQUFPLEVBQUUsY0FBYyxFQUFFLE1BQU0seUNBQXlDLENBQUM7QUFDekUsT0FBTyxFQUFFLFlBQVksRUFBRSxNQUFNLGlCQUFpQixDQUFDOztJQWdCM0MsNEJBQ1csY0FDQSxpQkFDQTtRQUhYLGlCQVlDO1FBWFUsaUJBQVksR0FBWixZQUFZO1FBQ1osb0JBQWUsR0FBZixlQUFlO1FBQ2YsWUFBTyxHQUFQLE9BQU87UUFFZCxJQUFJLENBQUMsWUFBWSxDQUFDLFFBQVEsQ0FBQyxZQUFZLENBQUMsQ0FBQztRQUN6QyxJQUFJLENBQUMsWUFBWSxDQUFDLE9BQU8sQ0FBQyxTQUFTLENBQy9CLFVBQUMsSUFBa0IsSUFBSyxPQUFBLEtBQUksQ0FBQyxlQUFlLENBQUMsZUFBZSxDQUFDLElBQUksQ0FBQyxDQUFDLFNBQVMsQ0FDeEUsVUFBQSxHQUFHLElBQVMsT0FBQSxLQUFJLENBQUMsY0FBYyxDQUFDLEdBQUcsQ0FBQyxFQUF4QixDQUF3QixFQUNwQyxVQUFBLEtBQUssSUFBTyxPQUFBLEtBQUksQ0FBQyxZQUFZLENBQUMsS0FBSyxDQUFDLEVBQXhCLENBQXdCLENBQ3ZDLEVBSHVCLENBR3ZCLENBQ0osQ0FBQztLQUNMOzs7OztJQUVPLDJDQUFjOzs7O2NBQUMsSUFBUztRQUM1QixJQUFJLENBQUMsT0FBTyxHQUFHLElBQUksQ0FBQztRQUNwQixJQUFJLENBQUMsWUFBWSxDQUFDLFlBQVksRUFBRSxDQUFDO1FBQ2pDLElBQUksQ0FBQyxPQUFPLENBQUMsUUFBUSxDQUFDLENBQUMsWUFBWSxDQUFDLENBQUMsQ0FBQzs7Ozs7O0lBR2xDLHlDQUFZOzs7O2NBQUMsS0FBVTtRQUMzQixJQUFJLENBQUMsT0FBTyxHQUFHLEtBQUssQ0FBQyxJQUFJLEVBQUUsQ0FBQyxNQUFNLENBQUMsYUFBYSxDQUFDO1FBQ2pELElBQUksQ0FBQyxZQUFZLENBQUMsWUFBWSxFQUFFLENBQUM7OztnQkFwQ3hDLFNBQVMsU0FBQztvQkFDUCxRQUFRLEVBQVEsYUFBYTtvQkFDN0IsU0FBUyxFQUFPLENBQUMsY0FBYyxDQUFDO29CQUNoQyxRQUFRLEVBQUUsb01BS1Q7aUJBQ0o7Ozs7Z0JBWlEsY0FBYztnQkFIZCxvQkFBb0I7Z0JBRHBCLE1BQU07OzZCQURmOztTQWtCYSxrQkFBa0IiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBDb21wb25lbnQsIElucHV0IH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQgeyBSb3V0ZXIgfSBmcm9tICdAYW5ndWxhci9yb3V0ZXInO1xuaW1wb3J0IHsgQW5ndWxhcjJUb2tlblNlcnZpY2UgfSBmcm9tICcuLi8uLi9hbmd1bGFyMi10b2tlbi5zZXJ2aWNlJztcblxuaW1wb3J0IHsgUmVnaXN0ZXJEYXRhIH0gZnJvbSAnLi4vLi4vYW5ndWxhcjItdG9rZW4ubW9kZWwnO1xuaW1wb3J0IHsgQTJ0Rm9ybVNlcnZpY2UgfSBmcm9tICcuLi9hMnQtc2hhcmVkL2EydC1mb3JtL2EydC1mb3JtLnNlcnZpY2UnO1xuaW1wb3J0IHsgU0lHTl9VUF9GT1JNIH0gZnJvbSAnLi4vYTJ0LXVpLmZvcm1zJztcblxuQENvbXBvbmVudCh7XG4gICAgc2VsZWN0b3I6ICAgICAgICdhMnQtc2lnbi11cCcsXG4gICAgcHJvdmlkZXJzOiAgICAgIFtBMnRGb3JtU2VydmljZV0sXG4gICAgdGVtcGxhdGU6IGBcbiAgICAgICAgPGEydC1oZWFkbGluZT5TaWduIFVwPC9hMnQtaGVhZGxpbmU+XG4gICAgICAgIDxhMnQtZXJyb3IgW2Vycm9yc109XCJfZXJyb3JzXCI+PC9hMnQtZXJyb3I+XG4gICAgICAgIDxhMnQtZm9ybT5TaWduIFVwPC9hMnQtZm9ybT5cbiAgICAgICAgPGEydC1saW5rcyBjYXNlPVwic2lnbi11cFwiPjwvYTJ0LWxpbmtzPlxuICAgIGBcbn0pXG5leHBvcnQgY2xhc3MgQTJ0U2lnblVwQ29tcG9uZW50IHtcblxuICAgIF9lcnJvcnM6IHN0cmluZ1tdO1xuXG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIHB1YmxpYyBfZm9ybVNlcnZpY2U6IEEydEZvcm1TZXJ2aWNlLFxuICAgICAgICBwdWJsaWMgX3Nlc3Npb25TZXJ2aWNlOiBBbmd1bGFyMlRva2VuU2VydmljZSxcbiAgICAgICAgcHVibGljIF9yb3V0ZXI6IFJvdXRlclxuICAgICkge1xuICAgICAgICB0aGlzLl9mb3JtU2VydmljZS5pbml0Rm9ybShTSUdOX1VQX0ZPUk0pO1xuICAgICAgICB0aGlzLl9mb3JtU2VydmljZS5zdWJtaXQkLnN1YnNjcmliZShcbiAgICAgICAgICAgIChkYXRhOiBSZWdpc3RlckRhdGEpID0+IHRoaXMuX3Nlc3Npb25TZXJ2aWNlLnJlZ2lzdGVyQWNjb3VudChkYXRhKS5zdWJzY3JpYmUoXG4gICAgICAgICAgICAgICAgcmVzID0+ICAgICAgdGhpcy5faGFuZGxlU3VjY2VzcyhyZXMpLFxuICAgICAgICAgICAgICAgIGVycm9yID0+ICAgIHRoaXMuX2hhbmRsZUVycm9yKGVycm9yKVxuICAgICAgICAgICAgKVxuICAgICAgICApO1xuICAgIH1cblxuICAgIHByaXZhdGUgX2hhbmRsZVN1Y2Nlc3MoZGF0YTogYW55KSB7XG4gICAgICAgIHRoaXMuX2Vycm9ycyA9IG51bGw7XG4gICAgICAgIHRoaXMuX2Zvcm1TZXJ2aWNlLnVubG9ja1N1Ym1pdCgpO1xuICAgICAgICB0aGlzLl9yb3V0ZXIubmF2aWdhdGUoWydyZXN0cmljdGVkJ10pO1xuICAgIH1cblxuICAgIHByaXZhdGUgX2hhbmRsZUVycm9yKGVycm9yOiBhbnkpIHtcbiAgICAgICAgdGhpcy5fZXJyb3JzID0gZXJyb3IuanNvbigpLmVycm9ycy5mdWxsX21lc3NhZ2VzO1xuICAgICAgICB0aGlzLl9mb3JtU2VydmljZS51bmxvY2tTdWJtaXQoKTtcbiAgICB9XG59XG4iXX0=