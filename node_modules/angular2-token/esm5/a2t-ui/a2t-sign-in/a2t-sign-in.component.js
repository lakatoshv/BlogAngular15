/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes} checked by tsc
 */
import { Component } from '@angular/core';
import { Router } from '@angular/router';
import { Angular2TokenService } from '../../angular2-token.service';
import { A2tFormService } from '../a2t-shared/a2t-form/a2t-form.service';
import { SIGN_IN_FORM } from '../a2t-ui.forms';
var A2tSignInComponent = /** @class */ (function () {
    function A2tSignInComponent(_formService, _sessionService, _router) {
        var _this = this;
        this._formService = _formService;
        this._sessionService = _sessionService;
        this._router = _router;
        this._formService.initForm(SIGN_IN_FORM);
        this._formService.submit$.subscribe(function (data) { return _this._sessionService.signIn(data).subscribe(function (res) { return _this._handleSuccess(res); }, function (error) { return _this._handleError(error); }); });
    }
    /**
     * @param {?} data
     * @return {?}
     */
    A2tSignInComponent.prototype._handleSuccess = /**
     * @param {?} data
     * @return {?}
     */
    function (data) {
        this._errors = null;
        this._formService.unlockSubmit();
        this._router.navigate(['restricted']);
    };
    /**
     * @param {?} error
     * @return {?}
     */
    A2tSignInComponent.prototype._handleError = /**
     * @param {?} error
     * @return {?}
     */
    function (error) {
        this._errors = error.json().errors;
        this._formService.unlockSubmit();
    };
    A2tSignInComponent.decorators = [
        { type: Component, args: [{
                    selector: 'a2t-sign-in',
                    providers: [A2tFormService],
                    template: "\n        <a2t-headline>Sign In</a2t-headline>\n        <a2t-error [errors]=\"_errors\"></a2t-error>\n        <a2t-form>Sign In</a2t-form>\n        <a2t-links case=\"sign-in\"></a2t-links>\n    "
                },] },
    ];
    /** @nocollapse */
    A2tSignInComponent.ctorParameters = function () { return [
        { type: A2tFormService },
        { type: Angular2TokenService },
        { type: Router }
    ]; };
    return A2tSignInComponent;
}());
export { A2tSignInComponent };
function A2tSignInComponent_tsickle_Closure_declarations() {
    /** @type {?} */
    A2tSignInComponent.prototype._errors;
    /** @type {?} */
    A2tSignInComponent.prototype._formService;
    /** @type {?} */
    A2tSignInComponent.prototype._sessionService;
    /** @type {?} */
    A2tSignInComponent.prototype._router;
}

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYTJ0LXNpZ24taW4uY29tcG9uZW50LmpzIiwic291cmNlUm9vdCI6Im5nOi8vYW5ndWxhcjItdG9rZW4vIiwic291cmNlcyI6WyJhMnQtdWkvYTJ0LXNpZ24taW4vYTJ0LXNpZ24taW4uY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7QUFBQSxPQUFPLEVBQUUsU0FBUyxFQUFTLE1BQU0sZUFBZSxDQUFDO0FBQ2pELE9BQU8sRUFBRSxNQUFNLEVBQUUsTUFBTSxpQkFBaUIsQ0FBQztBQUN6QyxPQUFPLEVBQUUsb0JBQW9CLEVBQUUsTUFBTSw4QkFBOEIsQ0FBQztBQUdwRSxPQUFPLEVBQUUsY0FBYyxFQUFFLE1BQU0seUNBQXlDLENBQUM7QUFDekUsT0FBTyxFQUFFLFlBQVksRUFBRSxNQUFNLGlCQUFpQixDQUFDOztJQWdCM0MsNEJBQ1csY0FDQSxpQkFDQTtRQUhYLGlCQVlDO1FBWFUsaUJBQVksR0FBWixZQUFZO1FBQ1osb0JBQWUsR0FBZixlQUFlO1FBQ2YsWUFBTyxHQUFQLE9BQU87UUFFZCxJQUFJLENBQUMsWUFBWSxDQUFDLFFBQVEsQ0FBQyxZQUFZLENBQUMsQ0FBQztRQUN6QyxJQUFJLENBQUMsWUFBWSxDQUFDLE9BQU8sQ0FBQyxTQUFTLENBQy9CLFVBQUMsSUFBZ0IsSUFBSyxPQUFBLEtBQUksQ0FBQyxlQUFlLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxDQUFDLFNBQVMsQ0FDN0QsVUFBQyxHQUFRLElBQU8sT0FBQSxLQUFJLENBQUMsY0FBYyxDQUFDLEdBQUcsQ0FBQyxFQUF4QixDQUF3QixFQUN4QyxVQUFDLEtBQVUsSUFBSyxPQUFBLEtBQUksQ0FBQyxZQUFZLENBQUMsS0FBSyxDQUFDLEVBQXhCLENBQXdCLENBQzNDLEVBSHFCLENBR3JCLENBQ0osQ0FBQztLQUNMOzs7OztJQUVPLDJDQUFjOzs7O2NBQUMsSUFBUztRQUM1QixJQUFJLENBQUMsT0FBTyxHQUFHLElBQUksQ0FBQztRQUNwQixJQUFJLENBQUMsWUFBWSxDQUFDLFlBQVksRUFBRSxDQUFDO1FBQ2pDLElBQUksQ0FBQyxPQUFPLENBQUMsUUFBUSxDQUFDLENBQUMsWUFBWSxDQUFDLENBQUMsQ0FBQzs7Ozs7O0lBR2xDLHlDQUFZOzs7O2NBQUMsS0FBVTtRQUMzQixJQUFJLENBQUMsT0FBTyxHQUFHLEtBQUssQ0FBQyxJQUFJLEVBQUUsQ0FBQyxNQUFNLENBQUM7UUFDbkMsSUFBSSxDQUFDLFlBQVksQ0FBQyxZQUFZLEVBQUUsQ0FBQzs7O2dCQXBDeEMsU0FBUyxTQUFDO29CQUNQLFFBQVEsRUFBSSxhQUFhO29CQUN6QixTQUFTLEVBQUcsQ0FBQyxjQUFjLENBQUM7b0JBQzVCLFFBQVEsRUFBRSxvTUFLVDtpQkFDSjs7OztnQkFaUSxjQUFjO2dCQUhkLG9CQUFvQjtnQkFEcEIsTUFBTTs7NkJBRGY7O1NBa0JhLGtCQUFrQiIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IENvbXBvbmVudCwgSW5wdXQgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7IFJvdXRlciB9IGZyb20gJ0Bhbmd1bGFyL3JvdXRlcic7XG5pbXBvcnQgeyBBbmd1bGFyMlRva2VuU2VydmljZSB9IGZyb20gJy4uLy4uL2FuZ3VsYXIyLXRva2VuLnNlcnZpY2UnO1xuXG5pbXBvcnQgeyBTaWduSW5EYXRhIH0gZnJvbSAnLi4vLi4vYW5ndWxhcjItdG9rZW4ubW9kZWwnO1xuaW1wb3J0IHsgQTJ0Rm9ybVNlcnZpY2UgfSBmcm9tICcuLi9hMnQtc2hhcmVkL2EydC1mb3JtL2EydC1mb3JtLnNlcnZpY2UnO1xuaW1wb3J0IHsgU0lHTl9JTl9GT1JNIH0gZnJvbSAnLi4vYTJ0LXVpLmZvcm1zJztcblxuQENvbXBvbmVudCh7XG4gICAgc2VsZWN0b3I6ICAgJ2EydC1zaWduLWluJyxcbiAgICBwcm92aWRlcnM6ICBbQTJ0Rm9ybVNlcnZpY2VdLFxuICAgIHRlbXBsYXRlOiBgXG4gICAgICAgIDxhMnQtaGVhZGxpbmU+U2lnbiBJbjwvYTJ0LWhlYWRsaW5lPlxuICAgICAgICA8YTJ0LWVycm9yIFtlcnJvcnNdPVwiX2Vycm9yc1wiPjwvYTJ0LWVycm9yPlxuICAgICAgICA8YTJ0LWZvcm0+U2lnbiBJbjwvYTJ0LWZvcm0+XG4gICAgICAgIDxhMnQtbGlua3MgY2FzZT1cInNpZ24taW5cIj48L2EydC1saW5rcz5cbiAgICBgXG59KVxuZXhwb3J0IGNsYXNzIEEydFNpZ25JbkNvbXBvbmVudCB7XG5cbiAgICBfZXJyb3JzOiBzdHJpbmdbXTtcblxuICAgIGNvbnN0cnVjdG9yKFxuICAgICAgICBwdWJsaWMgX2Zvcm1TZXJ2aWNlOiBBMnRGb3JtU2VydmljZSxcbiAgICAgICAgcHVibGljIF9zZXNzaW9uU2VydmljZTogQW5ndWxhcjJUb2tlblNlcnZpY2UsXG4gICAgICAgIHB1YmxpYyBfcm91dGVyOiBSb3V0ZXJcbiAgICApIHtcbiAgICAgICAgdGhpcy5fZm9ybVNlcnZpY2UuaW5pdEZvcm0oU0lHTl9JTl9GT1JNKTtcbiAgICAgICAgdGhpcy5fZm9ybVNlcnZpY2Uuc3VibWl0JC5zdWJzY3JpYmUoXG4gICAgICAgICAgICAoZGF0YTogU2lnbkluRGF0YSkgPT4gdGhpcy5fc2Vzc2lvblNlcnZpY2Uuc2lnbkluKGRhdGEpLnN1YnNjcmliZShcbiAgICAgICAgICAgICAgICAocmVzOiBhbnkpID0+ICAgdGhpcy5faGFuZGxlU3VjY2VzcyhyZXMpLFxuICAgICAgICAgICAgICAgIChlcnJvcjogYW55KSA9PiB0aGlzLl9oYW5kbGVFcnJvcihlcnJvcilcbiAgICAgICAgICAgIClcbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIF9oYW5kbGVTdWNjZXNzKGRhdGE6IGFueSkge1xuICAgICAgICB0aGlzLl9lcnJvcnMgPSBudWxsO1xuICAgICAgICB0aGlzLl9mb3JtU2VydmljZS51bmxvY2tTdWJtaXQoKTtcbiAgICAgICAgdGhpcy5fcm91dGVyLm5hdmlnYXRlKFsncmVzdHJpY3RlZCddKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIF9oYW5kbGVFcnJvcihlcnJvcjogYW55KSB7XG4gICAgICAgIHRoaXMuX2Vycm9ycyA9IGVycm9yLmpzb24oKS5lcnJvcnM7XG4gICAgICAgIHRoaXMuX2Zvcm1TZXJ2aWNlLnVubG9ja1N1Ym1pdCgpO1xuICAgIH1cbn1cbiJdfQ==