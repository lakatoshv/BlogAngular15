/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes} checked by tsc
 */
import { Component } from '@angular/core';
import { Router } from '@angular/router';
import { Angular2TokenService } from '../../angular2-token.service';
import { A2tFormService } from '../a2t-shared/a2t-form/a2t-form.service';
import { UPDATE_PASSWORD_FORM } from '../a2t-ui.forms';
var A2tUpdatePasswordComponent = /** @class */ (function () {
    function A2tUpdatePasswordComponent(_formService, _sessionService, _router) {
        var _this = this;
        this._formService = _formService;
        this._sessionService = _sessionService;
        this._router = _router;
        this._formService.initForm(UPDATE_PASSWORD_FORM);
        this._formService.submit$.subscribe(function (data) { return _this._sessionService.updatePassword(data).subscribe(function (res) { return _this._handleSuccess(res); }, function (error) { return _this._handleError(error); }); });
    }
    /**
     * @param {?} data
     * @return {?}
     */
    A2tUpdatePasswordComponent.prototype._handleSuccess = /**
     * @param {?} data
     * @return {?}
     */
    function (data) {
        this._router.navigate(['session/sign-in']);
    };
    /**
     * @param {?} error
     * @return {?}
     */
    A2tUpdatePasswordComponent.prototype._handleError = /**
     * @param {?} error
     * @return {?}
     */
    function (error) {
        this._errors = error.json().errors;
        this._formService.unlockSubmit();
    };
    A2tUpdatePasswordComponent.decorators = [
        { type: Component, args: [{
                    selector: 'a2t-update-password',
                    providers: [A2tFormService],
                    template: "\n        <a2t-headline>Update your Password</a2t-headline>\n        <a2t-error [errors]=\"_errors\"></a2t-error>\n        <a2t-form>Update Password</a2t-form>\n    "
                },] },
    ];
    /** @nocollapse */
    A2tUpdatePasswordComponent.ctorParameters = function () { return [
        { type: A2tFormService },
        { type: Angular2TokenService },
        { type: Router }
    ]; };
    return A2tUpdatePasswordComponent;
}());
export { A2tUpdatePasswordComponent };
function A2tUpdatePasswordComponent_tsickle_Closure_declarations() {
    /** @type {?} */
    A2tUpdatePasswordComponent.prototype._errors;
    /** @type {?} */
    A2tUpdatePasswordComponent.prototype._formService;
    /** @type {?} */
    A2tUpdatePasswordComponent.prototype._sessionService;
    /** @type {?} */
    A2tUpdatePasswordComponent.prototype._router;
}

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYTJ0LXVwZGF0ZS1wYXNzd29yZC5jb21wb25lbnQuanMiLCJzb3VyY2VSb290Ijoibmc6Ly9hbmd1bGFyMi10b2tlbi8iLCJzb3VyY2VzIjpbImEydC11aS9hMnQtdXBkYXRlLXBhc3N3b3JkL2EydC11cGRhdGUtcGFzc3dvcmQuY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7QUFBQSxPQUFPLEVBQUUsU0FBUyxFQUFTLE1BQU0sZUFBZSxDQUFDO0FBQ2pELE9BQU8sRUFBRSxNQUFNLEVBQUUsTUFBTSxpQkFBaUIsQ0FBQztBQUN6QyxPQUFPLEVBQUUsb0JBQW9CLEVBQUUsTUFBTSw4QkFBOEIsQ0FBQztBQUdwRSxPQUFPLEVBQUUsY0FBYyxFQUFFLE1BQU0seUNBQXlDLENBQUM7QUFDekUsT0FBTyxFQUFFLG9CQUFvQixFQUFFLE1BQU0saUJBQWlCLENBQUM7O0lBZW5ELG9DQUNXLGNBQ0EsaUJBQ0E7UUFIWCxpQkFZQztRQVhVLGlCQUFZLEdBQVosWUFBWTtRQUNaLG9CQUFlLEdBQWYsZUFBZTtRQUNmLFlBQU8sR0FBUCxPQUFPO1FBRWQsSUFBSSxDQUFDLFlBQVksQ0FBQyxRQUFRLENBQUMsb0JBQW9CLENBQUMsQ0FBQztRQUNqRCxJQUFJLENBQUMsWUFBWSxDQUFDLE9BQU8sQ0FBQyxTQUFTLENBQy9CLFVBQUMsSUFBd0IsSUFBSyxPQUFBLEtBQUksQ0FBQyxlQUFlLENBQUMsY0FBYyxDQUFDLElBQUksQ0FBQyxDQUFDLFNBQVMsQ0FDN0UsVUFBQSxHQUFHLElBQVMsT0FBQSxLQUFJLENBQUMsY0FBYyxDQUFDLEdBQUcsQ0FBQyxFQUF4QixDQUF3QixFQUNwQyxVQUFBLEtBQUssSUFBTyxPQUFBLEtBQUksQ0FBQyxZQUFZLENBQUMsS0FBSyxDQUFDLEVBQXhCLENBQXdCLENBQ3ZDLEVBSDZCLENBRzdCLENBQ0osQ0FBQztLQUNMOzs7OztJQUVPLG1EQUFjOzs7O2NBQUMsSUFBUztRQUM1QixJQUFJLENBQUMsT0FBTyxDQUFDLFFBQVEsQ0FBQyxDQUFDLGlCQUFpQixDQUFDLENBQUMsQ0FBQzs7Ozs7O0lBR3ZDLGlEQUFZOzs7O2NBQUMsS0FBVTtRQUMzQixJQUFJLENBQUMsT0FBTyxHQUFHLEtBQUssQ0FBQyxJQUFJLEVBQUUsQ0FBQyxNQUFNLENBQUM7UUFDbkMsSUFBSSxDQUFDLFlBQVksQ0FBQyxZQUFZLEVBQUUsQ0FBQzs7O2dCQWpDeEMsU0FBUyxTQUFDO29CQUNQLFFBQVEsRUFBSSxxQkFBcUI7b0JBQ2pDLFNBQVMsRUFBRyxDQUFDLGNBQWMsQ0FBQztvQkFDNUIsUUFBUSxFQUFFLHVLQUlUO2lCQUNKOzs7O2dCQVhRLGNBQWM7Z0JBSGQsb0JBQW9CO2dCQURwQixNQUFNOztxQ0FEZjs7U0FpQmEsMEJBQTBCIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQ29tcG9uZW50LCBJbnB1dCB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgUm91dGVyIH0gZnJvbSAnQGFuZ3VsYXIvcm91dGVyJztcbmltcG9ydCB7IEFuZ3VsYXIyVG9rZW5TZXJ2aWNlIH0gZnJvbSAnLi4vLi4vYW5ndWxhcjItdG9rZW4uc2VydmljZSc7XG5cbmltcG9ydCB7IFVwZGF0ZVBhc3N3b3JkRGF0YSB9IGZyb20gJy4uLy4uL2FuZ3VsYXIyLXRva2VuLm1vZGVsJztcbmltcG9ydCB7IEEydEZvcm1TZXJ2aWNlIH0gZnJvbSAnLi4vYTJ0LXNoYXJlZC9hMnQtZm9ybS9hMnQtZm9ybS5zZXJ2aWNlJztcbmltcG9ydCB7IFVQREFURV9QQVNTV09SRF9GT1JNIH0gZnJvbSAnLi4vYTJ0LXVpLmZvcm1zJztcblxuQENvbXBvbmVudCh7XG4gICAgc2VsZWN0b3I6ICAgJ2EydC11cGRhdGUtcGFzc3dvcmQnLFxuICAgIHByb3ZpZGVyczogIFtBMnRGb3JtU2VydmljZV0sXG4gICAgdGVtcGxhdGU6IGBcbiAgICAgICAgPGEydC1oZWFkbGluZT5VcGRhdGUgeW91ciBQYXNzd29yZDwvYTJ0LWhlYWRsaW5lPlxuICAgICAgICA8YTJ0LWVycm9yIFtlcnJvcnNdPVwiX2Vycm9yc1wiPjwvYTJ0LWVycm9yPlxuICAgICAgICA8YTJ0LWZvcm0+VXBkYXRlIFBhc3N3b3JkPC9hMnQtZm9ybT5cbiAgICBgXG59KVxuZXhwb3J0IGNsYXNzIEEydFVwZGF0ZVBhc3N3b3JkQ29tcG9uZW50IHtcblxuICAgIF9lcnJvcnM6IHN0cmluZ1tdO1xuXG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIHB1YmxpYyBfZm9ybVNlcnZpY2U6IEEydEZvcm1TZXJ2aWNlLFxuICAgICAgICBwdWJsaWMgX3Nlc3Npb25TZXJ2aWNlOiBBbmd1bGFyMlRva2VuU2VydmljZSxcbiAgICAgICAgcHVibGljIF9yb3V0ZXI6IFJvdXRlclxuICAgICkge1xuICAgICAgICB0aGlzLl9mb3JtU2VydmljZS5pbml0Rm9ybShVUERBVEVfUEFTU1dPUkRfRk9STSk7XG4gICAgICAgIHRoaXMuX2Zvcm1TZXJ2aWNlLnN1Ym1pdCQuc3Vic2NyaWJlKFxuICAgICAgICAgICAgKGRhdGE6IFVwZGF0ZVBhc3N3b3JkRGF0YSkgPT4gdGhpcy5fc2Vzc2lvblNlcnZpY2UudXBkYXRlUGFzc3dvcmQoZGF0YSkuc3Vic2NyaWJlKFxuICAgICAgICAgICAgICAgIHJlcyA9PiAgICAgIHRoaXMuX2hhbmRsZVN1Y2Nlc3MocmVzKSxcbiAgICAgICAgICAgICAgICBlcnJvciA9PiAgICB0aGlzLl9oYW5kbGVFcnJvcihlcnJvcilcbiAgICAgICAgICAgIClcbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIF9oYW5kbGVTdWNjZXNzKGRhdGE6IGFueSkge1xuICAgICAgICB0aGlzLl9yb3V0ZXIubmF2aWdhdGUoWydzZXNzaW9uL3NpZ24taW4nXSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBfaGFuZGxlRXJyb3IoZXJyb3I6IGFueSkge1xuICAgICAgICB0aGlzLl9lcnJvcnMgPSBlcnJvci5qc29uKCkuZXJyb3JzO1xuICAgICAgICB0aGlzLl9mb3JtU2VydmljZS51bmxvY2tTdWJtaXQoKTtcbiAgICB9XG59XG4iXX0=