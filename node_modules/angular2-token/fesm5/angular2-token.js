import { Injectable, EventEmitter, Component, Input, NgModule, Optional } from '@angular/core';
import { FormGroup, FormControl, Validators, ReactiveFormsModule } from '@angular/forms';
import { CommonModule } from '@angular/common';
import { RouterModule, ActivatedRoute, Router } from '@angular/router';
import { Http, Headers, Request, RequestMethod, RequestOptions } from '@angular/http';
import { interval, fromEvent } from 'rxjs';
import { share, pluck, filter } from 'rxjs/operators';

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes} checked by tsc
 */
var A2tFormService = /** @class */ (function () {
    function A2tFormService() {
        this.submit$ = new EventEmitter();
        this.submitLock = false;
    }
    /**
     * @param {?} fields
     * @return {?}
     */
    A2tFormService.prototype.initForm = /**
     * @param {?} fields
     * @return {?}
     */
    function (fields) {
        this.fields = fields;
        this._createFormGroup();
    };
    /**
     * @return {?}
     */
    A2tFormService.prototype.submit = /**
     * @return {?}
     */
    function () {
        this.submitLock = true;
        this.submit$.emit(this.formGroup.value);
    };
    /**
     * @return {?}
     */
    A2tFormService.prototype.unlockSubmit = /**
     * @return {?}
     */
    function () {
        this.formGroup.reset();
        this.submitLock = false;
    };
    /**
     * @return {?}
     */
    A2tFormService.prototype._createFormGroup = /**
     * @return {?}
     */
    function () {
        var /** @type {?} */ group = {};
        this.fields.forEach(function (question) {
            group[question.key] = new FormControl(null, question.validators);
        });
        this.formGroup = new FormGroup(group);
    };
    A2tFormService.decorators = [
        { type: Injectable },
    ];
    /** @nocollapse */
    A2tFormService.ctorParameters = function () { return []; };
    return A2tFormService;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes} checked by tsc
 */
var A2tFormComponent = /** @class */ (function () {
    function A2tFormComponent(_formService) {
        this._formService = _formService;
    }
    A2tFormComponent.decorators = [
        { type: Component, args: [{
                    selector: 'a2t-form',
                    template: "\n        <form class=\"a2t-form\"\n            (ngSubmit)=\"_formService.submit()\"\n            [formGroup]=\"_formService.formGroup\">\n\n            <a2t-form-field\n                *ngFor=\"let field of this._formService.fields\"\n                [question]=\"field\"\n                [form]=\"_formService.formGroup\">\n            </a2t-form-field>\n\n            <button type=\"submit\" [disabled]=\"!_formService.formGroup.valid || _formService.formGroup.pristine || _formService.submitLock\">\n                <ng-content *ngIf=\"!_formService.submitLock\"></ng-content>\n                <span *ngIf=\"_formService.submitLock\">Submitting ...</span>\n            </button>\n        </form>\n    ",
                    styles: ["\n        .a2t-form {\n            background-color: white;\n            border-radius: 3px;\n            box-shadow: 0px 1px 5px 0 rgba(0,0,0,0.3);\n            padding-top: 20px;\n            font-family: \"Segoe UI\", \"Helvetica Neue\", Arial, sans-serif;\n        }\n\n        .a2t-form button {\n            width: 100%;\n\n            transition: .3s;\n            background-color: #72c380;\n\n            border-bottom-right-radius: 3px;\n            border-bottom-left-radius: 3px;\n\n            outline: none;\n            text-align: center;\n            font-weight: 400;\n            border: none;\n            font-size: 16px;\n            line-height: 30px;\n\n            text-shadow: 0 1px 2px rgba(0, 0, 0, 0.25);\n            color: white;\n            border-bottom: 3px solid transparent;\n        }\n\n        .a2t-form button:disabled {\n            background-color: #eee !important;\n            cursor: not-allowed;\n            color: #999;\n            text-shadow: none;\n        }\n\n        .a2t-form button:hover {\n            background-color: #a6d9ae;\n        }\n    "]
                },] },
    ];
    /** @nocollapse */
    A2tFormComponent.ctorParameters = function () { return [
        { type: A2tFormService }
    ]; };
    return A2tFormComponent;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes} checked by tsc
 */
var BaseField = /** @class */ (function () {
    function BaseField(options) {
        if (options === void 0) { options = {}; }
        this.value = options.value;
        this.key = options.key || '';
        this.label = options.label || '';
        this.validators = options.validators === undefined ? [] : options.validators;
        this.type = options.type || '';
    }
    return BaseField;
}());
var /** @type {?} */ SIGN_IN_FORM = [
    new BaseField({
        key: 'email',
        label: 'Email',
        type: 'text',
        validators: [
            Validators.required,
            Validators.minLength(8)
        ]
    }),
    new BaseField({
        key: 'password',
        label: 'Password',
        type: 'password',
        validators: [
            Validators.required,
            Validators.minLength(8)
        ]
    })
];
var /** @type {?} */ SIGN_UP_FORM = [
    new BaseField({
        key: 'email',
        label: 'Email',
        type: 'text',
        validators: [
            Validators.required,
            Validators.minLength(8)
        ]
    }),
    new BaseField({
        key: 'password',
        label: 'Password',
        type: 'password',
        validators: [
            Validators.required,
            Validators.minLength(8)
        ]
    }),
    new BaseField({
        key: 'passwordConfirmation',
        label: 'Password Confirmation',
        type: 'password',
        validators: [
            Validators.required,
            Validators.minLength(8)
        ]
    })
];
var /** @type {?} */ RESET_PASSWORD_FORM = [
    new BaseField({
        key: 'email',
        label: 'Email',
        type: 'text',
        validators: [
            Validators.required,
            Validators.minLength(8)
        ]
    })
];
var /** @type {?} */ UPDATE_PASSWORD_FORM = [
    new BaseField({
        key: 'password',
        label: 'Password',
        type: 'password',
        validators: [
            Validators.required,
            Validators.minLength(8)
        ]
    }),
    new BaseField({
        key: 'passwordConfirmation',
        label: 'Password Confirmation',
        type: 'password',
        validators: [
            Validators.required,
            Validators.minLength(8)
        ]
    }),
    new BaseField({
        key: 'passwordCurrent',
        label: 'Old Password',
        type: 'password',
        validators: [
            Validators.required,
            Validators.minLength(8)
        ]
    })
];

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes} checked by tsc
 */
var A2tFormFieldComponent = /** @class */ (function () {
    function A2tFormFieldComponent() {
    }
    /**
     * @return {?}
     */
    A2tFormFieldComponent.prototype.ngOnInit = /**
     * @return {?}
     */
    function () {
        this._control = this.form.controls[this.question.key];
    };
    Object.defineProperty(A2tFormFieldComponent.prototype, "isValid", {
        get: /**
         * @return {?}
         */
        function () {
            return this._control.valid;
        },
        enumerable: true,
        configurable: true
    });
    A2tFormFieldComponent.decorators = [
        { type: Component, args: [{
                    selector: 'a2t-form-field',
                    template: "\n        <div class=\"a2t-input-group\"\n            [formGroup]=\"form\">\n\n            <label\n                [attr.for]=\"question.key\"\n                *ngIf=\"_control.pristine\">\n                {{question.label}}\n            </label>\n\n            <label class=\"a2t-error\"\n                [attr.for]=\"question.key\"\n                *ngIf=\"_control.hasError('required') && !_control.pristine\">\n                {{question.label}} is required\n            </label>\n\n            <label class=\"a2t-error\"\n                [attr.for]=\"question.key\"\n                *ngIf=\"_control.hasError('minlength')\">\n                {{question.label}} is too short\n            </label>\n\n            <label class=\"a2t-error\"\n                [attr.for]=\"question.key\"\n                *ngIf=\"_control.hasError('maxlength')\">\n                {{question.label}} is too long\n            </label>\n\n            <label class=\"a2t-valid\"\n                [attr.for]=\"question.key\"\n                *ngIf=\"_control.valid && !_control.pristine\">\n                {{question.label}}\n            </label>\n\n            <input\n                [formControlName]=\"question.key\"\n                [id]=\"question.key\"\n                [type]=\"question.type\">\n        </div>\n    ",
                    styles: ["\n        .a2t-input-group {\n            padding-bottom: 40px;\n            padding-right: 20px;\n            padding-left: 20px;\n            font-family: \"Segoe UI\", \"Helvetica Neue\", Arial, sans-serif;\n        }\n\n        .a2t-input-group input {\n            width: 100%;\n            outline: none;\n            border: none;\n            background-color: #eee;\n            line-height: 40px;\n\n            padding-left: 10px;\n            padding-right: 10px;\n        }\n\n        .a2t-input-group label {\n            color: #666;\n            font-weight: 600;\n            font-size: 13px;\n            margin-bottom: 0;\n        }\n\n        .a2t-error {\n            color: #df6564 !important;\n        }\n\n        .a2t-valid {\n            color: #72c380 !important;\n        }\n    "]
                },] },
    ];
    A2tFormFieldComponent.propDecorators = {
        question: [{ type: Input }],
        form: [{ type: Input }]
    };
    return A2tFormFieldComponent;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes} checked by tsc
 */
var A2tLinksComponent = /** @class */ (function () {
    function A2tLinksComponent() {
    }
    A2tLinksComponent.decorators = [
        { type: Component, args: [{
                    selector: 'a2t-links',
                    template: "\n        <div class=\"a2t-wrapper\">\n            <p><a routerLink=\"/session/reset-password\" *ngIf=\"case != 'reset-password'\">Forgot Password?</a></p>\n            <p><a routerLink=\"/session/sign-up\" *ngIf=\"case != 'sign-up'\">Sign Up</a></p>\n            <p><a routerLink=\"/session/sign-in\" *ngIf=\"case != 'sign-in'\">Sign In</a></p>\n        </div>\n    ",
                    styles: ["\n        .a2t-wrapper {\n            margin-top: 20px;\n        }\n\n        p {\n            margin-bottom: 0;\n        }\n\n        a {\n            color: #eee !important;\n            transition: .3s;\n            text-decoration: none;\n            font-size: 15px;\n            font-weight: 300;\n            font-family: \"Segoe UI\", \"Helvetica Neue\", Arial, sans-serif;\n        }\n\n        a:hover {\n            color: white;\n        }\n    "]
                },] },
    ];
    /** @nocollapse */
    A2tLinksComponent.ctorParameters = function () { return []; };
    A2tLinksComponent.propDecorators = {
        case: [{ type: Input }]
    };
    return A2tLinksComponent;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes} checked by tsc
 */
var A2tErrorComponent = /** @class */ (function () {
    function A2tErrorComponent() {
    }
    A2tErrorComponent.decorators = [
        { type: Component, args: [{
                    selector: 'a2t-error',
                    template: '<div *ngFor="let error of errors"><p>{{error}}</p></div>',
                    styles: ["\n        div {\n            width: 100%;\n            background-color: #df6564;\n            color: white;\n            font-weight: 300;\n            font-size: 15px;\n            padding: 10px 20px;\n            border-radius: 3px;\n            margin-bottom: 15px;\n        }\n\n        div > p {\n            margin-bottom: 0;\n        }\n    "]
                },] },
    ];
    /** @nocollapse */
    A2tErrorComponent.ctorParameters = function () { return []; };
    A2tErrorComponent.propDecorators = {
        errors: [{ type: Input }]
    };
    return A2tErrorComponent;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes} checked by tsc
 */
var A2tHeadlineComponent = /** @class */ (function () {
    function A2tHeadlineComponent() {
    }
    A2tHeadlineComponent.decorators = [
        { type: Component, args: [{
                    selector: 'a2t-headline',
                    template: '<p><ng-content></ng-content></p>',
                    styles: ["\n        p {\n            text-align: center;\n            color: white;\n            font-size: 30px;\n        }\n    "]
                },] },
    ];
    /** @nocollapse */
    A2tHeadlineComponent.ctorParameters = function () { return []; };
    return A2tHeadlineComponent;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes} checked by tsc
 */
var A2tSharedModule = /** @class */ (function () {
    function A2tSharedModule() {
    }
    A2tSharedModule.decorators = [
        { type: NgModule, args: [{
                    imports: [
                        CommonModule,
                        ReactiveFormsModule,
                        RouterModule
                    ],
                    declarations: [
                        A2tFormFieldComponent,
                        A2tFormComponent,
                        A2tLinksComponent,
                        A2tErrorComponent,
                        A2tHeadlineComponent
                    ],
                    exports: [
                        A2tFormComponent,
                        A2tLinksComponent,
                        A2tErrorComponent,
                        A2tHeadlineComponent
                    ]
                },] },
    ];
    return A2tSharedModule;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes} checked by tsc
 */
var Angular2TokenService = /** @class */ (function () {
    function Angular2TokenService(http, activatedRoute, router) {
        this.http = http;
        this.activatedRoute = activatedRoute;
        this.router = router;
    }
    Object.defineProperty(Angular2TokenService.prototype, "currentUserType", {
        get: /**
         * @return {?}
         */
        function () {
            if (this.atCurrentUserType != null)
                return this.atCurrentUserType.name;
            else
                return null;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(Angular2TokenService.prototype, "currentUserData", {
        get: /**
         * @return {?}
         */
        function () {
            return this.atCurrentUserData;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(Angular2TokenService.prototype, "currentAuthData", {
        get: /**
         * @return {?}
         */
        function () {
            return this.atCurrentAuthData;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(Angular2TokenService.prototype, "currentAuthHeaders", {
        get: /**
         * @return {?}
         */
        function () {
            if (this.atCurrentAuthData != null) {
                return new Headers({
                    'access-token': this.atCurrentAuthData.accessToken,
                    'client': this.atCurrentAuthData.client,
                    'expiry': this.atCurrentAuthData.expiry,
                    'token-type': this.atCurrentAuthData.tokenType,
                    'uid': this.atCurrentAuthData.uid
                });
            }
            return new Headers;
        },
        enumerable: true,
        configurable: true
    });
    /**
     * @return {?}
     */
    Angular2TokenService.prototype.userSignedIn = /**
     * @return {?}
     */
    function () {
        return !!this.atCurrentAuthData;
    };
    /**
     * @return {?}
     */
    Angular2TokenService.prototype.canActivate = /**
     * @return {?}
     */
    function () {
        if (this.userSignedIn())
            return true;
        else {
            // Store current location in storage (usefull for redirection after signing in)
            if (this.atOptions.signInStoredUrlStorageKey) {
                localStorage.setItem(this.atOptions.signInStoredUrlStorageKey, window.location.pathname + window.location.search);
            }
            // Redirect user to sign in if signInRedirect is set
            if (this.router && this.atOptions.signInRedirect)
                this.router.navigate([this.atOptions.signInRedirect]);
            return false;
        }
    };
    // Inital configuration
    /**
     * @param {?=} options
     * @return {?}
     */
    Angular2TokenService.prototype.init = /**
     * @param {?=} options
     * @return {?}
     */
    function (options) {
        var /** @type {?} */ defaultOptions = {
            apiPath: null,
            apiBase: null,
            signInPath: 'auth/sign_in',
            signInRedirect: null,
            signInStoredUrlStorageKey: null,
            signOutPath: 'auth/sign_out',
            validateTokenPath: 'auth/validate_token',
            signOutFailedValidate: false,
            registerAccountPath: 'auth',
            deleteAccountPath: 'auth',
            registerAccountCallback: window.location.href,
            updatePasswordPath: 'auth',
            resetPasswordPath: 'auth/password',
            resetPasswordCallback: window.location.href,
            userTypes: null,
            oAuthBase: window.location.origin,
            oAuthPaths: {
                github: 'auth/github'
            },
            oAuthCallbackPath: 'oauth_callback',
            oAuthWindowType: 'newWindow',
            oAuthWindowOptions: null,
            globalOptions: {
                headers: {
                    'Content-Type': 'application/json',
                    'Accept': 'application/json'
                }
            }
        };
        this.atOptions = (/** @type {?} */ (Object)).assign(defaultOptions, options);
        this.tryLoadAuthData();
    };
    /**
     *
     * Actions
     *
     */
    // Register request
    /**
     *
     * Actions
     *
     * @param {?} registerData
     * @return {?}
     */
    Angular2TokenService.prototype.registerAccount = /**
     *
     * Actions
     *
     * @param {?} registerData
     * @return {?}
     */
    function (registerData) {
        if (registerData.userType == null)
            this.atCurrentUserType = null;
        else {
            this.atCurrentUserType = this.getUserTypeByName(registerData.userType);
            delete registerData.userType;
        }
        if (registerData["password_confirmation"] == null &&
            registerData.passwordConfirmation != null) {
            registerData["password_confirmation"] = registerData.passwordConfirmation;
            delete registerData.passwordConfirmation;
        }
        registerData["confirm_success_url"] = this.atOptions.registerAccountCallback;
        return this.post(this.getUserPath() + this.atOptions.registerAccountPath, JSON.stringify(registerData));
    };
    // Delete Account
    /**
     * @return {?}
     */
    Angular2TokenService.prototype.deleteAccount = /**
     * @return {?}
     */
    function () {
        return this.delete(this.getUserPath() + this.atOptions.deleteAccountPath);
    };
    // Sign in request and set storage
    /**
     * @param {?} signInData
     * @return {?}
     */
    Angular2TokenService.prototype.signIn = /**
     * @param {?} signInData
     * @return {?}
     */
    function (signInData) {
        var _this = this;
        if (signInData.userType == null)
            this.atCurrentUserType = null;
        else
            this.atCurrentUserType = this.getUserTypeByName(signInData.userType);
        var /** @type {?} */ body = JSON.stringify({
            email: signInData.email,
            password: signInData.password
        });
        var /** @type {?} */ observ = this.post(this.getUserPath() + this.atOptions.signInPath, body);
        observ.subscribe(function (res) { return _this.atCurrentUserData = res.json().data; }, function (_error) { return null; });
        return observ;
    };
    /**
     * @param {?} oAuthType
     * @return {?}
     */
    Angular2TokenService.prototype.signInOAuth = /**
     * @param {?} oAuthType
     * @return {?}
     */
    function (oAuthType) {
        var /** @type {?} */ oAuthPath = this.getOAuthPath(oAuthType);
        var /** @type {?} */ callbackUrl = window.location.origin + "/" + this.atOptions.oAuthCallbackPath;
        var /** @type {?} */ oAuthWindowType = this.atOptions.oAuthWindowType;
        var /** @type {?} */ authUrl = this.getOAuthUrl(oAuthPath, callbackUrl, oAuthWindowType);
        if (oAuthWindowType == 'newWindow') {
            var /** @type {?} */ oAuthWindowOptions = this.atOptions.oAuthWindowOptions;
            var /** @type {?} */ windowOptions = '';
            if (oAuthWindowOptions) {
                for (var /** @type {?} */ key in oAuthWindowOptions) {
                    windowOptions += "," + key + "=" + oAuthWindowOptions[key];
                }
            }
            var /** @type {?} */ popup = window.open(authUrl, '_blank', "closebuttoncaption=Cancel" + windowOptions);
            return this.requestCredentialsViaPostMessage(popup);
        }
        else if (oAuthWindowType == 'sameWindow') {
            window.location.href = authUrl;
        }
        else {
            throw "Unsupported oAuthWindowType \"" + oAuthWindowType + "\"";
        }
    };
    /**
     * @return {?}
     */
    Angular2TokenService.prototype.processOAuthCallback = /**
     * @return {?}
     */
    function () {
        this.getAuthDataFromParams();
    };
    // Sign out request and delete storage
    /**
     * @return {?}
     */
    Angular2TokenService.prototype.signOut = /**
     * @return {?}
     */
    function () {
        var /** @type {?} */ observ = this.delete(this.getUserPath() + this.atOptions.signOutPath);
        localStorage.removeItem('accessToken');
        localStorage.removeItem('client');
        localStorage.removeItem('expiry');
        localStorage.removeItem('tokenType');
        localStorage.removeItem('uid');
        this.atCurrentAuthData = null;
        this.atCurrentUserType = null;
        this.atCurrentUserData = null;
        return observ;
    };
    // Validate token request
    /**
     * @return {?}
     */
    Angular2TokenService.prototype.validateToken = /**
     * @return {?}
     */
    function () {
        var _this = this;
        var /** @type {?} */ observ = this.get(this.getUserPath() + this.atOptions.validateTokenPath);
        observ.subscribe(function (res) { return _this.atCurrentUserData = res.json().data; }, function (error) {
            if (error.status === 401 && _this.atOptions.signOutFailedValidate) {
                _this.signOut();
            }
        });
        return observ;
    };
    // Update password request
    /**
     * @param {?} updatePasswordData
     * @return {?}
     */
    Angular2TokenService.prototype.updatePassword = /**
     * @param {?} updatePasswordData
     * @return {?}
     */
    function (updatePasswordData) {
        if (updatePasswordData.userType != null)
            this.atCurrentUserType = this.getUserTypeByName(updatePasswordData.userType);
        var /** @type {?} */ args;
        if (updatePasswordData.passwordCurrent == null) {
            args = {
                password: updatePasswordData.password,
                password_confirmation: updatePasswordData.passwordConfirmation
            };
        }
        else {
            args = {
                current_password: updatePasswordData.passwordCurrent,
                password: updatePasswordData.password,
                password_confirmation: updatePasswordData.passwordConfirmation
            };
        }
        if (updatePasswordData.resetPasswordToken) {
            args.reset_password_token = updatePasswordData.resetPasswordToken;
        }
        var /** @type {?} */ body = JSON.stringify(args);
        return this.put(this.getUserPath() + this.atOptions.updatePasswordPath, body);
    };
    // Reset password request
    /**
     * @param {?} resetPasswordData
     * @return {?}
     */
    Angular2TokenService.prototype.resetPassword = /**
     * @param {?} resetPasswordData
     * @return {?}
     */
    function (resetPasswordData) {
        if (resetPasswordData.userType == null)
            this.atCurrentUserType = null;
        else
            this.atCurrentUserType = this.getUserTypeByName(resetPasswordData.userType);
        var /** @type {?} */ body = JSON.stringify({
            email: resetPasswordData.email,
            redirect_url: this.atOptions.resetPasswordCallback
        });
        return this.post(this.getUserPath() + this.atOptions.resetPasswordPath, body);
    };
    /**
     *
     * HTTP Wrappers
     *
     */
    /**
     *
     * HTTP Wrappers
     *
     * @param {?} url
     * @param {?=} options
     * @return {?}
     */
    Angular2TokenService.prototype.get = /**
     *
     * HTTP Wrappers
     *
     * @param {?} url
     * @param {?=} options
     * @return {?}
     */
    function (url, options) {
        return this.request(this.mergeRequestOptionsArgs({
            url: this.getApiPath() + url,
            method: RequestMethod.Get
        }, options));
    };
    /**
     * @param {?} url
     * @param {?} body
     * @param {?=} options
     * @return {?}
     */
    Angular2TokenService.prototype.post = /**
     * @param {?} url
     * @param {?} body
     * @param {?=} options
     * @return {?}
     */
    function (url, body, options) {
        return this.request(this.mergeRequestOptionsArgs({
            url: this.getApiPath() + url,
            method: RequestMethod.Post,
            body: body
        }, options));
    };
    /**
     * @param {?} url
     * @param {?} body
     * @param {?=} options
     * @return {?}
     */
    Angular2TokenService.prototype.put = /**
     * @param {?} url
     * @param {?} body
     * @param {?=} options
     * @return {?}
     */
    function (url, body, options) {
        return this.request(this.mergeRequestOptionsArgs({
            url: this.getApiPath() + url,
            method: RequestMethod.Put,
            body: body
        }, options));
    };
    /**
     * @param {?} url
     * @param {?=} options
     * @return {?}
     */
    Angular2TokenService.prototype.delete = /**
     * @param {?} url
     * @param {?=} options
     * @return {?}
     */
    function (url, options) {
        return this.request(this.mergeRequestOptionsArgs({
            url: this.getApiPath() + url,
            method: RequestMethod.Delete
        }, options));
    };
    /**
     * @param {?} url
     * @param {?} body
     * @param {?=} options
     * @return {?}
     */
    Angular2TokenService.prototype.patch = /**
     * @param {?} url
     * @param {?} body
     * @param {?=} options
     * @return {?}
     */
    function (url, body, options) {
        return this.request(this.mergeRequestOptionsArgs({
            url: this.getApiPath() + url,
            method: RequestMethod.Patch,
            body: body
        }, options));
    };
    /**
     * @param {?} path
     * @param {?=} options
     * @return {?}
     */
    Angular2TokenService.prototype.head = /**
     * @param {?} path
     * @param {?=} options
     * @return {?}
     */
    function (path, options) {
        return this.request({
            method: RequestMethod.Head,
            url: this.getApiPath() + path
        });
    };
    /**
     * @param {?} url
     * @param {?=} options
     * @return {?}
     */
    Angular2TokenService.prototype.options = /**
     * @param {?} url
     * @param {?=} options
     * @return {?}
     */
    function (url, options) {
        return this.request(this.mergeRequestOptionsArgs({
            url: this.getApiPath() + url,
            method: RequestMethod.Options
        }, options));
    };
    // Construct and send Http request
    /**
     * @param {?} options
     * @return {?}
     */
    Angular2TokenService.prototype.request = /**
     * @param {?} options
     * @return {?}
     */
    function (options) {
        var /** @type {?} */ baseRequestOptions;
        var /** @type {?} */ baseHeaders = this.atOptions.globalOptions.headers;
        // Get auth data from local storage
        this.getAuthDataFromStorage();
        // Merge auth headers to request if set
        if (this.atCurrentAuthData != null) {
            (/** @type {?} */ (Object)).assign(baseHeaders, {
                'access-token': this.atCurrentAuthData.accessToken,
                'client': this.atCurrentAuthData.client,
                'expiry': this.atCurrentAuthData.expiry,
                'token-type': this.atCurrentAuthData.tokenType,
                'uid': this.atCurrentAuthData.uid
            });
        }
        baseRequestOptions = new RequestOptions({
            headers: new Headers(baseHeaders)
        });
        // Merge standard and custom RequestOptions
        baseRequestOptions = baseRequestOptions.merge(options);
        var /** @type {?} */ response = this.http.request(new Request(baseRequestOptions)).pipe(share());
        this.handleResponse(response);
        return response;
    };
    /**
     * @param {?} options
     * @param {?=} addOptions
     * @return {?}
     */
    Angular2TokenService.prototype.mergeRequestOptionsArgs = /**
     * @param {?} options
     * @param {?=} addOptions
     * @return {?}
     */
    function (options, addOptions) {
        var /** @type {?} */ returnOptions = options;
        if (options)
            (/** @type {?} */ (Object)).assign(returnOptions, addOptions);
        return returnOptions;
    };
    /**
     * @param {?} response
     * @return {?}
     */
    Angular2TokenService.prototype.handleResponse = /**
     * @param {?} response
     * @return {?}
     */
    function (response) {
        var _this = this;
        response.subscribe(function (res) {
            _this.getAuthHeadersFromResponse(/** @type {?} */ (res));
        }, function (error) {
            _this.getAuthHeadersFromResponse(/** @type {?} */ (error));
        });
    };
    /**
     *
     * Get Auth Data
     *
     * @return {?}
     */
    Angular2TokenService.prototype.tryLoadAuthData = /**
     *
     * Get Auth Data
     *
     * @return {?}
     */
    function () {
        var /** @type {?} */ userType = this.getUserTypeByName(localStorage.getItem('userType'));
        if (userType)
            this.atCurrentUserType = userType;
        this.getAuthDataFromStorage();
        if (this.activatedRoute)
            this.getAuthDataFromParams();
        if (this.atCurrentAuthData)
            this.validateToken();
    };
    /**
     * @param {?} data
     * @return {?}
     */
    Angular2TokenService.prototype.getAuthHeadersFromResponse = /**
     * @param {?} data
     * @return {?}
     */
    function (data) {
        var /** @type {?} */ headers = data.headers;
        var /** @type {?} */ authData = {
            accessToken: headers.get('access-token'),
            client: headers.get('client'),
            expiry: headers.get('expiry'),
            tokenType: headers.get('token-type'),
            uid: headers.get('uid')
        };
        this.setAuthData(authData);
    };
    /**
     * @param {?} data
     * @return {?}
     */
    Angular2TokenService.prototype.getAuthDataFromPostMessage = /**
     * @param {?} data
     * @return {?}
     */
    function (data) {
        var /** @type {?} */ authData = {
            accessToken: data['auth_token'],
            client: data['client_id'],
            expiry: data['expiry'],
            tokenType: 'Bearer',
            uid: data['uid']
        };
        this.setAuthData(authData);
    };
    /**
     * @return {?}
     */
    Angular2TokenService.prototype.getAuthDataFromStorage = /**
     * @return {?}
     */
    function () {
        var /** @type {?} */ authData = {
            accessToken: localStorage.getItem('accessToken'),
            client: localStorage.getItem('client'),
            expiry: localStorage.getItem('expiry'),
            tokenType: localStorage.getItem('tokenType'),
            uid: localStorage.getItem('uid')
        };
        if (this.checkAuthData(authData))
            this.atCurrentAuthData = authData;
    };
    /**
     * @return {?}
     */
    Angular2TokenService.prototype.getAuthDataFromParams = /**
     * @return {?}
     */
    function () {
        var _this = this;
        if (this.activatedRoute.queryParams)
            // Fix for Testing, needs to be removed later
            this.activatedRoute.queryParams.subscribe(function (queryParams) {
                var /** @type {?} */ authData = {
                    accessToken: queryParams['token'] || queryParams['auth_token'],
                    client: queryParams['client_id'],
                    expiry: queryParams['expiry'],
                    tokenType: 'Bearer',
                    uid: queryParams['uid']
                };
                if (_this.checkAuthData(authData))
                    _this.atCurrentAuthData = authData;
            });
    };
    /**
     *
     * Set Auth Data
     *
     * @param {?} authData
     * @return {?}
     */
    Angular2TokenService.prototype.setAuthData = /**
     *
     * Set Auth Data
     *
     * @param {?} authData
     * @return {?}
     */
    function (authData) {
        if (this.checkAuthData(authData)) {
            this.atCurrentAuthData = authData;
            localStorage.setItem('accessToken', authData.accessToken);
            localStorage.setItem('client', authData.client);
            localStorage.setItem('expiry', authData.expiry);
            localStorage.setItem('tokenType', authData.tokenType);
            localStorage.setItem('uid', authData.uid);
            if (this.atCurrentUserType != null)
                localStorage.setItem('userType', this.atCurrentUserType.name);
        }
    };
    /**
     *
     * Validate Auth Data
     *
     * @param {?} authData
     * @return {?}
     */
    Angular2TokenService.prototype.checkAuthData = /**
     *
     * Validate Auth Data
     *
     * @param {?} authData
     * @return {?}
     */
    function (authData) {
        if (authData.accessToken != null &&
            authData.client != null &&
            authData.expiry != null &&
            authData.tokenType != null &&
            authData.uid != null) {
            if (this.atCurrentAuthData != null)
                return authData.expiry >= this.atCurrentAuthData.expiry;
            else
                return true;
        }
        else {
            return false;
        }
    };
    /**
     *
     * Construct Paths / Urls
     *
     * @return {?}
     */
    Angular2TokenService.prototype.getUserPath = /**
     *
     * Construct Paths / Urls
     *
     * @return {?}
     */
    function () {
        if (this.atCurrentUserType == null)
            return '';
        else
            return this.atCurrentUserType.path + '/';
    };
    /**
     * @return {?}
     */
    Angular2TokenService.prototype.getApiPath = /**
     * @return {?}
     */
    function () {
        var /** @type {?} */ constructedPath = '';
        if (this.atOptions.apiBase != null)
            constructedPath += this.atOptions.apiBase + '/';
        if (this.atOptions.apiPath != null)
            constructedPath += this.atOptions.apiPath + '/';
        return constructedPath;
    };
    /**
     * @param {?} oAuthType
     * @return {?}
     */
    Angular2TokenService.prototype.getOAuthPath = /**
     * @param {?} oAuthType
     * @return {?}
     */
    function (oAuthType) {
        var /** @type {?} */ oAuthPath;
        oAuthPath = this.atOptions.oAuthPaths[oAuthType];
        if (oAuthPath == null)
            oAuthPath = "/auth/" + oAuthType;
        return oAuthPath;
    };
    /**
     * @param {?} oAuthPath
     * @param {?} callbackUrl
     * @param {?} windowType
     * @return {?}
     */
    Angular2TokenService.prototype.getOAuthUrl = /**
     * @param {?} oAuthPath
     * @param {?} callbackUrl
     * @param {?} windowType
     * @return {?}
     */
    function (oAuthPath, callbackUrl, windowType) {
        var /** @type {?} */ url;
        url = this.atOptions.oAuthBase + "/" + oAuthPath;
        url += "?omniauth_window_type=" + windowType;
        url += "&auth_origin_url=" + encodeURIComponent(callbackUrl);
        if (this.atCurrentUserType != null)
            url += "&resource_class=" + this.atCurrentUserType.name;
        return url;
    };
    /**
     *
     * OAuth
     *
     * @param {?} authWindow
     * @return {?}
     */
    Angular2TokenService.prototype.requestCredentialsViaPostMessage = /**
     *
     * OAuth
     *
     * @param {?} authWindow
     * @return {?}
     */
    function (authWindow) {
        var /** @type {?} */ pollerObserv = interval(500);
        var /** @type {?} */ responseObserv = fromEvent(window, 'message').pipe(pluck('data'), filter(this.oAuthWindowResponseFilter));
        var /** @type {?} */ responseSubscription = responseObserv.subscribe(this.getAuthDataFromPostMessage.bind(this));
        var /** @type {?} */ pollerSubscription = pollerObserv.subscribe(function () {
            if (authWindow.closed)
                pollerSubscription.unsubscribe();
            else
                authWindow.postMessage('requestCredentials', '*');
        });
        return responseObserv;
    };
    /**
     * @param {?} data
     * @return {?}
     */
    Angular2TokenService.prototype.oAuthWindowResponseFilter = /**
     * @param {?} data
     * @return {?}
     */
    function (data) {
        if (data.message == 'deliverCredentials' || data.message == 'authFailure')
            return data;
    };
    /**
     *
     * Utilities
     *
     * @param {?} name
     * @return {?}
     */
    Angular2TokenService.prototype.getUserTypeByName = /**
     *
     * Utilities
     *
     * @param {?} name
     * @return {?}
     */
    function (name) {
        if (name == null || this.atOptions.userTypes == null)
            return null;
        return this.atOptions.userTypes.find(function (userType) { return userType.name === name; });
    };
    Angular2TokenService.decorators = [
        { type: Injectable },
    ];
    /** @nocollapse */
    Angular2TokenService.ctorParameters = function () { return [
        { type: Http },
        { type: ActivatedRoute, decorators: [{ type: Optional }] },
        { type: Router, decorators: [{ type: Optional }] }
    ]; };
    return Angular2TokenService;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes} checked by tsc
 */
var A2tUiComponent = /** @class */ (function () {
    function A2tUiComponent() {
    }
    A2tUiComponent.decorators = [
        { type: Component, args: [{
                    selector: 'a2t-ui',
                    template: "\n        <div class=\"a2t-wrapper\">\n            <div class=\"a2t-container\">\n                <router-outlet></router-outlet>\n            </div>\n        </div>\n    ",
                    styles: ["\n        .a2t-wrapper {\n            width: 100%;\n            height: 100vh;\n            min-height: 500px;\n\n            padding-top: 100px;\n\n            display: flex;\n            justify-content: center;\n\n            background-color: #3270a0;\n        }\n\n        .a2t-logo {\n            text-align: center;\n            color: white;\n            font-size: 30px;\n        }\n\n        .a2t-container {\n            width: 400px;\n        }\n    "]
                },] },
    ];
    /** @nocollapse */
    A2tUiComponent.ctorParameters = function () { return []; };
    return A2tUiComponent;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes} checked by tsc
 */
var A2tSignInComponent = /** @class */ (function () {
    function A2tSignInComponent(_formService, _sessionService, _router) {
        var _this = this;
        this._formService = _formService;
        this._sessionService = _sessionService;
        this._router = _router;
        this._formService.initForm(SIGN_IN_FORM);
        this._formService.submit$.subscribe(function (data) { return _this._sessionService.signIn(data).subscribe(function (res) { return _this._handleSuccess(res); }, function (error) { return _this._handleError(error); }); });
    }
    /**
     * @param {?} data
     * @return {?}
     */
    A2tSignInComponent.prototype._handleSuccess = /**
     * @param {?} data
     * @return {?}
     */
    function (data) {
        this._errors = null;
        this._formService.unlockSubmit();
        this._router.navigate(['restricted']);
    };
    /**
     * @param {?} error
     * @return {?}
     */
    A2tSignInComponent.prototype._handleError = /**
     * @param {?} error
     * @return {?}
     */
    function (error) {
        this._errors = error.json().errors;
        this._formService.unlockSubmit();
    };
    A2tSignInComponent.decorators = [
        { type: Component, args: [{
                    selector: 'a2t-sign-in',
                    providers: [A2tFormService],
                    template: "\n        <a2t-headline>Sign In</a2t-headline>\n        <a2t-error [errors]=\"_errors\"></a2t-error>\n        <a2t-form>Sign In</a2t-form>\n        <a2t-links case=\"sign-in\"></a2t-links>\n    "
                },] },
    ];
    /** @nocollapse */
    A2tSignInComponent.ctorParameters = function () { return [
        { type: A2tFormService },
        { type: Angular2TokenService },
        { type: Router }
    ]; };
    return A2tSignInComponent;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes} checked by tsc
 */
var A2tSignUpComponent = /** @class */ (function () {
    function A2tSignUpComponent(_formService, _sessionService, _router) {
        var _this = this;
        this._formService = _formService;
        this._sessionService = _sessionService;
        this._router = _router;
        this._formService.initForm(SIGN_UP_FORM);
        this._formService.submit$.subscribe(function (data) { return _this._sessionService.registerAccount(data).subscribe(function (res) { return _this._handleSuccess(res); }, function (error) { return _this._handleError(error); }); });
    }
    /**
     * @param {?} data
     * @return {?}
     */
    A2tSignUpComponent.prototype._handleSuccess = /**
     * @param {?} data
     * @return {?}
     */
    function (data) {
        this._errors = null;
        this._formService.unlockSubmit();
        this._router.navigate(['restricted']);
    };
    /**
     * @param {?} error
     * @return {?}
     */
    A2tSignUpComponent.prototype._handleError = /**
     * @param {?} error
     * @return {?}
     */
    function (error) {
        this._errors = error.json().errors.full_messages;
        this._formService.unlockSubmit();
    };
    A2tSignUpComponent.decorators = [
        { type: Component, args: [{
                    selector: 'a2t-sign-up',
                    providers: [A2tFormService],
                    template: "\n        <a2t-headline>Sign Up</a2t-headline>\n        <a2t-error [errors]=\"_errors\"></a2t-error>\n        <a2t-form>Sign Up</a2t-form>\n        <a2t-links case=\"sign-up\"></a2t-links>\n    "
                },] },
    ];
    /** @nocollapse */
    A2tSignUpComponent.ctorParameters = function () { return [
        { type: A2tFormService },
        { type: Angular2TokenService },
        { type: Router }
    ]; };
    return A2tSignUpComponent;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes} checked by tsc
 */
var A2tResetPasswordComponent = /** @class */ (function () {
    function A2tResetPasswordComponent(_formService, _sessionService) {
        var _this = this;
        this._formService = _formService;
        this._sessionService = _sessionService;
        this._emailSend = false;
        this._formService.initForm(RESET_PASSWORD_FORM);
        this._formService.submit$.subscribe(function (data) { return _this._sessionService.resetPassword(data).subscribe(function (res) { return _this._handleSuccess(); }, function (error) { return _this._handleError(); }); });
    }
    /**
     * @return {?}
     */
    A2tResetPasswordComponent.prototype._handleSuccess = /**
     * @return {?}
     */
    function () {
        this._emailSend = true;
    };
    /**
     * @return {?}
     */
    A2tResetPasswordComponent.prototype._handleError = /**
     * @return {?}
     */
    function () {
        this._emailSend = true;
    };
    A2tResetPasswordComponent.decorators = [
        { type: Component, args: [{
                    selector: 'a2t-reset-password',
                    providers: [A2tFormService],
                    template: "\n        <a2t-headline *ngIf=\"!_emailSend\">Reset your Password</a2t-headline>\n        <a2t-form *ngIf=\"!_emailSend\">Reset Password</a2t-form>\n        <p class=\"email-send-text\" *ngIf=\"_emailSend\">\n            If the entered email is registered we will send instruction on how to reset your password.\n        </p>\n        <a2t-links *ngIf=\"!_emailSend\" case=\"reset-password\"></a2t-links>\n    ",
                    styles: ["\n        .email-send-text {\n            background-color: #72c380;\n            color: white;\n            font-size: 16pt;\n            text-align: center;\n            padding: 20px;\n            border-radius: 3px;\n        }\n    "]
                },] },
    ];
    /** @nocollapse */
    A2tResetPasswordComponent.ctorParameters = function () { return [
        { type: A2tFormService },
        { type: Angular2TokenService }
    ]; };
    return A2tResetPasswordComponent;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes} checked by tsc
 */
var A2tUpdatePasswordComponent = /** @class */ (function () {
    function A2tUpdatePasswordComponent(_formService, _sessionService, _router) {
        var _this = this;
        this._formService = _formService;
        this._sessionService = _sessionService;
        this._router = _router;
        this._formService.initForm(UPDATE_PASSWORD_FORM);
        this._formService.submit$.subscribe(function (data) { return _this._sessionService.updatePassword(data).subscribe(function (res) { return _this._handleSuccess(res); }, function (error) { return _this._handleError(error); }); });
    }
    /**
     * @param {?} data
     * @return {?}
     */
    A2tUpdatePasswordComponent.prototype._handleSuccess = /**
     * @param {?} data
     * @return {?}
     */
    function (data) {
        this._router.navigate(['session/sign-in']);
    };
    /**
     * @param {?} error
     * @return {?}
     */
    A2tUpdatePasswordComponent.prototype._handleError = /**
     * @param {?} error
     * @return {?}
     */
    function (error) {
        this._errors = error.json().errors;
        this._formService.unlockSubmit();
    };
    A2tUpdatePasswordComponent.decorators = [
        { type: Component, args: [{
                    selector: 'a2t-update-password',
                    providers: [A2tFormService],
                    template: "\n        <a2t-headline>Update your Password</a2t-headline>\n        <a2t-error [errors]=\"_errors\"></a2t-error>\n        <a2t-form>Update Password</a2t-form>\n    "
                },] },
    ];
    /** @nocollapse */
    A2tUpdatePasswordComponent.ctorParameters = function () { return [
        { type: A2tFormService },
        { type: Angular2TokenService },
        { type: Router }
    ]; };
    return A2tUpdatePasswordComponent;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes} checked by tsc
 */
var /** @type {?} */ routes = [{
        path: 'session',
        component: A2tUiComponent,
        children: [
            { path: 'sign-in', component: A2tSignInComponent },
            { path: 'sign-up', component: A2tSignUpComponent },
            { path: 'reset-password', component: A2tResetPasswordComponent },
            {
                path: 'update-password',
                component: A2tUpdatePasswordComponent,
                canActivate: [Angular2TokenService]
            }
        ]
    }];
var /** @type {?} */ a2tRoutes = RouterModule.forChild(routes);

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes} checked by tsc
 */
var A2tUiModule = /** @class */ (function () {
    function A2tUiModule() {
    }
    A2tUiModule.decorators = [
        { type: NgModule, args: [{
                    imports: [
                        CommonModule,
                        RouterModule,
                        A2tSharedModule,
                        a2tRoutes
                    ],
                    declarations: [
                        A2tUiComponent,
                        A2tSignInComponent,
                        A2tSignUpComponent,
                        A2tResetPasswordComponent,
                        A2tUpdatePasswordComponent
                    ]
                },] },
    ];
    return A2tUiModule;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes} checked by tsc
 */

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes} checked by tsc
 */

export { A2tUiModule, Angular2TokenService, A2tResetPasswordComponent as ɵl, A2tErrorComponent as ɵf, A2tFormFieldComponent as ɵb, A2tFormComponent as ɵc, A2tFormService as ɵd, A2tHeadlineComponent as ɵg, A2tLinksComponent as ɵe, A2tSharedModule as ɵa, A2tSignInComponent as ɵj, A2tSignUpComponent as ɵk, A2tUiComponent as ɵi, a2tRoutes as ɵh, A2tUpdatePasswordComponent as ɵm };

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYW5ndWxhcjItdG9rZW4uanMubWFwIiwic291cmNlcyI6WyJuZzovL2FuZ3VsYXIyLXRva2VuL2EydC11aS9hMnQtc2hhcmVkL2EydC1mb3JtL2EydC1mb3JtLnNlcnZpY2UudHMiLCJuZzovL2FuZ3VsYXIyLXRva2VuL2EydC11aS9hMnQtc2hhcmVkL2EydC1mb3JtL2EydC1mb3JtLmNvbXBvbmVudC50cyIsIm5nOi8vYW5ndWxhcjItdG9rZW4vYTJ0LXVpL2EydC11aS5mb3Jtcy50cyIsIm5nOi8vYW5ndWxhcjItdG9rZW4vYTJ0LXVpL2EydC1zaGFyZWQvYTJ0LWZvcm0vYTJ0LWZvcm0tZmllbGQvYTJ0LWZvcm0tZmllbGQuY29tcG9uZW50LnRzIiwibmc6Ly9hbmd1bGFyMi10b2tlbi9hMnQtdWkvYTJ0LXNoYXJlZC9hMnQtbGlua3MvYTJ0LWxpbmtzLmNvbXBvbmVudC50cyIsIm5nOi8vYW5ndWxhcjItdG9rZW4vYTJ0LXVpL2EydC1zaGFyZWQvYTJ0LWVycm9yL2EydC1lcnJvci5jb21wb25lbnQudHMiLCJuZzovL2FuZ3VsYXIyLXRva2VuL2EydC11aS9hMnQtc2hhcmVkL2EydC1oZWFkbGluZS9hMnQtaGVhZGxpbmUuY29tcG9uZW50LnRzIiwibmc6Ly9hbmd1bGFyMi10b2tlbi9hMnQtdWkvYTJ0LXNoYXJlZC9hMnQtc2hhcmVkLm1vZHVsZS50cyIsIm5nOi8vYW5ndWxhcjItdG9rZW4vYW5ndWxhcjItdG9rZW4uc2VydmljZS50cyIsIm5nOi8vYW5ndWxhcjItdG9rZW4vYTJ0LXVpL2EydC11aS5jb21wb25lbnQudHMiLCJuZzovL2FuZ3VsYXIyLXRva2VuL2EydC11aS9hMnQtc2lnbi1pbi9hMnQtc2lnbi1pbi5jb21wb25lbnQudHMiLCJuZzovL2FuZ3VsYXIyLXRva2VuL2EydC11aS9hMnQtc2lnbi11cC9hMnQtc2lnbi11cC5jb21wb25lbnQudHMiLCJuZzovL2FuZ3VsYXIyLXRva2VuL2EydC11aS9hMnQtcmVzZXQtcGFzc3dvcmQvYTJ0LXJlc2V0LXBhc3N3b3JkLmNvbXBvbmVudC50cyIsIm5nOi8vYW5ndWxhcjItdG9rZW4vYTJ0LXVpL2EydC11cGRhdGUtcGFzc3dvcmQvYTJ0LXVwZGF0ZS1wYXNzd29yZC5jb21wb25lbnQudHMiLCJuZzovL2FuZ3VsYXIyLXRva2VuL2EydC11aS9hMnQtdWkucm91dGVzLnRzIiwibmc6Ly9hbmd1bGFyMi10b2tlbi9hMnQtdWkvYTJ0LXVpLm1vZHVsZS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBJbmplY3RhYmxlLCBFdmVudEVtaXR0ZXIgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7IEZvcm1Hcm91cCwgRm9ybUNvbnRyb2wgfSBmcm9tICdAYW5ndWxhci9mb3Jtcyc7XG5pbXBvcnQgeyBTdWJqZWN0IH0gZnJvbSAncnhqcy9TdWJqZWN0JztcblxuaW1wb3J0IHsgU2lnbkluRGF0YSB9IGZyb20gJy4uLy4uLy4uL2FuZ3VsYXIyLXRva2VuLm1vZGVsJztcbmltcG9ydCB7IEJhc2VGaWVsZCB9IGZyb20gJy4uLy4uL2EydC11aS5mb3Jtcyc7XG5cbkBJbmplY3RhYmxlKClcbmV4cG9ydCBjbGFzcyBBMnRGb3JtU2VydmljZSB7XG5cbiAgICAvLyBTdWJtaXQgRXZlbnRcbiAgICBwdWJsaWMgc3VibWl0JCA9IG5ldyBFdmVudEVtaXR0ZXI8YW55PigpO1xuICAgIHB1YmxpYyBzdWJtaXRMb2NrOiBib29sZWFuID0gZmFsc2U7XG5cbiAgICAvLyBGb3JtIEJ1aWxkaW5nXG4gICAgcHVibGljIGZvcm1Hcm91cDogRm9ybUdyb3VwO1xuICAgIHB1YmxpYyBmaWVsZHM6IEJhc2VGaWVsZFtdO1xuXG4gICAgY29uc3RydWN0b3IoKSB7IH1cblxuICAgIHB1YmxpYyBpbml0Rm9ybShmaWVsZHM6IEJhc2VGaWVsZFtdKSB7XG4gICAgICAgIHRoaXMuZmllbGRzID0gZmllbGRzO1xuICAgICAgICB0aGlzLl9jcmVhdGVGb3JtR3JvdXAoKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgc3VibWl0KCkge1xuICAgICAgICB0aGlzLnN1Ym1pdExvY2sgPSB0cnVlO1xuICAgICAgICB0aGlzLnN1Ym1pdCQuZW1pdCh0aGlzLmZvcm1Hcm91cC52YWx1ZSk7XG4gICAgfVxuXG4gICAgcHVibGljIHVubG9ja1N1Ym1pdCgpIHtcbiAgICAgICAgdGhpcy5mb3JtR3JvdXAucmVzZXQoKTtcbiAgICAgICAgdGhpcy5zdWJtaXRMb2NrID0gZmFsc2U7XG4gICAgfTtcblxuICAgIHByaXZhdGUgX2NyZWF0ZUZvcm1Hcm91cCgpIHtcblxuICAgICAgICBsZXQgZ3JvdXA6IGFueSA9IHt9O1xuXG4gICAgICAgIHRoaXMuZmllbGRzLmZvckVhY2gocXVlc3Rpb24gPT4ge1xuICAgICAgICAgICAgZ3JvdXBbcXVlc3Rpb24ua2V5XSA9IG5ldyBGb3JtQ29udHJvbChudWxsLCBxdWVzdGlvbi52YWxpZGF0b3JzKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgdGhpcy5mb3JtR3JvdXAgPSBuZXcgRm9ybUdyb3VwKGdyb3VwKTtcbiAgICB9XG59XG4iLCJpbXBvcnQgeyBDb21wb25lbnQgfSAgZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5cbmltcG9ydCB7IEEydEZvcm1TZXJ2aWNlIH0gZnJvbSAnLi9hMnQtZm9ybS5zZXJ2aWNlJztcbmltcG9ydCB7IEEydEZvcm1GaWVsZENvbXBvbmVudCB9IGZyb20gJy4vYTJ0LWZvcm0tZmllbGQvYTJ0LWZvcm0tZmllbGQuY29tcG9uZW50JztcblxuQENvbXBvbmVudCh7XG4gICAgc2VsZWN0b3I6ICdhMnQtZm9ybScsXG4gICAgdGVtcGxhdGU6IGBcbiAgICAgICAgPGZvcm0gY2xhc3M9XCJhMnQtZm9ybVwiXG4gICAgICAgICAgICAobmdTdWJtaXQpPVwiX2Zvcm1TZXJ2aWNlLnN1Ym1pdCgpXCJcbiAgICAgICAgICAgIFtmb3JtR3JvdXBdPVwiX2Zvcm1TZXJ2aWNlLmZvcm1Hcm91cFwiPlxuXG4gICAgICAgICAgICA8YTJ0LWZvcm0tZmllbGRcbiAgICAgICAgICAgICAgICAqbmdGb3I9XCJsZXQgZmllbGQgb2YgdGhpcy5fZm9ybVNlcnZpY2UuZmllbGRzXCJcbiAgICAgICAgICAgICAgICBbcXVlc3Rpb25dPVwiZmllbGRcIlxuICAgICAgICAgICAgICAgIFtmb3JtXT1cIl9mb3JtU2VydmljZS5mb3JtR3JvdXBcIj5cbiAgICAgICAgICAgIDwvYTJ0LWZvcm0tZmllbGQ+XG5cbiAgICAgICAgICAgIDxidXR0b24gdHlwZT1cInN1Ym1pdFwiIFtkaXNhYmxlZF09XCIhX2Zvcm1TZXJ2aWNlLmZvcm1Hcm91cC52YWxpZCB8fCBfZm9ybVNlcnZpY2UuZm9ybUdyb3VwLnByaXN0aW5lIHx8IF9mb3JtU2VydmljZS5zdWJtaXRMb2NrXCI+XG4gICAgICAgICAgICAgICAgPG5nLWNvbnRlbnQgKm5nSWY9XCIhX2Zvcm1TZXJ2aWNlLnN1Ym1pdExvY2tcIj48L25nLWNvbnRlbnQ+XG4gICAgICAgICAgICAgICAgPHNwYW4gKm5nSWY9XCJfZm9ybVNlcnZpY2Uuc3VibWl0TG9ja1wiPlN1Ym1pdHRpbmcgLi4uPC9zcGFuPlxuICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgIDwvZm9ybT5cbiAgICBgLFxuICAgIHN0eWxlczogW2BcbiAgICAgICAgLmEydC1mb3JtIHtcbiAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6IHdoaXRlO1xuICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogM3B4O1xuICAgICAgICAgICAgYm94LXNoYWRvdzogMHB4IDFweCA1cHggMCByZ2JhKDAsMCwwLDAuMyk7XG4gICAgICAgICAgICBwYWRkaW5nLXRvcDogMjBweDtcbiAgICAgICAgICAgIGZvbnQtZmFtaWx5OiBcIlNlZ29lIFVJXCIsIFwiSGVsdmV0aWNhIE5ldWVcIiwgQXJpYWwsIHNhbnMtc2VyaWY7XG4gICAgICAgIH1cblxuICAgICAgICAuYTJ0LWZvcm0gYnV0dG9uIHtcbiAgICAgICAgICAgIHdpZHRoOiAxMDAlO1xuXG4gICAgICAgICAgICB0cmFuc2l0aW9uOiAuM3M7XG4gICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjNzJjMzgwO1xuXG4gICAgICAgICAgICBib3JkZXItYm90dG9tLXJpZ2h0LXJhZGl1czogM3B4O1xuICAgICAgICAgICAgYm9yZGVyLWJvdHRvbS1sZWZ0LXJhZGl1czogM3B4O1xuXG4gICAgICAgICAgICBvdXRsaW5lOiBub25lO1xuICAgICAgICAgICAgdGV4dC1hbGlnbjogY2VudGVyO1xuICAgICAgICAgICAgZm9udC13ZWlnaHQ6IDQwMDtcbiAgICAgICAgICAgIGJvcmRlcjogbm9uZTtcbiAgICAgICAgICAgIGZvbnQtc2l6ZTogMTZweDtcbiAgICAgICAgICAgIGxpbmUtaGVpZ2h0OiAzMHB4O1xuXG4gICAgICAgICAgICB0ZXh0LXNoYWRvdzogMCAxcHggMnB4IHJnYmEoMCwgMCwgMCwgMC4yNSk7XG4gICAgICAgICAgICBjb2xvcjogd2hpdGU7XG4gICAgICAgICAgICBib3JkZXItYm90dG9tOiAzcHggc29saWQgdHJhbnNwYXJlbnQ7XG4gICAgICAgIH1cblxuICAgICAgICAuYTJ0LWZvcm0gYnV0dG9uOmRpc2FibGVkIHtcbiAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6ICNlZWUgIWltcG9ydGFudDtcbiAgICAgICAgICAgIGN1cnNvcjogbm90LWFsbG93ZWQ7XG4gICAgICAgICAgICBjb2xvcjogIzk5OTtcbiAgICAgICAgICAgIHRleHQtc2hhZG93OiBub25lO1xuICAgICAgICB9XG5cbiAgICAgICAgLmEydC1mb3JtIGJ1dHRvbjpob3ZlciB7XG4gICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjYTZkOWFlO1xuICAgICAgICB9XG4gICAgYF1cbn0pXG5cbmV4cG9ydCBjbGFzcyBBMnRGb3JtQ29tcG9uZW50IHtcbiAgICBjb25zdHJ1Y3RvcihwdWJsaWMgX2Zvcm1TZXJ2aWNlOiBBMnRGb3JtU2VydmljZSkgeyB9XG59XG4iLCJpbXBvcnQgeyBWYWxpZGF0b3JzIH0gZnJvbSAnQGFuZ3VsYXIvZm9ybXMnO1xuXG5leHBvcnQgY2xhc3MgQmFzZUZpZWxke1xuICAgIHZhbHVlOiBzdHJpbmc7XG4gICAga2V5OiBzdHJpbmc7XG4gICAgbGFiZWw6IHN0cmluZztcbiAgICB0eXBlOiBzdHJpbmc7XG4gICAgdmFsaWRhdG9yczogYW55W107XG5cbiAgICBjb25zdHJ1Y3RvcihvcHRpb25zOiB7XG4gICAgICAgIHZhbHVlPzogc3RyaW5nLFxuICAgICAgICBrZXk/OiBzdHJpbmcsXG4gICAgICAgIGxhYmVsPzogc3RyaW5nLFxuICAgICAgICB0eXBlPzogc3RyaW5nLFxuICAgICAgICB2YWxpZGF0b3JzPzogYW55W10sXG4gICAgfSA9IHt9KSB7XG4gICAgICAgIHRoaXMudmFsdWUgPSBvcHRpb25zLnZhbHVlO1xuICAgICAgICB0aGlzLmtleSA9IG9wdGlvbnMua2V5IHx8ICcnO1xuICAgICAgICB0aGlzLmxhYmVsID0gb3B0aW9ucy5sYWJlbCB8fCAnJztcbiAgICAgICAgdGhpcy52YWxpZGF0b3JzID0gb3B0aW9ucy52YWxpZGF0b3JzID09PSB1bmRlZmluZWQgPyBbXSA6IG9wdGlvbnMudmFsaWRhdG9ycztcbiAgICAgICAgdGhpcy50eXBlID0gb3B0aW9ucy50eXBlIHx8ICcnO1xuICAgIH1cbn1cblxuZXhwb3J0IGNvbnN0IFNJR05fSU5fRk9STTogQmFzZUZpZWxkW10gPSBbXG4gICAgbmV3IEJhc2VGaWVsZCh7XG4gICAgICAgIGtleTogJ2VtYWlsJyxcbiAgICAgICAgbGFiZWw6ICdFbWFpbCcsXG4gICAgICAgIHR5cGU6ICd0ZXh0JyxcbiAgICAgICAgdmFsaWRhdG9yczogW1xuICAgICAgICAgICAgVmFsaWRhdG9ycy5yZXF1aXJlZCxcbiAgICAgICAgICAgIFZhbGlkYXRvcnMubWluTGVuZ3RoKDgpXG4gICAgICAgIF1cbiAgICB9KSxcbiAgICBuZXcgQmFzZUZpZWxkKHtcbiAgICAgICAga2V5OiAncGFzc3dvcmQnLFxuICAgICAgICBsYWJlbDogJ1Bhc3N3b3JkJyxcbiAgICAgICAgdHlwZTogJ3Bhc3N3b3JkJyxcbiAgICAgICAgdmFsaWRhdG9yczogW1xuICAgICAgICAgICAgVmFsaWRhdG9ycy5yZXF1aXJlZCxcbiAgICAgICAgICAgIFZhbGlkYXRvcnMubWluTGVuZ3RoKDgpXG4gICAgICAgIF1cbiAgICB9KVxuXTtcblxuZXhwb3J0IGNvbnN0IFNJR05fVVBfRk9STTogQmFzZUZpZWxkW10gPSBbXG4gICAgbmV3IEJhc2VGaWVsZCh7XG4gICAgICAgIGtleTogJ2VtYWlsJyxcbiAgICAgICAgbGFiZWw6ICdFbWFpbCcsXG4gICAgICAgIHR5cGU6ICd0ZXh0JyxcbiAgICAgICAgdmFsaWRhdG9yczogW1xuICAgICAgICAgICAgVmFsaWRhdG9ycy5yZXF1aXJlZCxcbiAgICAgICAgICAgIFZhbGlkYXRvcnMubWluTGVuZ3RoKDgpXG4gICAgICAgIF1cbiAgICB9KSxcbiAgICBuZXcgQmFzZUZpZWxkKHtcbiAgICAgICAga2V5OiAncGFzc3dvcmQnLFxuICAgICAgICBsYWJlbDogJ1Bhc3N3b3JkJyxcbiAgICAgICAgdHlwZTogJ3Bhc3N3b3JkJyxcbiAgICAgICAgdmFsaWRhdG9yczogW1xuICAgICAgICAgICAgVmFsaWRhdG9ycy5yZXF1aXJlZCxcbiAgICAgICAgICAgIFZhbGlkYXRvcnMubWluTGVuZ3RoKDgpXG4gICAgICAgIF1cbiAgICB9KSxcbiAgICBuZXcgQmFzZUZpZWxkKHtcbiAgICAgICAga2V5OiAncGFzc3dvcmRDb25maXJtYXRpb24nLFxuICAgICAgICBsYWJlbDogJ1Bhc3N3b3JkIENvbmZpcm1hdGlvbicsXG4gICAgICAgIHR5cGU6ICdwYXNzd29yZCcsXG4gICAgICAgIHZhbGlkYXRvcnM6IFtcbiAgICAgICAgICAgIFZhbGlkYXRvcnMucmVxdWlyZWQsXG4gICAgICAgICAgICBWYWxpZGF0b3JzLm1pbkxlbmd0aCg4KVxuICAgICAgICBdXG4gICAgfSlcbl07XG5cbmV4cG9ydCBjb25zdCBSRVNFVF9QQVNTV09SRF9GT1JNOiBCYXNlRmllbGRbXSA9IFtcbiAgICBuZXcgQmFzZUZpZWxkKHtcbiAgICAgICAga2V5OiAnZW1haWwnLFxuICAgICAgICBsYWJlbDogJ0VtYWlsJyxcbiAgICAgICAgdHlwZTogJ3RleHQnLFxuICAgICAgICB2YWxpZGF0b3JzOiBbXG4gICAgICAgICAgICBWYWxpZGF0b3JzLnJlcXVpcmVkLFxuICAgICAgICAgICAgVmFsaWRhdG9ycy5taW5MZW5ndGgoOClcbiAgICAgICAgXVxuICAgIH0pXG5dO1xuXG5leHBvcnQgY29uc3QgVVBEQVRFX1BBU1NXT1JEX0ZPUk06IEJhc2VGaWVsZFtdID0gW1xuICAgIG5ldyBCYXNlRmllbGQoe1xuICAgICAgICBrZXk6ICdwYXNzd29yZCcsXG4gICAgICAgIGxhYmVsOiAnUGFzc3dvcmQnLFxuICAgICAgICB0eXBlOiAncGFzc3dvcmQnLFxuICAgICAgICB2YWxpZGF0b3JzOiBbXG4gICAgICAgICAgICBWYWxpZGF0b3JzLnJlcXVpcmVkLFxuICAgICAgICAgICAgVmFsaWRhdG9ycy5taW5MZW5ndGgoOClcbiAgICAgICAgXVxuICAgIH0pLFxuICAgIG5ldyBCYXNlRmllbGQoe1xuICAgICAgICBrZXk6ICdwYXNzd29yZENvbmZpcm1hdGlvbicsXG4gICAgICAgIGxhYmVsOiAnUGFzc3dvcmQgQ29uZmlybWF0aW9uJyxcbiAgICAgICAgdHlwZTogJ3Bhc3N3b3JkJyxcbiAgICAgICAgdmFsaWRhdG9yczogW1xuICAgICAgICAgICAgVmFsaWRhdG9ycy5yZXF1aXJlZCxcbiAgICAgICAgICAgIFZhbGlkYXRvcnMubWluTGVuZ3RoKDgpXG4gICAgICAgIF1cbiAgICB9KSxcbiAgICBuZXcgQmFzZUZpZWxkKHtcbiAgICAgICAga2V5OiAncGFzc3dvcmRDdXJyZW50JyxcbiAgICAgICAgbGFiZWw6ICdPbGQgUGFzc3dvcmQnLFxuICAgICAgICB0eXBlOiAncGFzc3dvcmQnLFxuICAgICAgICB2YWxpZGF0b3JzOiBbXG4gICAgICAgICAgICBWYWxpZGF0b3JzLnJlcXVpcmVkLFxuICAgICAgICAgICAgVmFsaWRhdG9ycy5taW5MZW5ndGgoOClcbiAgICAgICAgXVxuICAgIH0pXG5dOyIsImltcG9ydCB7IENvbXBvbmVudCwgSW5wdXQsIE9uSW5pdCB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgRm9ybUdyb3VwLCBBYnN0cmFjdENvbnRyb2wgfSBmcm9tICdAYW5ndWxhci9mb3Jtcyc7XG5cbmltcG9ydCB7IEJhc2VGaWVsZCB9IGZyb20gJy4uLy4uLy4uL2EydC11aS5mb3Jtcyc7XG5cbkBDb21wb25lbnQoe1xuICAgIHNlbGVjdG9yOiAgICdhMnQtZm9ybS1maWVsZCcsXG4gICAgdGVtcGxhdGU6IGBcbiAgICAgICAgPGRpdiBjbGFzcz1cImEydC1pbnB1dC1ncm91cFwiXG4gICAgICAgICAgICBbZm9ybUdyb3VwXT1cImZvcm1cIj5cblxuICAgICAgICAgICAgPGxhYmVsXG4gICAgICAgICAgICAgICAgW2F0dHIuZm9yXT1cInF1ZXN0aW9uLmtleVwiXG4gICAgICAgICAgICAgICAgKm5nSWY9XCJfY29udHJvbC5wcmlzdGluZVwiPlxuICAgICAgICAgICAgICAgIHt7cXVlc3Rpb24ubGFiZWx9fVxuICAgICAgICAgICAgPC9sYWJlbD5cblxuICAgICAgICAgICAgPGxhYmVsIGNsYXNzPVwiYTJ0LWVycm9yXCJcbiAgICAgICAgICAgICAgICBbYXR0ci5mb3JdPVwicXVlc3Rpb24ua2V5XCJcbiAgICAgICAgICAgICAgICAqbmdJZj1cIl9jb250cm9sLmhhc0Vycm9yKCdyZXF1aXJlZCcpICYmICFfY29udHJvbC5wcmlzdGluZVwiPlxuICAgICAgICAgICAgICAgIHt7cXVlc3Rpb24ubGFiZWx9fSBpcyByZXF1aXJlZFxuICAgICAgICAgICAgPC9sYWJlbD5cblxuICAgICAgICAgICAgPGxhYmVsIGNsYXNzPVwiYTJ0LWVycm9yXCJcbiAgICAgICAgICAgICAgICBbYXR0ci5mb3JdPVwicXVlc3Rpb24ua2V5XCJcbiAgICAgICAgICAgICAgICAqbmdJZj1cIl9jb250cm9sLmhhc0Vycm9yKCdtaW5sZW5ndGgnKVwiPlxuICAgICAgICAgICAgICAgIHt7cXVlc3Rpb24ubGFiZWx9fSBpcyB0b28gc2hvcnRcbiAgICAgICAgICAgIDwvbGFiZWw+XG5cbiAgICAgICAgICAgIDxsYWJlbCBjbGFzcz1cImEydC1lcnJvclwiXG4gICAgICAgICAgICAgICAgW2F0dHIuZm9yXT1cInF1ZXN0aW9uLmtleVwiXG4gICAgICAgICAgICAgICAgKm5nSWY9XCJfY29udHJvbC5oYXNFcnJvcignbWF4bGVuZ3RoJylcIj5cbiAgICAgICAgICAgICAgICB7e3F1ZXN0aW9uLmxhYmVsfX0gaXMgdG9vIGxvbmdcbiAgICAgICAgICAgIDwvbGFiZWw+XG5cbiAgICAgICAgICAgIDxsYWJlbCBjbGFzcz1cImEydC12YWxpZFwiXG4gICAgICAgICAgICAgICAgW2F0dHIuZm9yXT1cInF1ZXN0aW9uLmtleVwiXG4gICAgICAgICAgICAgICAgKm5nSWY9XCJfY29udHJvbC52YWxpZCAmJiAhX2NvbnRyb2wucHJpc3RpbmVcIj5cbiAgICAgICAgICAgICAgICB7e3F1ZXN0aW9uLmxhYmVsfX1cbiAgICAgICAgICAgIDwvbGFiZWw+XG5cbiAgICAgICAgICAgIDxpbnB1dFxuICAgICAgICAgICAgICAgIFtmb3JtQ29udHJvbE5hbWVdPVwicXVlc3Rpb24ua2V5XCJcbiAgICAgICAgICAgICAgICBbaWRdPVwicXVlc3Rpb24ua2V5XCJcbiAgICAgICAgICAgICAgICBbdHlwZV09XCJxdWVzdGlvbi50eXBlXCI+XG4gICAgICAgIDwvZGl2PlxuICAgIGAsXG4gICAgc3R5bGVzOiBbYFxuICAgICAgICAuYTJ0LWlucHV0LWdyb3VwIHtcbiAgICAgICAgICAgIHBhZGRpbmctYm90dG9tOiA0MHB4O1xuICAgICAgICAgICAgcGFkZGluZy1yaWdodDogMjBweDtcbiAgICAgICAgICAgIHBhZGRpbmctbGVmdDogMjBweDtcbiAgICAgICAgICAgIGZvbnQtZmFtaWx5OiBcIlNlZ29lIFVJXCIsIFwiSGVsdmV0aWNhIE5ldWVcIiwgQXJpYWwsIHNhbnMtc2VyaWY7XG4gICAgICAgIH1cblxuICAgICAgICAuYTJ0LWlucHV0LWdyb3VwIGlucHV0IHtcbiAgICAgICAgICAgIHdpZHRoOiAxMDAlO1xuICAgICAgICAgICAgb3V0bGluZTogbm9uZTtcbiAgICAgICAgICAgIGJvcmRlcjogbm9uZTtcbiAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6ICNlZWU7XG4gICAgICAgICAgICBsaW5lLWhlaWdodDogNDBweDtcblxuICAgICAgICAgICAgcGFkZGluZy1sZWZ0OiAxMHB4O1xuICAgICAgICAgICAgcGFkZGluZy1yaWdodDogMTBweDtcbiAgICAgICAgfVxuXG4gICAgICAgIC5hMnQtaW5wdXQtZ3JvdXAgbGFiZWwge1xuICAgICAgICAgICAgY29sb3I6ICM2NjY7XG4gICAgICAgICAgICBmb250LXdlaWdodDogNjAwO1xuICAgICAgICAgICAgZm9udC1zaXplOiAxM3B4O1xuICAgICAgICAgICAgbWFyZ2luLWJvdHRvbTogMDtcbiAgICAgICAgfVxuXG4gICAgICAgIC5hMnQtZXJyb3Ige1xuICAgICAgICAgICAgY29sb3I6ICNkZjY1NjQgIWltcG9ydGFudDtcbiAgICAgICAgfVxuXG4gICAgICAgIC5hMnQtdmFsaWQge1xuICAgICAgICAgICAgY29sb3I6ICM3MmMzODAgIWltcG9ydGFudDtcbiAgICAgICAgfVxuICAgIGBdXG59KVxuXG5leHBvcnQgY2xhc3MgQTJ0Rm9ybUZpZWxkQ29tcG9uZW50IGltcGxlbWVudHMgT25Jbml0IHtcblxuICAgIEBJbnB1dCgpIHF1ZXN0aW9uOiAgQmFzZUZpZWxkO1xuICAgIEBJbnB1dCgpIGZvcm06ICAgICAgRm9ybUdyb3VwO1xuXG4gICAgX2NvbnRyb2w6ICAgQWJzdHJhY3RDb250cm9sO1xuXG4gICAgbmdPbkluaXQoKSB7XG4gICAgICAgIHRoaXMuX2NvbnRyb2wgPSB0aGlzLmZvcm0uY29udHJvbHNbdGhpcy5xdWVzdGlvbi5rZXldO1xuICAgIH1cblxuICAgIGdldCBpc1ZhbGlkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fY29udHJvbC52YWxpZDtcbiAgICB9XG59XG4iLCJpbXBvcnQgeyBDb21wb25lbnQsIElucHV0IH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5cbkBDb21wb25lbnQoe1xuICAgIHNlbGVjdG9yOiAgICdhMnQtbGlua3MnLFxuICAgIHRlbXBsYXRlOiBgXG4gICAgICAgIDxkaXYgY2xhc3M9XCJhMnQtd3JhcHBlclwiPlxuICAgICAgICAgICAgPHA+PGEgcm91dGVyTGluaz1cIi9zZXNzaW9uL3Jlc2V0LXBhc3N3b3JkXCIgKm5nSWY9XCJjYXNlICE9ICdyZXNldC1wYXNzd29yZCdcIj5Gb3Jnb3QgUGFzc3dvcmQ/PC9hPjwvcD5cbiAgICAgICAgICAgIDxwPjxhIHJvdXRlckxpbms9XCIvc2Vzc2lvbi9zaWduLXVwXCIgKm5nSWY9XCJjYXNlICE9ICdzaWduLXVwJ1wiPlNpZ24gVXA8L2E+PC9wPlxuICAgICAgICAgICAgPHA+PGEgcm91dGVyTGluaz1cIi9zZXNzaW9uL3NpZ24taW5cIiAqbmdJZj1cImNhc2UgIT0gJ3NpZ24taW4nXCI+U2lnbiBJbjwvYT48L3A+XG4gICAgICAgIDwvZGl2PlxuICAgIGAsXG4gICAgc3R5bGVzOiBbYFxuICAgICAgICAuYTJ0LXdyYXBwZXIge1xuICAgICAgICAgICAgbWFyZ2luLXRvcDogMjBweDtcbiAgICAgICAgfVxuXG4gICAgICAgIHAge1xuICAgICAgICAgICAgbWFyZ2luLWJvdHRvbTogMDtcbiAgICAgICAgfVxuXG4gICAgICAgIGEge1xuICAgICAgICAgICAgY29sb3I6ICNlZWUgIWltcG9ydGFudDtcbiAgICAgICAgICAgIHRyYW5zaXRpb246IC4zcztcbiAgICAgICAgICAgIHRleHQtZGVjb3JhdGlvbjogbm9uZTtcbiAgICAgICAgICAgIGZvbnQtc2l6ZTogMTVweDtcbiAgICAgICAgICAgIGZvbnQtd2VpZ2h0OiAzMDA7XG4gICAgICAgICAgICBmb250LWZhbWlseTogXCJTZWdvZSBVSVwiLCBcIkhlbHZldGljYSBOZXVlXCIsIEFyaWFsLCBzYW5zLXNlcmlmO1xuICAgICAgICB9XG5cbiAgICAgICAgYTpob3ZlciB7XG4gICAgICAgICAgICBjb2xvcjogd2hpdGU7XG4gICAgICAgIH1cbiAgICBgXVxufSlcbmV4cG9ydCBjbGFzcyBBMnRMaW5rc0NvbXBvbmVudCB7XG5cbiAgICBASW5wdXQoKSBjYXNlOiBzdHJpbmc7XG5cbiAgICBjb25zdHJ1Y3RvcigpIHsgfVxufSIsImltcG9ydCB7IENvbXBvbmVudCwgSW5wdXQgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcblxuQENvbXBvbmVudCh7XG4gICAgc2VsZWN0b3I6ICAgJ2EydC1lcnJvcicsXG4gICAgdGVtcGxhdGU6ICAgJzxkaXYgKm5nRm9yPVwibGV0IGVycm9yIG9mIGVycm9yc1wiPjxwPnt7ZXJyb3J9fTwvcD48L2Rpdj4nLFxuICAgIHN0eWxlczogW2BcbiAgICAgICAgZGl2IHtcbiAgICAgICAgICAgIHdpZHRoOiAxMDAlO1xuICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogI2RmNjU2NDtcbiAgICAgICAgICAgIGNvbG9yOiB3aGl0ZTtcbiAgICAgICAgICAgIGZvbnQtd2VpZ2h0OiAzMDA7XG4gICAgICAgICAgICBmb250LXNpemU6IDE1cHg7XG4gICAgICAgICAgICBwYWRkaW5nOiAxMHB4IDIwcHg7XG4gICAgICAgICAgICBib3JkZXItcmFkaXVzOiAzcHg7XG4gICAgICAgICAgICBtYXJnaW4tYm90dG9tOiAxNXB4O1xuICAgICAgICB9XG5cbiAgICAgICAgZGl2ID4gcCB7XG4gICAgICAgICAgICBtYXJnaW4tYm90dG9tOiAwO1xuICAgICAgICB9XG4gICAgYF1cbn0pXG5leHBvcnQgY2xhc3MgQTJ0RXJyb3JDb21wb25lbnQge1xuXG4gICAgQElucHV0KCkgZXJyb3JzOiBzdHJpbmdbXTtcblxuICAgIGNvbnN0cnVjdG9yKCkgeyB9XG59IiwiaW1wb3J0IHsgQ29tcG9uZW50IH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5cbkBDb21wb25lbnQoe1xuICAgIHNlbGVjdG9yOiAgICdhMnQtaGVhZGxpbmUnLFxuICAgIHRlbXBsYXRlOiAgICc8cD48bmctY29udGVudD48L25nLWNvbnRlbnQ+PC9wPicsXG4gICAgc3R5bGVzOiAgW2BcbiAgICAgICAgcCB7XG4gICAgICAgICAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XG4gICAgICAgICAgICBjb2xvcjogd2hpdGU7XG4gICAgICAgICAgICBmb250LXNpemU6IDMwcHg7XG4gICAgICAgIH1cbiAgICBgXVxufSlcbmV4cG9ydCBjbGFzcyBBMnRIZWFkbGluZUNvbXBvbmVudCB7XG4gICAgY29uc3RydWN0b3IoKSB7IH1cbn0iLCJpbXBvcnQgeyBOZ01vZHVsZSB9ICAgICBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7IFJlYWN0aXZlRm9ybXNNb2R1bGUgfSAgZnJvbSAnQGFuZ3VsYXIvZm9ybXMnO1xuaW1wb3J0IHsgQ29tbW9uTW9kdWxlIH0gZnJvbSAnQGFuZ3VsYXIvY29tbW9uJztcbmltcG9ydCB7IFJvdXRlck1vZHVsZSB9IGZyb20gJ0Bhbmd1bGFyL3JvdXRlcic7XG5cbmltcG9ydCB7IEEydEZvcm1Db21wb25lbnQgfSBmcm9tICcuL2EydC1mb3JtL2EydC1mb3JtLmNvbXBvbmVudCc7XG5pbXBvcnQgeyBBMnRGb3JtRmllbGRDb21wb25lbnQgfSBmcm9tICcuL2EydC1mb3JtL2EydC1mb3JtLWZpZWxkL2EydC1mb3JtLWZpZWxkLmNvbXBvbmVudCc7XG5pbXBvcnQgeyBBMnRMaW5rc0NvbXBvbmVudCB9IGZyb20gJy4vYTJ0LWxpbmtzL2EydC1saW5rcy5jb21wb25lbnQnO1xuaW1wb3J0IHsgQTJ0RXJyb3JDb21wb25lbnQgfSBmcm9tICcuL2EydC1lcnJvci9hMnQtZXJyb3IuY29tcG9uZW50JztcbmltcG9ydCB7IEEydEhlYWRsaW5lQ29tcG9uZW50IH0gZnJvbSAnLi9hMnQtaGVhZGxpbmUvYTJ0LWhlYWRsaW5lLmNvbXBvbmVudCc7XG5cbkBOZ01vZHVsZSh7XG4gICAgaW1wb3J0czogW1xuICAgICAgICBDb21tb25Nb2R1bGUsXG4gICAgICAgIFJlYWN0aXZlRm9ybXNNb2R1bGUsXG4gICAgICAgIFJvdXRlck1vZHVsZVxuICAgIF0sXG4gICAgZGVjbGFyYXRpb25zOiBbXG4gICAgICAgIEEydEZvcm1GaWVsZENvbXBvbmVudCxcbiAgICAgICAgQTJ0Rm9ybUNvbXBvbmVudCxcbiAgICAgICAgQTJ0TGlua3NDb21wb25lbnQsXG4gICAgICAgIEEydEVycm9yQ29tcG9uZW50LFxuICAgICAgICBBMnRIZWFkbGluZUNvbXBvbmVudFxuICAgIF0sXG4gICAgZXhwb3J0czogW1xuICAgICAgICBBMnRGb3JtQ29tcG9uZW50LFxuICAgICAgICBBMnRMaW5rc0NvbXBvbmVudCxcbiAgICAgICAgQTJ0RXJyb3JDb21wb25lbnQsXG4gICAgICAgIEEydEhlYWRsaW5lQ29tcG9uZW50XG4gICAgXVxufSlcbmV4cG9ydCBjbGFzcyBBMnRTaGFyZWRNb2R1bGUgeyB9XG4iLCJpbXBvcnQgeyBJbmplY3RhYmxlLCBPcHRpb25hbCB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgQWN0aXZhdGVkUm91dGUsIFJvdXRlciwgQ2FuQWN0aXZhdGUgfSBmcm9tICdAYW5ndWxhci9yb3V0ZXInO1xuaW1wb3J0IHtcbiAgICBIdHRwLFxuICAgIFJlc3BvbnNlLFxuICAgIEhlYWRlcnMsXG4gICAgUmVxdWVzdCxcbiAgICBSZXF1ZXN0TWV0aG9kLFxuICAgIFJlcXVlc3RPcHRpb25zLFxuICAgIFJlcXVlc3RPcHRpb25zQXJnc1xufSBmcm9tICdAYW5ndWxhci9odHRwJztcblxuaW1wb3J0IHsgT2JzZXJ2YWJsZSwgaW50ZXJ2YWwsIGZyb21FdmVudCB9IGZyb20gJ3J4anMnO1xuaW1wb3J0IHsgc2hhcmUsIHBsdWNrLCBmaWx0ZXIgfSBmcm9tICdyeGpzL29wZXJhdG9ycyc7XG5cbmltcG9ydCB7XG4gICAgU2lnbkluRGF0YSxcbiAgICBSZWdpc3RlckRhdGEsXG4gICAgVXBkYXRlUGFzc3dvcmREYXRhLFxuICAgIFJlc2V0UGFzc3dvcmREYXRhLFxuXG4gICAgVXNlclR5cGUsXG4gICAgVXNlckRhdGEsXG4gICAgQXV0aERhdGEsXG5cbiAgICBBbmd1bGFyMlRva2VuT3B0aW9uc1xufSBmcm9tICcuL2FuZ3VsYXIyLXRva2VuLm1vZGVsJztcblxuQEluamVjdGFibGUoKVxuZXhwb3J0IGNsYXNzIEFuZ3VsYXIyVG9rZW5TZXJ2aWNlIGltcGxlbWVudHMgQ2FuQWN0aXZhdGUge1xuXG4gICAgZ2V0IGN1cnJlbnRVc2VyVHlwZSgpOiBzdHJpbmcge1xuICAgICAgICBpZiAodGhpcy5hdEN1cnJlbnRVc2VyVHlwZSAhPSBudWxsKVxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuYXRDdXJyZW50VXNlclR5cGUubmFtZTtcbiAgICAgICAgZWxzZVxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgZ2V0IGN1cnJlbnRVc2VyRGF0YSgpOiBVc2VyRGF0YSB7XG4gICAgICAgIHJldHVybiB0aGlzLmF0Q3VycmVudFVzZXJEYXRhO1xuICAgIH1cblxuICAgIGdldCBjdXJyZW50QXV0aERhdGEoKTogQXV0aERhdGEge1xuICAgICAgICByZXR1cm4gdGhpcy5hdEN1cnJlbnRBdXRoRGF0YTtcbiAgICB9XG5cbiAgICBnZXQgY3VycmVudEF1dGhIZWFkZXJzKCk6IEhlYWRlcnMge1xuICAgICAgICBpZiAodGhpcy5hdEN1cnJlbnRBdXRoRGF0YSAhPSBudWxsKSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IEhlYWRlcnMoe1xuICAgICAgICAgICAgICAgICdhY2Nlc3MtdG9rZW4nOiB0aGlzLmF0Q3VycmVudEF1dGhEYXRhLmFjY2Vzc1Rva2VuLFxuICAgICAgICAgICAgICAgICdjbGllbnQnOiAgICAgICB0aGlzLmF0Q3VycmVudEF1dGhEYXRhLmNsaWVudCxcbiAgICAgICAgICAgICAgICAnZXhwaXJ5JzogICAgICAgdGhpcy5hdEN1cnJlbnRBdXRoRGF0YS5leHBpcnksXG4gICAgICAgICAgICAgICAgJ3Rva2VuLXR5cGUnOiAgIHRoaXMuYXRDdXJyZW50QXV0aERhdGEudG9rZW5UeXBlLFxuICAgICAgICAgICAgICAgICd1aWQnOiAgICAgICAgICB0aGlzLmF0Q3VycmVudEF1dGhEYXRhLnVpZFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gbmV3IEhlYWRlcnM7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBhdE9wdGlvbnM6IEFuZ3VsYXIyVG9rZW5PcHRpb25zO1xuICAgIHByaXZhdGUgYXRDdXJyZW50VXNlclR5cGU6IFVzZXJUeXBlO1xuICAgIHByaXZhdGUgYXRDdXJyZW50QXV0aERhdGE6IEF1dGhEYXRhO1xuICAgIHByaXZhdGUgYXRDdXJyZW50VXNlckRhdGE6IFVzZXJEYXRhO1xuXG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIHByaXZhdGUgaHR0cDogSHR0cCxcbiAgICAgICAgQE9wdGlvbmFsKCkgcHJpdmF0ZSBhY3RpdmF0ZWRSb3V0ZTogQWN0aXZhdGVkUm91dGUsXG4gICAgICAgIEBPcHRpb25hbCgpIHByaXZhdGUgcm91dGVyOiBSb3V0ZXJcbiAgICApIHsgfVxuXG4gICAgdXNlclNpZ25lZEluKCk6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gISF0aGlzLmF0Q3VycmVudEF1dGhEYXRhO1xuICAgIH1cblxuICAgIGNhbkFjdGl2YXRlKCk6IGJvb2xlYW4ge1xuICAgICAgICBpZiAodGhpcy51c2VyU2lnbmVkSW4oKSlcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIC8vIFN0b3JlIGN1cnJlbnQgbG9jYXRpb24gaW4gc3RvcmFnZSAodXNlZnVsbCBmb3IgcmVkaXJlY3Rpb24gYWZ0ZXIgc2lnbmluZyBpbilcbiAgICAgICAgICAgIGlmICh0aGlzLmF0T3B0aW9ucy5zaWduSW5TdG9yZWRVcmxTdG9yYWdlS2V5KSB7XG4gICAgICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYXRPcHRpb25zLnNpZ25JblN0b3JlZFVybFN0b3JhZ2VLZXksXG4gICAgICAgICAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5wYXRobmFtZSArIHdpbmRvdy5sb2NhdGlvbi5zZWFyY2hcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBSZWRpcmVjdCB1c2VyIHRvIHNpZ24gaW4gaWYgc2lnbkluUmVkaXJlY3QgaXMgc2V0XG4gICAgICAgICAgICBpZih0aGlzLnJvdXRlciAmJiB0aGlzLmF0T3B0aW9ucy5zaWduSW5SZWRpcmVjdClcbiAgICAgICAgICAgICAgICB0aGlzLnJvdXRlci5uYXZpZ2F0ZShbdGhpcy5hdE9wdGlvbnMuc2lnbkluUmVkaXJlY3RdKTtcblxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLy8gSW5pdGFsIGNvbmZpZ3VyYXRpb25cbiAgICBpbml0KG9wdGlvbnM/OiBBbmd1bGFyMlRva2VuT3B0aW9ucykge1xuXG4gICAgICAgIGxldCBkZWZhdWx0T3B0aW9uczogQW5ndWxhcjJUb2tlbk9wdGlvbnMgPSB7XG4gICAgICAgICAgICBhcGlQYXRoOiAgICAgICAgICAgICAgICAgICAgbnVsbCxcbiAgICAgICAgICAgIGFwaUJhc2U6ICAgICAgICAgICAgICAgICAgICBudWxsLFxuXG4gICAgICAgICAgICBzaWduSW5QYXRoOiAgICAgICAgICAgICAgICAgJ2F1dGgvc2lnbl9pbicsXG4gICAgICAgICAgICBzaWduSW5SZWRpcmVjdDogICAgICAgICAgICAgbnVsbCxcbiAgICAgICAgICAgIHNpZ25JblN0b3JlZFVybFN0b3JhZ2VLZXk6ICBudWxsLFxuXG4gICAgICAgICAgICBzaWduT3V0UGF0aDogICAgICAgICAgICAgICAgJ2F1dGgvc2lnbl9vdXQnLFxuICAgICAgICAgICAgdmFsaWRhdGVUb2tlblBhdGg6ICAgICAgICAgICdhdXRoL3ZhbGlkYXRlX3Rva2VuJyxcbiAgICAgICAgICAgIHNpZ25PdXRGYWlsZWRWYWxpZGF0ZTogICAgICBmYWxzZSxcblxuICAgICAgICAgICAgcmVnaXN0ZXJBY2NvdW50UGF0aDogICAgICAgICdhdXRoJyxcbiAgICAgICAgICAgIGRlbGV0ZUFjY291bnRQYXRoOiAgICAgICAgICAnYXV0aCcsXG4gICAgICAgICAgICByZWdpc3RlckFjY291bnRDYWxsYmFjazogICAgd2luZG93LmxvY2F0aW9uLmhyZWYsXG5cbiAgICAgICAgICAgIHVwZGF0ZVBhc3N3b3JkUGF0aDogICAgICAgICAnYXV0aCcsXG5cbiAgICAgICAgICAgIHJlc2V0UGFzc3dvcmRQYXRoOiAgICAgICAgICAnYXV0aC9wYXNzd29yZCcsXG4gICAgICAgICAgICByZXNldFBhc3N3b3JkQ2FsbGJhY2s6ICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYsXG5cbiAgICAgICAgICAgIHVzZXJUeXBlczogICAgICAgICAgICAgICAgICBudWxsLFxuXG4gICAgICAgICAgICBvQXV0aEJhc2U6ICAgICAgICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLm9yaWdpbixcbiAgICAgICAgICAgIG9BdXRoUGF0aHM6IHtcbiAgICAgICAgICAgICAgICBnaXRodWI6ICAgICAgICAgICAgICAgICAnYXV0aC9naXRodWInXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgb0F1dGhDYWxsYmFja1BhdGg6ICAgICAgICAgICdvYXV0aF9jYWxsYmFjaycsXG4gICAgICAgICAgICBvQXV0aFdpbmRvd1R5cGU6ICAgICAgICAgICAgJ25ld1dpbmRvdycsXG4gICAgICAgICAgICBvQXV0aFdpbmRvd09wdGlvbnM6ICAgICAgICAgbnVsbCxcblxuICAgICAgICAgICAgZ2xvYmFsT3B0aW9uczoge1xuICAgICAgICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgICAgICAgICAgICAgJ0FjY2VwdCc6ICAgICAgICdhcHBsaWNhdGlvbi9qc29uJ1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICB0aGlzLmF0T3B0aW9ucyA9ICg8YW55Pk9iamVjdCkuYXNzaWduKGRlZmF1bHRPcHRpb25zLCBvcHRpb25zKTtcblxuICAgICAgICB0aGlzLnRyeUxvYWRBdXRoRGF0YSgpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqXG4gICAgICogQWN0aW9uc1xuICAgICAqXG4gICAgICovXG5cbiAgICAvLyBSZWdpc3RlciByZXF1ZXN0XG4gICAgcmVnaXN0ZXJBY2NvdW50KHJlZ2lzdGVyRGF0YTogUmVnaXN0ZXJEYXRhKTogT2JzZXJ2YWJsZTxSZXNwb25zZT4ge1xuXG4gICAgICAgIGlmIChyZWdpc3RlckRhdGEudXNlclR5cGUgPT0gbnVsbClcbiAgICAgICAgICAgIHRoaXMuYXRDdXJyZW50VXNlclR5cGUgPSBudWxsO1xuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuYXRDdXJyZW50VXNlclR5cGUgPSB0aGlzLmdldFVzZXJUeXBlQnlOYW1lKHJlZ2lzdGVyRGF0YS51c2VyVHlwZSk7XG4gICAgICAgICAgICBkZWxldGUgcmVnaXN0ZXJEYXRhLnVzZXJUeXBlO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKFxuICAgICAgICAgICAgcmVnaXN0ZXJEYXRhLnBhc3N3b3JkX2NvbmZpcm1hdGlvbiA9PSBudWxsICYmIFxuICAgICAgICAgICAgcmVnaXN0ZXJEYXRhLnBhc3N3b3JkQ29uZmlybWF0aW9uICE9IG51bGxcbiAgICAgICAgKSB7XG4gICAgICAgICAgICByZWdpc3RlckRhdGEucGFzc3dvcmRfY29uZmlybWF0aW9uICA9IHJlZ2lzdGVyRGF0YS5wYXNzd29yZENvbmZpcm1hdGlvbjtcbiAgICAgICAgICAgIGRlbGV0ZSByZWdpc3RlckRhdGEucGFzc3dvcmRDb25maXJtYXRpb247XG4gICAgICAgIH1cblxuICAgICAgICByZWdpc3RlckRhdGEuY29uZmlybV9zdWNjZXNzX3VybCAgICA9IHRoaXMuYXRPcHRpb25zLnJlZ2lzdGVyQWNjb3VudENhbGxiYWNrO1xuXG4gICAgICAgIHJldHVybiB0aGlzLnBvc3QodGhpcy5nZXRVc2VyUGF0aCgpICsgdGhpcy5hdE9wdGlvbnMucmVnaXN0ZXJBY2NvdW50UGF0aCwgSlNPTi5zdHJpbmdpZnkocmVnaXN0ZXJEYXRhKSk7XG4gICAgfVxuXG4gICAgLy8gRGVsZXRlIEFjY291bnRcbiAgICBkZWxldGVBY2NvdW50KCk6IE9ic2VydmFibGU8UmVzcG9uc2U+IHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZGVsZXRlKHRoaXMuZ2V0VXNlclBhdGgoKSArIHRoaXMuYXRPcHRpb25zLmRlbGV0ZUFjY291bnRQYXRoKTtcbiAgICB9XG5cbiAgICAvLyBTaWduIGluIHJlcXVlc3QgYW5kIHNldCBzdG9yYWdlXG4gICAgc2lnbkluKHNpZ25JbkRhdGE6IFNpZ25JbkRhdGEpOiBPYnNlcnZhYmxlPFJlc3BvbnNlPiB7XG5cbiAgICAgICAgaWYgKHNpZ25JbkRhdGEudXNlclR5cGUgPT0gbnVsbClcbiAgICAgICAgICAgIHRoaXMuYXRDdXJyZW50VXNlclR5cGUgPSBudWxsO1xuICAgICAgICBlbHNlXG4gICAgICAgICAgICB0aGlzLmF0Q3VycmVudFVzZXJUeXBlID0gdGhpcy5nZXRVc2VyVHlwZUJ5TmFtZShzaWduSW5EYXRhLnVzZXJUeXBlKTtcblxuICAgICAgICBsZXQgYm9keSA9IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICAgIGVtYWlsOiAgICAgIHNpZ25JbkRhdGEuZW1haWwsXG4gICAgICAgICAgICBwYXNzd29yZDogICBzaWduSW5EYXRhLnBhc3N3b3JkXG4gICAgICAgIH0pO1xuXG4gICAgICAgIGxldCBvYnNlcnYgPSB0aGlzLnBvc3QodGhpcy5nZXRVc2VyUGF0aCgpICsgdGhpcy5hdE9wdGlvbnMuc2lnbkluUGF0aCwgYm9keSk7XG5cbiAgICAgICAgb2JzZXJ2LnN1YnNjcmliZShyZXMgPT4gdGhpcy5hdEN1cnJlbnRVc2VyRGF0YSA9IHJlcy5qc29uKCkuZGF0YSwgX2Vycm9yID0+IG51bGwpO1xuXG4gICAgICAgIHJldHVybiBvYnNlcnY7XG4gICAgfVxuXG4gICAgc2lnbkluT0F1dGgob0F1dGhUeXBlOiBzdHJpbmcpIHtcblxuICAgICAgICBsZXQgb0F1dGhQYXRoOiBzdHJpbmcgPSB0aGlzLmdldE9BdXRoUGF0aChvQXV0aFR5cGUpO1xuICAgICAgICBsZXQgY2FsbGJhY2tVcmw6IHN0cmluZyA9IGAke3dpbmRvdy5sb2NhdGlvbi5vcmlnaW59LyR7dGhpcy5hdE9wdGlvbnMub0F1dGhDYWxsYmFja1BhdGh9YDtcbiAgICAgICAgbGV0IG9BdXRoV2luZG93VHlwZTogc3RyaW5nID0gdGhpcy5hdE9wdGlvbnMub0F1dGhXaW5kb3dUeXBlO1xuICAgICAgICBsZXQgYXV0aFVybDogc3RyaW5nID0gdGhpcy5nZXRPQXV0aFVybChvQXV0aFBhdGgsIGNhbGxiYWNrVXJsLCBvQXV0aFdpbmRvd1R5cGUpO1xuXG4gICAgICAgIGlmIChvQXV0aFdpbmRvd1R5cGUgPT0gJ25ld1dpbmRvdycpIHtcbiAgICAgICAgICAgIGxldCBvQXV0aFdpbmRvd09wdGlvbnMgPSB0aGlzLmF0T3B0aW9ucy5vQXV0aFdpbmRvd09wdGlvbnM7XG4gICAgICAgICAgICBsZXQgd2luZG93T3B0aW9ucyA9ICcnO1xuXG4gICAgICAgICAgICBpZiAob0F1dGhXaW5kb3dPcHRpb25zKSB7XG4gICAgICAgICAgICAgICAgZm9yIChsZXQga2V5IGluIG9BdXRoV2luZG93T3B0aW9ucykge1xuICAgICAgICAgICAgICAgICAgICB3aW5kb3dPcHRpb25zICs9IGAsJHtrZXl9PSR7b0F1dGhXaW5kb3dPcHRpb25zW2tleV19YDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGxldCBwb3B1cCA9IHdpbmRvdy5vcGVuKFxuICAgICAgICAgICAgICAgIGF1dGhVcmwsXG4gICAgICAgICAgICAgICAgJ19ibGFuaycsXG4gICAgICAgICAgICAgICAgYGNsb3NlYnV0dG9uY2FwdGlvbj1DYW5jZWwke3dpbmRvd09wdGlvbnN9YFxuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnJlcXVlc3RDcmVkZW50aWFsc1ZpYVBvc3RNZXNzYWdlKHBvcHVwKTtcbiAgICAgICAgfSBlbHNlIGlmIChvQXV0aFdpbmRvd1R5cGUgPT0gJ3NhbWVXaW5kb3cnKSB7XG4gICAgICAgICAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9IGF1dGhVcmw7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aHJvdyBgVW5zdXBwb3J0ZWQgb0F1dGhXaW5kb3dUeXBlIFwiJHtvQXV0aFdpbmRvd1R5cGV9XCJgO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJvY2Vzc09BdXRoQ2FsbGJhY2soKTogdm9pZCB7XG4gICAgICAgIHRoaXMuZ2V0QXV0aERhdGFGcm9tUGFyYW1zKCk7XG4gICAgfVxuXG4gICAgLy8gU2lnbiBvdXQgcmVxdWVzdCBhbmQgZGVsZXRlIHN0b3JhZ2VcbiAgICBzaWduT3V0KCk6IE9ic2VydmFibGU8UmVzcG9uc2U+IHtcbiAgICAgICAgbGV0IG9ic2VydiA9IHRoaXMuZGVsZXRlKHRoaXMuZ2V0VXNlclBhdGgoKSArIHRoaXMuYXRPcHRpb25zLnNpZ25PdXRQYXRoKTtcblxuICAgICAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSgnYWNjZXNzVG9rZW4nKTtcbiAgICAgICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oJ2NsaWVudCcpO1xuICAgICAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSgnZXhwaXJ5Jyk7XG4gICAgICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKCd0b2tlblR5cGUnKTtcbiAgICAgICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oJ3VpZCcpO1xuXG4gICAgICAgIHRoaXMuYXRDdXJyZW50QXV0aERhdGEgPSBudWxsO1xuICAgICAgICB0aGlzLmF0Q3VycmVudFVzZXJUeXBlID0gbnVsbDtcbiAgICAgICAgdGhpcy5hdEN1cnJlbnRVc2VyRGF0YSA9IG51bGw7XG5cbiAgICAgICAgcmV0dXJuIG9ic2VydjtcbiAgICB9XG5cbiAgICAvLyBWYWxpZGF0ZSB0b2tlbiByZXF1ZXN0XG4gICAgdmFsaWRhdGVUb2tlbigpOiBPYnNlcnZhYmxlPFJlc3BvbnNlPiB7XG4gICAgICAgIGxldCBvYnNlcnYgPSB0aGlzLmdldCh0aGlzLmdldFVzZXJQYXRoKCkgKyB0aGlzLmF0T3B0aW9ucy52YWxpZGF0ZVRva2VuUGF0aCk7XG5cbiAgICAgICAgb2JzZXJ2LnN1YnNjcmliZShcbiAgICAgICAgICAgIHJlcyA9PiB0aGlzLmF0Q3VycmVudFVzZXJEYXRhID0gcmVzLmpzb24oKS5kYXRhLFxuICAgICAgICAgICAgZXJyb3IgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChlcnJvci5zdGF0dXMgPT09IDQwMSAmJiB0aGlzLmF0T3B0aW9ucy5zaWduT3V0RmFpbGVkVmFsaWRhdGUpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zaWduT3V0KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgcmV0dXJuIG9ic2VydjtcbiAgICB9XG5cbiAgICAvLyBVcGRhdGUgcGFzc3dvcmQgcmVxdWVzdFxuICAgIHVwZGF0ZVBhc3N3b3JkKHVwZGF0ZVBhc3N3b3JkRGF0YTogVXBkYXRlUGFzc3dvcmREYXRhKTogT2JzZXJ2YWJsZTxSZXNwb25zZT4ge1xuXG4gICAgICAgIGlmICh1cGRhdGVQYXNzd29yZERhdGEudXNlclR5cGUgIT0gbnVsbClcbiAgICAgICAgICAgIHRoaXMuYXRDdXJyZW50VXNlclR5cGUgPSB0aGlzLmdldFVzZXJUeXBlQnlOYW1lKHVwZGF0ZVBhc3N3b3JkRGF0YS51c2VyVHlwZSk7XG5cbiAgICAgICAgbGV0IGFyZ3M6IGFueTtcblxuICAgICAgICBpZiAodXBkYXRlUGFzc3dvcmREYXRhLnBhc3N3b3JkQ3VycmVudCA9PSBudWxsKSB7XG4gICAgICAgICAgICBhcmdzID0ge1xuICAgICAgICAgICAgICAgIHBhc3N3b3JkOiAgICAgICAgICAgICAgIHVwZGF0ZVBhc3N3b3JkRGF0YS5wYXNzd29yZCxcbiAgICAgICAgICAgICAgICBwYXNzd29yZF9jb25maXJtYXRpb246ICB1cGRhdGVQYXNzd29yZERhdGEucGFzc3dvcmRDb25maXJtYXRpb25cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGFyZ3MgPSB7XG4gICAgICAgICAgICAgICAgY3VycmVudF9wYXNzd29yZDogICAgICAgdXBkYXRlUGFzc3dvcmREYXRhLnBhc3N3b3JkQ3VycmVudCxcbiAgICAgICAgICAgICAgICBwYXNzd29yZDogICAgICAgICAgICAgICB1cGRhdGVQYXNzd29yZERhdGEucGFzc3dvcmQsXG4gICAgICAgICAgICAgICAgcGFzc3dvcmRfY29uZmlybWF0aW9uOiAgdXBkYXRlUGFzc3dvcmREYXRhLnBhc3N3b3JkQ29uZmlybWF0aW9uXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHVwZGF0ZVBhc3N3b3JkRGF0YS5yZXNldFBhc3N3b3JkVG9rZW4pIHtcbiAgICAgICAgICAgIGFyZ3MucmVzZXRfcGFzc3dvcmRfdG9rZW4gPSB1cGRhdGVQYXNzd29yZERhdGEucmVzZXRQYXNzd29yZFRva2VuO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGJvZHkgPSBKU09OLnN0cmluZ2lmeShhcmdzKTtcbiAgICAgICAgcmV0dXJuIHRoaXMucHV0KHRoaXMuZ2V0VXNlclBhdGgoKSArIHRoaXMuYXRPcHRpb25zLnVwZGF0ZVBhc3N3b3JkUGF0aCwgYm9keSk7XG4gICAgfVxuXG4gICAgLy8gUmVzZXQgcGFzc3dvcmQgcmVxdWVzdFxuICAgIHJlc2V0UGFzc3dvcmQocmVzZXRQYXNzd29yZERhdGE6IFJlc2V0UGFzc3dvcmREYXRhKTogT2JzZXJ2YWJsZTxSZXNwb25zZT4ge1xuXG4gICAgICAgIGlmIChyZXNldFBhc3N3b3JkRGF0YS51c2VyVHlwZSA9PSBudWxsKVxuICAgICAgICAgICAgdGhpcy5hdEN1cnJlbnRVc2VyVHlwZSA9IG51bGw7XG4gICAgICAgIGVsc2VcbiAgICAgICAgICAgIHRoaXMuYXRDdXJyZW50VXNlclR5cGUgPSB0aGlzLmdldFVzZXJUeXBlQnlOYW1lKHJlc2V0UGFzc3dvcmREYXRhLnVzZXJUeXBlKTtcblxuICAgICAgICBsZXQgYm9keSA9IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICAgIGVtYWlsOiAgICAgICAgICByZXNldFBhc3N3b3JkRGF0YS5lbWFpbCxcbiAgICAgICAgICAgIHJlZGlyZWN0X3VybDogICB0aGlzLmF0T3B0aW9ucy5yZXNldFBhc3N3b3JkQ2FsbGJhY2tcbiAgICAgICAgfSk7XG5cbiAgICAgICAgcmV0dXJuIHRoaXMucG9zdCh0aGlzLmdldFVzZXJQYXRoKCkgKyB0aGlzLmF0T3B0aW9ucy5yZXNldFBhc3N3b3JkUGF0aCwgYm9keSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICpcbiAgICAgKiBIVFRQIFdyYXBwZXJzXG4gICAgICpcbiAgICAgKi9cblxuICAgIGdldCh1cmw6IHN0cmluZywgb3B0aW9ucz86IFJlcXVlc3RPcHRpb25zQXJncyk6IE9ic2VydmFibGU8UmVzcG9uc2U+IHtcbiAgICAgICAgcmV0dXJuIHRoaXMucmVxdWVzdCh0aGlzLm1lcmdlUmVxdWVzdE9wdGlvbnNBcmdzKHtcbiAgICAgICAgICAgIHVybDogICAgdGhpcy5nZXRBcGlQYXRoKCkgKyB1cmwsXG4gICAgICAgICAgICBtZXRob2Q6IFJlcXVlc3RNZXRob2QuR2V0XG4gICAgICAgIH0sIG9wdGlvbnMpKTtcbiAgICB9XG5cbiAgICBwb3N0KHVybDogc3RyaW5nLCBib2R5OiBhbnksIG9wdGlvbnM/OiBSZXF1ZXN0T3B0aW9uc0FyZ3MpOiBPYnNlcnZhYmxlPFJlc3BvbnNlPiB7XG4gICAgICAgIHJldHVybiB0aGlzLnJlcXVlc3QodGhpcy5tZXJnZVJlcXVlc3RPcHRpb25zQXJncyh7XG4gICAgICAgICAgICB1cmw6ICAgIHRoaXMuZ2V0QXBpUGF0aCgpICsgdXJsLFxuICAgICAgICAgICAgbWV0aG9kOiBSZXF1ZXN0TWV0aG9kLlBvc3QsXG4gICAgICAgICAgICBib2R5OiAgIGJvZHlcbiAgICAgICAgfSwgb3B0aW9ucykpO1xuICAgIH1cblxuICAgIHB1dCh1cmw6IHN0cmluZywgYm9keTogYW55LCBvcHRpb25zPzogUmVxdWVzdE9wdGlvbnNBcmdzKTogT2JzZXJ2YWJsZTxSZXNwb25zZT4ge1xuICAgICAgICByZXR1cm4gdGhpcy5yZXF1ZXN0KHRoaXMubWVyZ2VSZXF1ZXN0T3B0aW9uc0FyZ3Moe1xuICAgICAgICAgICAgdXJsOiAgICB0aGlzLmdldEFwaVBhdGgoKSArIHVybCxcbiAgICAgICAgICAgIG1ldGhvZDogUmVxdWVzdE1ldGhvZC5QdXQsXG4gICAgICAgICAgICBib2R5OiAgIGJvZHlcbiAgICAgICAgfSwgb3B0aW9ucykpO1xuICAgIH1cblxuICAgIGRlbGV0ZSh1cmw6IHN0cmluZywgb3B0aW9ucz86IFJlcXVlc3RPcHRpb25zQXJncyk6IE9ic2VydmFibGU8UmVzcG9uc2U+IHtcbiAgICAgICAgcmV0dXJuIHRoaXMucmVxdWVzdCh0aGlzLm1lcmdlUmVxdWVzdE9wdGlvbnNBcmdzKHtcbiAgICAgICAgICAgIHVybDogICAgdGhpcy5nZXRBcGlQYXRoKCkgKyB1cmwsXG4gICAgICAgICAgICBtZXRob2Q6IFJlcXVlc3RNZXRob2QuRGVsZXRlXG4gICAgICAgIH0sIG9wdGlvbnMpKTtcbiAgICB9XG5cbiAgICBwYXRjaCh1cmw6IHN0cmluZywgYm9keTogYW55LCBvcHRpb25zPzogUmVxdWVzdE9wdGlvbnNBcmdzKTogT2JzZXJ2YWJsZTxSZXNwb25zZT4ge1xuICAgICAgICByZXR1cm4gdGhpcy5yZXF1ZXN0KHRoaXMubWVyZ2VSZXF1ZXN0T3B0aW9uc0FyZ3Moe1xuICAgICAgICAgICAgdXJsOiAgICB0aGlzLmdldEFwaVBhdGgoKSArIHVybCxcbiAgICAgICAgICAgIG1ldGhvZDogUmVxdWVzdE1ldGhvZC5QYXRjaCxcbiAgICAgICAgICAgIGJvZHk6ICAgYm9keVxuICAgICAgICB9LCBvcHRpb25zKSk7XG4gICAgfVxuXG4gICAgaGVhZChwYXRoOiBzdHJpbmcsIG9wdGlvbnM/OiBSZXF1ZXN0T3B0aW9uc0FyZ3MpOiBPYnNlcnZhYmxlPFJlc3BvbnNlPiB7XG4gICAgICAgIHJldHVybiB0aGlzLnJlcXVlc3Qoe1xuICAgICAgICAgICAgbWV0aG9kOiBSZXF1ZXN0TWV0aG9kLkhlYWQsXG4gICAgICAgICAgICB1cmw6ICAgIHRoaXMuZ2V0QXBpUGF0aCgpICsgcGF0aFxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBvcHRpb25zKHVybDogc3RyaW5nLCBvcHRpb25zPzogUmVxdWVzdE9wdGlvbnNBcmdzKTogT2JzZXJ2YWJsZTxSZXNwb25zZT4ge1xuICAgICAgICByZXR1cm4gdGhpcy5yZXF1ZXN0KHRoaXMubWVyZ2VSZXF1ZXN0T3B0aW9uc0FyZ3Moe1xuICAgICAgICAgICAgdXJsOiAgICB0aGlzLmdldEFwaVBhdGgoKSArIHVybCxcbiAgICAgICAgICAgIG1ldGhvZDogUmVxdWVzdE1ldGhvZC5PcHRpb25zXG4gICAgICAgIH0sIG9wdGlvbnMpKTtcbiAgICB9XG5cbiAgICAvLyBDb25zdHJ1Y3QgYW5kIHNlbmQgSHR0cCByZXF1ZXN0XG4gICAgcmVxdWVzdChvcHRpb25zOiBSZXF1ZXN0T3B0aW9uc0FyZ3MpOiBPYnNlcnZhYmxlPFJlc3BvbnNlPiB7XG5cbiAgICAgICAgbGV0IGJhc2VSZXF1ZXN0T3B0aW9uczogUmVxdWVzdE9wdGlvbnM7XG4gICAgICAgIGxldCBiYXNlSGVhZGVyczogICAgICAgIHsgW2tleTpzdHJpbmddOiBzdHJpbmc7IH0gPSB0aGlzLmF0T3B0aW9ucy5nbG9iYWxPcHRpb25zLmhlYWRlcnM7XG5cbiAgICAgICAgLy8gR2V0IGF1dGggZGF0YSBmcm9tIGxvY2FsIHN0b3JhZ2VcbiAgICAgICAgdGhpcy5nZXRBdXRoRGF0YUZyb21TdG9yYWdlKCk7XG4gICAgICAgIFxuICAgICAgICAvLyBNZXJnZSBhdXRoIGhlYWRlcnMgdG8gcmVxdWVzdCBpZiBzZXRcbiAgICAgICAgaWYgKHRoaXMuYXRDdXJyZW50QXV0aERhdGEgIT0gbnVsbCkge1xuICAgICAgICAgICAgKDxhbnk+T2JqZWN0KS5hc3NpZ24oYmFzZUhlYWRlcnMsIHtcbiAgICAgICAgICAgICAgICAnYWNjZXNzLXRva2VuJzogdGhpcy5hdEN1cnJlbnRBdXRoRGF0YS5hY2Nlc3NUb2tlbixcbiAgICAgICAgICAgICAgICAnY2xpZW50JzogICAgICAgdGhpcy5hdEN1cnJlbnRBdXRoRGF0YS5jbGllbnQsXG4gICAgICAgICAgICAgICAgJ2V4cGlyeSc6ICAgICAgIHRoaXMuYXRDdXJyZW50QXV0aERhdGEuZXhwaXJ5LFxuICAgICAgICAgICAgICAgICd0b2tlbi10eXBlJzogICB0aGlzLmF0Q3VycmVudEF1dGhEYXRhLnRva2VuVHlwZSxcbiAgICAgICAgICAgICAgICAndWlkJzogICAgICAgICAgdGhpcy5hdEN1cnJlbnRBdXRoRGF0YS51aWRcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgYmFzZVJlcXVlc3RPcHRpb25zID0gbmV3IFJlcXVlc3RPcHRpb25zKHtcbiAgICAgICAgICAgIGhlYWRlcnM6IG5ldyBIZWFkZXJzKGJhc2VIZWFkZXJzKVxuICAgICAgICB9KTtcblxuICAgICAgICAvLyBNZXJnZSBzdGFuZGFyZCBhbmQgY3VzdG9tIFJlcXVlc3RPcHRpb25zXG4gICAgICAgIGJhc2VSZXF1ZXN0T3B0aW9ucyA9IGJhc2VSZXF1ZXN0T3B0aW9ucy5tZXJnZShvcHRpb25zKTtcblxuICAgICAgICBsZXQgcmVzcG9uc2UgPSB0aGlzLmh0dHAucmVxdWVzdChuZXcgUmVxdWVzdChiYXNlUmVxdWVzdE9wdGlvbnMpKS5waXBlKHNoYXJlKCkpO1xuICAgICAgICB0aGlzLmhhbmRsZVJlc3BvbnNlKHJlc3BvbnNlKTtcblxuICAgICAgICByZXR1cm4gcmVzcG9uc2U7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBtZXJnZVJlcXVlc3RPcHRpb25zQXJncyhvcHRpb25zOiBSZXF1ZXN0T3B0aW9uc0FyZ3MsIGFkZE9wdGlvbnM/OiBSZXF1ZXN0T3B0aW9uc0FyZ3MpOiBSZXF1ZXN0T3B0aW9uc0FyZ3Mge1xuXG4gICAgICAgIGxldCByZXR1cm5PcHRpb25zOiBSZXF1ZXN0T3B0aW9uc0FyZ3MgPSBvcHRpb25zO1xuXG4gICAgICAgIGlmIChvcHRpb25zKVxuICAgICAgICAgICAgKDxhbnk+T2JqZWN0KS5hc3NpZ24ocmV0dXJuT3B0aW9ucywgYWRkT3B0aW9ucyk7XG5cbiAgICAgICAgcmV0dXJuIHJldHVybk9wdGlvbnM7XG4gICAgfVxuXG4gICAgLy8gQ2hlY2sgaWYgcmVzcG9uc2UgaXMgY29tcGxldGUgYW5kIG5ld2VyLCB0aGVuIHVwZGF0ZSBzdG9yYWdlXG4gICAgcHJpdmF0ZSBoYW5kbGVSZXNwb25zZShyZXNwb25zZTogT2JzZXJ2YWJsZTxSZXNwb25zZT4pOiB2b2lkIHtcbiAgICAgICAgcmVzcG9uc2Uuc3Vic2NyaWJlKHJlcyA9PiB7XG4gICAgICAgICAgICB0aGlzLmdldEF1dGhIZWFkZXJzRnJvbVJlc3BvbnNlKDxhbnk+cmVzKTtcbiAgICAgICAgfSwgZXJyb3IgPT4ge1xuICAgICAgICAgICAgdGhpcy5nZXRBdXRoSGVhZGVyc0Zyb21SZXNwb25zZSg8YW55PmVycm9yKTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICpcbiAgICAgKiBHZXQgQXV0aCBEYXRhXG4gICAgICpcbiAgICAgKi9cblxuICAgIC8vIFRyeSB0byBsb2FkIGF1dGggZGF0YVxuICAgIHByaXZhdGUgdHJ5TG9hZEF1dGhEYXRhKCk6IHZvaWQge1xuXG4gICAgICAgIGxldCB1c2VyVHlwZSA9IHRoaXMuZ2V0VXNlclR5cGVCeU5hbWUobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3VzZXJUeXBlJykpO1xuXG4gICAgICAgIGlmICh1c2VyVHlwZSlcbiAgICAgICAgICAgIHRoaXMuYXRDdXJyZW50VXNlclR5cGUgPSB1c2VyVHlwZTtcblxuICAgICAgICB0aGlzLmdldEF1dGhEYXRhRnJvbVN0b3JhZ2UoKTtcblxuICAgICAgICBpZih0aGlzLmFjdGl2YXRlZFJvdXRlKVxuICAgICAgICAgICAgdGhpcy5nZXRBdXRoRGF0YUZyb21QYXJhbXMoKTtcblxuICAgICAgICBpZiAodGhpcy5hdEN1cnJlbnRBdXRoRGF0YSlcbiAgICAgICAgICAgIHRoaXMudmFsaWRhdGVUb2tlbigpO1xuICAgIH1cblxuICAgIC8vIFBhcnNlIEF1dGggZGF0YSBmcm9tIHJlc3BvbnNlXG4gICAgcHJpdmF0ZSBnZXRBdXRoSGVhZGVyc0Zyb21SZXNwb25zZShkYXRhOiBhbnkpOiB2b2lkIHtcbiAgICAgICAgbGV0IGhlYWRlcnMgPSBkYXRhLmhlYWRlcnM7XG5cbiAgICAgICAgbGV0IGF1dGhEYXRhOiBBdXRoRGF0YSA9IHtcbiAgICAgICAgICAgIGFjY2Vzc1Rva2VuOiAgICBoZWFkZXJzLmdldCgnYWNjZXNzLXRva2VuJyksXG4gICAgICAgICAgICBjbGllbnQ6ICAgICAgICAgaGVhZGVycy5nZXQoJ2NsaWVudCcpLFxuICAgICAgICAgICAgZXhwaXJ5OiAgICAgICAgIGhlYWRlcnMuZ2V0KCdleHBpcnknKSxcbiAgICAgICAgICAgIHRva2VuVHlwZTogICAgICBoZWFkZXJzLmdldCgndG9rZW4tdHlwZScpLFxuICAgICAgICAgICAgdWlkOiAgICAgICAgICAgIGhlYWRlcnMuZ2V0KCd1aWQnKVxuICAgICAgICB9O1xuXG4gICAgICAgIHRoaXMuc2V0QXV0aERhdGEoYXV0aERhdGEpO1xuICAgIH1cblxuICAgIC8vIFBhcnNlIEF1dGggZGF0YSBmcm9tIHBvc3QgbWVzc2FnZVxuICAgIHByaXZhdGUgZ2V0QXV0aERhdGFGcm9tUG9zdE1lc3NhZ2UoZGF0YTogYW55KTogdm9pZCB7XG4gICAgICAgIGxldCBhdXRoRGF0YTogQXV0aERhdGEgPSB7XG4gICAgICAgICAgICBhY2Nlc3NUb2tlbjogICAgZGF0YVsnYXV0aF90b2tlbiddLFxuICAgICAgICAgICAgY2xpZW50OiAgICAgICAgIGRhdGFbJ2NsaWVudF9pZCddLFxuICAgICAgICAgICAgZXhwaXJ5OiAgICAgICAgIGRhdGFbJ2V4cGlyeSddLFxuICAgICAgICAgICAgdG9rZW5UeXBlOiAgICAgICdCZWFyZXInLFxuICAgICAgICAgICAgdWlkOiAgICAgICAgICAgIGRhdGFbJ3VpZCddXG4gICAgICAgIH07XG5cbiAgICAgICAgdGhpcy5zZXRBdXRoRGF0YShhdXRoRGF0YSk7XG4gICAgfVxuXG4gICAgLy8gVHJ5IHRvIGdldCBhdXRoIGRhdGEgZnJvbSBzdG9yYWdlLlxuICAgIHByaXZhdGUgZ2V0QXV0aERhdGFGcm9tU3RvcmFnZSgpOiB2b2lkIHtcblxuICAgICAgICBsZXQgYXV0aERhdGE6IEF1dGhEYXRhID0ge1xuICAgICAgICAgICAgYWNjZXNzVG9rZW46ICAgIGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdhY2Nlc3NUb2tlbicpLFxuICAgICAgICAgICAgY2xpZW50OiAgICAgICAgIGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdjbGllbnQnKSxcbiAgICAgICAgICAgIGV4cGlyeTogICAgICAgICBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnZXhwaXJ5JyksXG4gICAgICAgICAgICB0b2tlblR5cGU6ICAgICAgbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3Rva2VuVHlwZScpLFxuICAgICAgICAgICAgdWlkOiAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5nZXRJdGVtKCd1aWQnKVxuICAgICAgICB9O1xuXG4gICAgICAgIGlmICh0aGlzLmNoZWNrQXV0aERhdGEoYXV0aERhdGEpKVxuICAgICAgICAgICAgdGhpcy5hdEN1cnJlbnRBdXRoRGF0YSA9IGF1dGhEYXRhO1xuICAgIH1cblxuICAgIC8vIFRyeSB0byBnZXQgYXV0aCBkYXRhIGZyb20gdXJsIHBhcmFtZXRlcnMuXG4gICAgcHJpdmF0ZSBnZXRBdXRoRGF0YUZyb21QYXJhbXMoKTogdm9pZCB7XG4gICAgICAgIGlmKHRoaXMuYWN0aXZhdGVkUm91dGUucXVlcnlQYXJhbXMpIC8vIEZpeCBmb3IgVGVzdGluZywgbmVlZHMgdG8gYmUgcmVtb3ZlZCBsYXRlclxuICAgICAgICAgICAgdGhpcy5hY3RpdmF0ZWRSb3V0ZS5xdWVyeVBhcmFtcy5zdWJzY3JpYmUocXVlcnlQYXJhbXMgPT4ge1xuICAgICAgICAgICAgICAgIGxldCBhdXRoRGF0YTogQXV0aERhdGEgPSB7XG4gICAgICAgICAgICAgICAgICAgIGFjY2Vzc1Rva2VuOiAgICBxdWVyeVBhcmFtc1sndG9rZW4nXSB8fCBxdWVyeVBhcmFtc1snYXV0aF90b2tlbiddLFxuICAgICAgICAgICAgICAgICAgICBjbGllbnQ6ICAgICAgICAgcXVlcnlQYXJhbXNbJ2NsaWVudF9pZCddLFxuICAgICAgICAgICAgICAgICAgICBleHBpcnk6ICAgICAgICAgcXVlcnlQYXJhbXNbJ2V4cGlyeSddLFxuICAgICAgICAgICAgICAgICAgICB0b2tlblR5cGU6ICAgICAgJ0JlYXJlcicsXG4gICAgICAgICAgICAgICAgICAgIHVpZDogICAgICAgICAgICBxdWVyeVBhcmFtc1sndWlkJ11cbiAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuY2hlY2tBdXRoRGF0YShhdXRoRGF0YSkpXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYXRDdXJyZW50QXV0aERhdGEgPSBhdXRoRGF0YTtcbiAgICAgICAgICAgIH0pO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqXG4gICAgICogU2V0IEF1dGggRGF0YVxuICAgICAqXG4gICAgICovXG5cbiAgICAvLyBXcml0ZSBhdXRoIGRhdGEgdG8gc3RvcmFnZVxuICAgIHByaXZhdGUgc2V0QXV0aERhdGEoYXV0aERhdGE6IEF1dGhEYXRhKTogdm9pZCB7XG5cbiAgICAgICAgaWYgKHRoaXMuY2hlY2tBdXRoRGF0YShhdXRoRGF0YSkpIHtcblxuICAgICAgICAgICAgdGhpcy5hdEN1cnJlbnRBdXRoRGF0YSA9IGF1dGhEYXRhO1xuXG4gICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnYWNjZXNzVG9rZW4nLCBhdXRoRGF0YS5hY2Nlc3NUb2tlbik7XG4gICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnY2xpZW50JywgYXV0aERhdGEuY2xpZW50KTtcbiAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdleHBpcnknLCBhdXRoRGF0YS5leHBpcnkpO1xuICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ3Rva2VuVHlwZScsIGF1dGhEYXRhLnRva2VuVHlwZSk7XG4gICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgndWlkJywgYXV0aERhdGEudWlkKTtcblxuICAgICAgICAgICAgaWYgKHRoaXMuYXRDdXJyZW50VXNlclR5cGUgIT0gbnVsbClcbiAgICAgICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgndXNlclR5cGUnLCB0aGlzLmF0Q3VycmVudFVzZXJUeXBlLm5hbWUpO1xuXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKlxuICAgICAqIFZhbGlkYXRlIEF1dGggRGF0YVxuICAgICAqXG4gICAgICovXG5cbiAgICAvLyBDaGVjayBpZiBhdXRoIGRhdGEgY29tcGxldGUgYW5kIGlmIHJlc3BvbnNlIHRva2VuIGlzIG5ld2VyXG4gICAgcHJpdmF0ZSBjaGVja0F1dGhEYXRhKGF1dGhEYXRhOiBBdXRoRGF0YSk6IGJvb2xlYW4ge1xuXG4gICAgICAgIGlmIChcbiAgICAgICAgICAgIGF1dGhEYXRhLmFjY2Vzc1Rva2VuICE9IG51bGwgJiZcbiAgICAgICAgICAgIGF1dGhEYXRhLmNsaWVudCAhPSBudWxsICYmXG4gICAgICAgICAgICBhdXRoRGF0YS5leHBpcnkgIT0gbnVsbCAmJlxuICAgICAgICAgICAgYXV0aERhdGEudG9rZW5UeXBlICE9IG51bGwgJiZcbiAgICAgICAgICAgIGF1dGhEYXRhLnVpZCAhPSBudWxsXG4gICAgICAgICkge1xuICAgICAgICAgICAgaWYgKHRoaXMuYXRDdXJyZW50QXV0aERhdGEgIT0gbnVsbClcbiAgICAgICAgICAgICAgICByZXR1cm4gYXV0aERhdGEuZXhwaXJ5ID49IHRoaXMuYXRDdXJyZW50QXV0aERhdGEuZXhwaXJ5O1xuICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICpcbiAgICAgKiBDb25zdHJ1Y3QgUGF0aHMgLyBVcmxzXG4gICAgICpcbiAgICAgKi9cblxuICAgIHByaXZhdGUgZ2V0VXNlclBhdGgoKTogc3RyaW5nIHtcbiAgICAgICAgaWYgKHRoaXMuYXRDdXJyZW50VXNlclR5cGUgPT0gbnVsbClcbiAgICAgICAgICAgIHJldHVybiAnJztcbiAgICAgICAgZWxzZVxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuYXRDdXJyZW50VXNlclR5cGUucGF0aCArICcvJztcbiAgICB9XG5cbiAgICBwcml2YXRlIGdldEFwaVBhdGgoKTogc3RyaW5nIHtcbiAgICAgICAgbGV0IGNvbnN0cnVjdGVkUGF0aCA9ICcnO1xuXG4gICAgICAgIGlmICh0aGlzLmF0T3B0aW9ucy5hcGlCYXNlICE9IG51bGwpXG4gICAgICAgICAgICBjb25zdHJ1Y3RlZFBhdGggKz0gdGhpcy5hdE9wdGlvbnMuYXBpQmFzZSArICcvJztcblxuICAgICAgICBpZiAodGhpcy5hdE9wdGlvbnMuYXBpUGF0aCAhPSBudWxsKVxuICAgICAgICAgICAgY29uc3RydWN0ZWRQYXRoICs9IHRoaXMuYXRPcHRpb25zLmFwaVBhdGggKyAnLyc7XG5cbiAgICAgICAgcmV0dXJuIGNvbnN0cnVjdGVkUGF0aDtcbiAgICB9XG5cbiAgICBwcml2YXRlIGdldE9BdXRoUGF0aChvQXV0aFR5cGU6IHN0cmluZyk6IHN0cmluZyB7XG4gICAgICAgIGxldCBvQXV0aFBhdGg6IHN0cmluZztcblxuICAgICAgICBvQXV0aFBhdGggPSB0aGlzLmF0T3B0aW9ucy5vQXV0aFBhdGhzW29BdXRoVHlwZV07XG5cbiAgICAgICAgaWYgKG9BdXRoUGF0aCA9PSBudWxsKVxuICAgICAgICAgICAgb0F1dGhQYXRoID0gYC9hdXRoLyR7b0F1dGhUeXBlfWA7XG5cbiAgICAgICAgcmV0dXJuIG9BdXRoUGF0aDtcbiAgICB9XG5cbiAgICBwcml2YXRlIGdldE9BdXRoVXJsKG9BdXRoUGF0aDogc3RyaW5nLCBjYWxsYmFja1VybDogc3RyaW5nLCB3aW5kb3dUeXBlOiBzdHJpbmcpOiBzdHJpbmcge1xuICAgICAgICBsZXQgdXJsOiBzdHJpbmc7XG5cbiAgICAgICAgdXJsID0gICBgJHt0aGlzLmF0T3B0aW9ucy5vQXV0aEJhc2V9LyR7b0F1dGhQYXRofWA7XG4gICAgICAgIHVybCArPSAgYD9vbW5pYXV0aF93aW5kb3dfdHlwZT0ke3dpbmRvd1R5cGV9YDtcbiAgICAgICAgdXJsICs9ICBgJmF1dGhfb3JpZ2luX3VybD0ke2VuY29kZVVSSUNvbXBvbmVudChjYWxsYmFja1VybCl9YDtcblxuICAgICAgICBpZiAodGhpcy5hdEN1cnJlbnRVc2VyVHlwZSAhPSBudWxsKVxuICAgICAgICAgICAgdXJsICs9IGAmcmVzb3VyY2VfY2xhc3M9JHt0aGlzLmF0Q3VycmVudFVzZXJUeXBlLm5hbWV9YDtcblxuICAgICAgICByZXR1cm4gdXJsO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqXG4gICAgICogT0F1dGhcbiAgICAgKlxuICAgICAqL1xuXG4gICAgcHJpdmF0ZSByZXF1ZXN0Q3JlZGVudGlhbHNWaWFQb3N0TWVzc2FnZShhdXRoV2luZG93OiBhbnkpOiBPYnNlcnZhYmxlPGFueT4ge1xuICAgICAgICBsZXQgcG9sbGVyT2JzZXJ2ID0gaW50ZXJ2YWwoNTAwKTtcblxuICAgICAgICBsZXQgcmVzcG9uc2VPYnNlcnYgPSBmcm9tRXZlbnQod2luZG93LCAnbWVzc2FnZScpLnBpcGUoXG4gICAgICAgICAgICBwbHVjaygnZGF0YScpLFxuICAgICAgICAgICAgZmlsdGVyKHRoaXMub0F1dGhXaW5kb3dSZXNwb25zZUZpbHRlcilcbiAgICAgICAgKTtcblxuICAgICAgICBsZXQgcmVzcG9uc2VTdWJzY3JpcHRpb24gPSByZXNwb25zZU9ic2Vydi5zdWJzY3JpYmUoXG4gICAgICAgICAgICB0aGlzLmdldEF1dGhEYXRhRnJvbVBvc3RNZXNzYWdlLmJpbmQodGhpcylcbiAgICAgICAgKTtcblxuICAgICAgICBsZXQgcG9sbGVyU3Vic2NyaXB0aW9uID0gcG9sbGVyT2JzZXJ2LnN1YnNjcmliZSgoKSA9PiB7XG4gICAgICAgICAgICBpZiAoYXV0aFdpbmRvdy5jbG9zZWQpXG4gICAgICAgICAgICAgICAgcG9sbGVyU3Vic2NyaXB0aW9uLnVuc3Vic2NyaWJlKCk7XG4gICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgYXV0aFdpbmRvdy5wb3N0TWVzc2FnZSgncmVxdWVzdENyZWRlbnRpYWxzJywgJyonKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgcmV0dXJuIHJlc3BvbnNlT2JzZXJ2O1xuICAgIH1cblxuICAgIHByaXZhdGUgb0F1dGhXaW5kb3dSZXNwb25zZUZpbHRlcihkYXRhOiBhbnkpOiBhbnkge1xuICAgICAgICBpZihkYXRhLm1lc3NhZ2UgPT0gJ2RlbGl2ZXJDcmVkZW50aWFscycgfHwgZGF0YS5tZXNzYWdlID09ICdhdXRoRmFpbHVyZScpXG4gICAgICAgICAgICByZXR1cm4gZGF0YTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKlxuICAgICAqIFV0aWxpdGllc1xuICAgICAqXG4gICAgICovXG5cbiAgICAvLyBNYXRjaCB1c2VyIGNvbmZpZyBieSB1c2VyIGNvbmZpZyBuYW1lXG4gICAgcHJpdmF0ZSBnZXRVc2VyVHlwZUJ5TmFtZShuYW1lOiBzdHJpbmcpOiBVc2VyVHlwZSB7XG4gICAgICAgIGlmIChuYW1lID09IG51bGwgfHwgdGhpcy5hdE9wdGlvbnMudXNlclR5cGVzID09IG51bGwpXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcblxuICAgICAgICByZXR1cm4gdGhpcy5hdE9wdGlvbnMudXNlclR5cGVzLmZpbmQoXG4gICAgICAgICAgICB1c2VyVHlwZSA9PiB1c2VyVHlwZS5uYW1lID09PSBuYW1lXG4gICAgICAgICk7XG4gICAgfVxufVxuIiwiaW1wb3J0IHsgQ29tcG9uZW50LCBJbnB1dCB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgQW5ndWxhcjJUb2tlblNlcnZpY2UgfSBmcm9tICcuLi9hbmd1bGFyMi10b2tlbi5zZXJ2aWNlJztcblxuQENvbXBvbmVudCh7XG4gICAgc2VsZWN0b3I6ICAgJ2EydC11aScsXG4gICAgdGVtcGxhdGU6IGBcbiAgICAgICAgPGRpdiBjbGFzcz1cImEydC13cmFwcGVyXCI+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwiYTJ0LWNvbnRhaW5lclwiPlxuICAgICAgICAgICAgICAgIDxyb3V0ZXItb3V0bGV0Pjwvcm91dGVyLW91dGxldD5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2Rpdj5cbiAgICBgLFxuICAgIHN0eWxlczogW2BcbiAgICAgICAgLmEydC13cmFwcGVyIHtcbiAgICAgICAgICAgIHdpZHRoOiAxMDAlO1xuICAgICAgICAgICAgaGVpZ2h0OiAxMDB2aDtcbiAgICAgICAgICAgIG1pbi1oZWlnaHQ6IDUwMHB4O1xuXG4gICAgICAgICAgICBwYWRkaW5nLXRvcDogMTAwcHg7XG5cbiAgICAgICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgICAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcblxuICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogIzMyNzBhMDtcbiAgICAgICAgfVxuXG4gICAgICAgIC5hMnQtbG9nbyB7XG4gICAgICAgICAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XG4gICAgICAgICAgICBjb2xvcjogd2hpdGU7XG4gICAgICAgICAgICBmb250LXNpemU6IDMwcHg7XG4gICAgICAgIH1cblxuICAgICAgICAuYTJ0LWNvbnRhaW5lciB7XG4gICAgICAgICAgICB3aWR0aDogNDAwcHg7XG4gICAgICAgIH1cbiAgICBgXVxufSlcbmV4cG9ydCBjbGFzcyBBMnRVaUNvbXBvbmVudCB7XG4gICAgY29uc3RydWN0b3IoKSB7IH1cbn1cbiIsImltcG9ydCB7IENvbXBvbmVudCwgSW5wdXQgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7IFJvdXRlciB9IGZyb20gJ0Bhbmd1bGFyL3JvdXRlcic7XG5pbXBvcnQgeyBBbmd1bGFyMlRva2VuU2VydmljZSB9IGZyb20gJy4uLy4uL2FuZ3VsYXIyLXRva2VuLnNlcnZpY2UnO1xuXG5pbXBvcnQgeyBTaWduSW5EYXRhIH0gZnJvbSAnLi4vLi4vYW5ndWxhcjItdG9rZW4ubW9kZWwnO1xuaW1wb3J0IHsgQTJ0Rm9ybVNlcnZpY2UgfSBmcm9tICcuLi9hMnQtc2hhcmVkL2EydC1mb3JtL2EydC1mb3JtLnNlcnZpY2UnO1xuaW1wb3J0IHsgU0lHTl9JTl9GT1JNIH0gZnJvbSAnLi4vYTJ0LXVpLmZvcm1zJztcblxuQENvbXBvbmVudCh7XG4gICAgc2VsZWN0b3I6ICAgJ2EydC1zaWduLWluJyxcbiAgICBwcm92aWRlcnM6ICBbQTJ0Rm9ybVNlcnZpY2VdLFxuICAgIHRlbXBsYXRlOiBgXG4gICAgICAgIDxhMnQtaGVhZGxpbmU+U2lnbiBJbjwvYTJ0LWhlYWRsaW5lPlxuICAgICAgICA8YTJ0LWVycm9yIFtlcnJvcnNdPVwiX2Vycm9yc1wiPjwvYTJ0LWVycm9yPlxuICAgICAgICA8YTJ0LWZvcm0+U2lnbiBJbjwvYTJ0LWZvcm0+XG4gICAgICAgIDxhMnQtbGlua3MgY2FzZT1cInNpZ24taW5cIj48L2EydC1saW5rcz5cbiAgICBgXG59KVxuZXhwb3J0IGNsYXNzIEEydFNpZ25JbkNvbXBvbmVudCB7XG5cbiAgICBfZXJyb3JzOiBzdHJpbmdbXTtcblxuICAgIGNvbnN0cnVjdG9yKFxuICAgICAgICBwdWJsaWMgX2Zvcm1TZXJ2aWNlOiBBMnRGb3JtU2VydmljZSxcbiAgICAgICAgcHVibGljIF9zZXNzaW9uU2VydmljZTogQW5ndWxhcjJUb2tlblNlcnZpY2UsXG4gICAgICAgIHB1YmxpYyBfcm91dGVyOiBSb3V0ZXJcbiAgICApIHtcbiAgICAgICAgdGhpcy5fZm9ybVNlcnZpY2UuaW5pdEZvcm0oU0lHTl9JTl9GT1JNKTtcbiAgICAgICAgdGhpcy5fZm9ybVNlcnZpY2Uuc3VibWl0JC5zdWJzY3JpYmUoXG4gICAgICAgICAgICAoZGF0YTogU2lnbkluRGF0YSkgPT4gdGhpcy5fc2Vzc2lvblNlcnZpY2Uuc2lnbkluKGRhdGEpLnN1YnNjcmliZShcbiAgICAgICAgICAgICAgICAocmVzOiBhbnkpID0+ICAgdGhpcy5faGFuZGxlU3VjY2VzcyhyZXMpLFxuICAgICAgICAgICAgICAgIChlcnJvcjogYW55KSA9PiB0aGlzLl9oYW5kbGVFcnJvcihlcnJvcilcbiAgICAgICAgICAgIClcbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIF9oYW5kbGVTdWNjZXNzKGRhdGE6IGFueSkge1xuICAgICAgICB0aGlzLl9lcnJvcnMgPSBudWxsO1xuICAgICAgICB0aGlzLl9mb3JtU2VydmljZS51bmxvY2tTdWJtaXQoKTtcbiAgICAgICAgdGhpcy5fcm91dGVyLm5hdmlnYXRlKFsncmVzdHJpY3RlZCddKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIF9oYW5kbGVFcnJvcihlcnJvcjogYW55KSB7XG4gICAgICAgIHRoaXMuX2Vycm9ycyA9IGVycm9yLmpzb24oKS5lcnJvcnM7XG4gICAgICAgIHRoaXMuX2Zvcm1TZXJ2aWNlLnVubG9ja1N1Ym1pdCgpO1xuICAgIH1cbn1cbiIsImltcG9ydCB7IENvbXBvbmVudCwgSW5wdXQgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7IFJvdXRlciB9IGZyb20gJ0Bhbmd1bGFyL3JvdXRlcic7XG5pbXBvcnQgeyBBbmd1bGFyMlRva2VuU2VydmljZSB9IGZyb20gJy4uLy4uL2FuZ3VsYXIyLXRva2VuLnNlcnZpY2UnO1xuXG5pbXBvcnQgeyBSZWdpc3RlckRhdGEgfSBmcm9tICcuLi8uLi9hbmd1bGFyMi10b2tlbi5tb2RlbCc7XG5pbXBvcnQgeyBBMnRGb3JtU2VydmljZSB9IGZyb20gJy4uL2EydC1zaGFyZWQvYTJ0LWZvcm0vYTJ0LWZvcm0uc2VydmljZSc7XG5pbXBvcnQgeyBTSUdOX1VQX0ZPUk0gfSBmcm9tICcuLi9hMnQtdWkuZm9ybXMnO1xuXG5AQ29tcG9uZW50KHtcbiAgICBzZWxlY3RvcjogICAgICAgJ2EydC1zaWduLXVwJyxcbiAgICBwcm92aWRlcnM6ICAgICAgW0EydEZvcm1TZXJ2aWNlXSxcbiAgICB0ZW1wbGF0ZTogYFxuICAgICAgICA8YTJ0LWhlYWRsaW5lPlNpZ24gVXA8L2EydC1oZWFkbGluZT5cbiAgICAgICAgPGEydC1lcnJvciBbZXJyb3JzXT1cIl9lcnJvcnNcIj48L2EydC1lcnJvcj5cbiAgICAgICAgPGEydC1mb3JtPlNpZ24gVXA8L2EydC1mb3JtPlxuICAgICAgICA8YTJ0LWxpbmtzIGNhc2U9XCJzaWduLXVwXCI+PC9hMnQtbGlua3M+XG4gICAgYFxufSlcbmV4cG9ydCBjbGFzcyBBMnRTaWduVXBDb21wb25lbnQge1xuXG4gICAgX2Vycm9yczogc3RyaW5nW107XG5cbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgcHVibGljIF9mb3JtU2VydmljZTogQTJ0Rm9ybVNlcnZpY2UsXG4gICAgICAgIHB1YmxpYyBfc2Vzc2lvblNlcnZpY2U6IEFuZ3VsYXIyVG9rZW5TZXJ2aWNlLFxuICAgICAgICBwdWJsaWMgX3JvdXRlcjogUm91dGVyXG4gICAgKSB7XG4gICAgICAgIHRoaXMuX2Zvcm1TZXJ2aWNlLmluaXRGb3JtKFNJR05fVVBfRk9STSk7XG4gICAgICAgIHRoaXMuX2Zvcm1TZXJ2aWNlLnN1Ym1pdCQuc3Vic2NyaWJlKFxuICAgICAgICAgICAgKGRhdGE6IFJlZ2lzdGVyRGF0YSkgPT4gdGhpcy5fc2Vzc2lvblNlcnZpY2UucmVnaXN0ZXJBY2NvdW50KGRhdGEpLnN1YnNjcmliZShcbiAgICAgICAgICAgICAgICByZXMgPT4gICAgICB0aGlzLl9oYW5kbGVTdWNjZXNzKHJlcyksXG4gICAgICAgICAgICAgICAgZXJyb3IgPT4gICAgdGhpcy5faGFuZGxlRXJyb3IoZXJyb3IpXG4gICAgICAgICAgICApXG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBfaGFuZGxlU3VjY2VzcyhkYXRhOiBhbnkpIHtcbiAgICAgICAgdGhpcy5fZXJyb3JzID0gbnVsbDtcbiAgICAgICAgdGhpcy5fZm9ybVNlcnZpY2UudW5sb2NrU3VibWl0KCk7XG4gICAgICAgIHRoaXMuX3JvdXRlci5uYXZpZ2F0ZShbJ3Jlc3RyaWN0ZWQnXSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBfaGFuZGxlRXJyb3IoZXJyb3I6IGFueSkge1xuICAgICAgICB0aGlzLl9lcnJvcnMgPSBlcnJvci5qc29uKCkuZXJyb3JzLmZ1bGxfbWVzc2FnZXM7XG4gICAgICAgIHRoaXMuX2Zvcm1TZXJ2aWNlLnVubG9ja1N1Ym1pdCgpO1xuICAgIH1cbn1cbiIsImltcG9ydCB7IENvbXBvbmVudCwgSW5wdXQgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7IEFuZ3VsYXIyVG9rZW5TZXJ2aWNlIH0gZnJvbSAnLi4vLi4vYW5ndWxhcjItdG9rZW4uc2VydmljZSc7XG5cbmltcG9ydCB7IFJlc2V0UGFzc3dvcmREYXRhIH0gZnJvbSAnLi4vLi4vYW5ndWxhcjItdG9rZW4ubW9kZWwnO1xuaW1wb3J0IHsgQTJ0Rm9ybVNlcnZpY2UgfSBmcm9tICcuLi9hMnQtc2hhcmVkL2EydC1mb3JtL2EydC1mb3JtLnNlcnZpY2UnO1xuaW1wb3J0IHsgUkVTRVRfUEFTU1dPUkRfRk9STSB9IGZyb20gJy4uL2EydC11aS5mb3Jtcyc7XG5cbkBDb21wb25lbnQoe1xuICAgIHNlbGVjdG9yOiAgICAgICAnYTJ0LXJlc2V0LXBhc3N3b3JkJyxcbiAgICBwcm92aWRlcnM6ICAgICAgW0EydEZvcm1TZXJ2aWNlXSxcbiAgICB0ZW1wbGF0ZTogYFxuICAgICAgICA8YTJ0LWhlYWRsaW5lICpuZ0lmPVwiIV9lbWFpbFNlbmRcIj5SZXNldCB5b3VyIFBhc3N3b3JkPC9hMnQtaGVhZGxpbmU+XG4gICAgICAgIDxhMnQtZm9ybSAqbmdJZj1cIiFfZW1haWxTZW5kXCI+UmVzZXQgUGFzc3dvcmQ8L2EydC1mb3JtPlxuICAgICAgICA8cCBjbGFzcz1cImVtYWlsLXNlbmQtdGV4dFwiICpuZ0lmPVwiX2VtYWlsU2VuZFwiPlxuICAgICAgICAgICAgSWYgdGhlIGVudGVyZWQgZW1haWwgaXMgcmVnaXN0ZXJlZCB3ZSB3aWxsIHNlbmQgaW5zdHJ1Y3Rpb24gb24gaG93IHRvIHJlc2V0IHlvdXIgcGFzc3dvcmQuXG4gICAgICAgIDwvcD5cbiAgICAgICAgPGEydC1saW5rcyAqbmdJZj1cIiFfZW1haWxTZW5kXCIgY2FzZT1cInJlc2V0LXBhc3N3b3JkXCI+PC9hMnQtbGlua3M+XG4gICAgYCxcbiAgICBzdHlsZXM6IFtgXG4gICAgICAgIC5lbWFpbC1zZW5kLXRleHQge1xuICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogIzcyYzM4MDtcbiAgICAgICAgICAgIGNvbG9yOiB3aGl0ZTtcbiAgICAgICAgICAgIGZvbnQtc2l6ZTogMTZwdDtcbiAgICAgICAgICAgIHRleHQtYWxpZ246IGNlbnRlcjtcbiAgICAgICAgICAgIHBhZGRpbmc6IDIwcHg7XG4gICAgICAgICAgICBib3JkZXItcmFkaXVzOiAzcHg7XG4gICAgICAgIH1cbiAgICBgXVxufSlcbmV4cG9ydCBjbGFzcyBBMnRSZXNldFBhc3N3b3JkQ29tcG9uZW50IHtcblxuICAgIF9lbWFpbFNlbmQ6IGJvb2xlYW4gPSBmYWxzZTtcblxuICAgIGNvbnN0cnVjdG9yKFxuICAgICAgICBwcml2YXRlIF9mb3JtU2VydmljZTogQTJ0Rm9ybVNlcnZpY2UsXG4gICAgICAgIHByaXZhdGUgX3Nlc3Npb25TZXJ2aWNlOiBBbmd1bGFyMlRva2VuU2VydmljZVxuICAgICkge1xuICAgICAgICB0aGlzLl9mb3JtU2VydmljZS5pbml0Rm9ybShSRVNFVF9QQVNTV09SRF9GT1JNKTtcbiAgICAgICAgdGhpcy5fZm9ybVNlcnZpY2Uuc3VibWl0JC5zdWJzY3JpYmUoXG4gICAgICAgICAgICAoZGF0YTogUmVzZXRQYXNzd29yZERhdGEpID0+IHRoaXMuX3Nlc3Npb25TZXJ2aWNlLnJlc2V0UGFzc3dvcmQoZGF0YSkuc3Vic2NyaWJlKFxuICAgICAgICAgICAgICAgIHJlcyA9PiAgICAgIHRoaXMuX2hhbmRsZVN1Y2Nlc3MoKSxcbiAgICAgICAgICAgICAgICBlcnJvciA9PiAgICB0aGlzLl9oYW5kbGVFcnJvcigpXG4gICAgICAgICAgICApXG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBfaGFuZGxlU3VjY2VzcygpIHtcbiAgICAgICAgdGhpcy5fZW1haWxTZW5kID0gdHJ1ZTtcbiAgICB9XG5cbiAgICBwcml2YXRlIF9oYW5kbGVFcnJvcigpIHtcbiAgICAgICAgdGhpcy5fZW1haWxTZW5kID0gdHJ1ZTtcbiAgICB9XG59XG4iLCJpbXBvcnQgeyBDb21wb25lbnQsIElucHV0IH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQgeyBSb3V0ZXIgfSBmcm9tICdAYW5ndWxhci9yb3V0ZXInO1xuaW1wb3J0IHsgQW5ndWxhcjJUb2tlblNlcnZpY2UgfSBmcm9tICcuLi8uLi9hbmd1bGFyMi10b2tlbi5zZXJ2aWNlJztcblxuaW1wb3J0IHsgVXBkYXRlUGFzc3dvcmREYXRhIH0gZnJvbSAnLi4vLi4vYW5ndWxhcjItdG9rZW4ubW9kZWwnO1xuaW1wb3J0IHsgQTJ0Rm9ybVNlcnZpY2UgfSBmcm9tICcuLi9hMnQtc2hhcmVkL2EydC1mb3JtL2EydC1mb3JtLnNlcnZpY2UnO1xuaW1wb3J0IHsgVVBEQVRFX1BBU1NXT1JEX0ZPUk0gfSBmcm9tICcuLi9hMnQtdWkuZm9ybXMnO1xuXG5AQ29tcG9uZW50KHtcbiAgICBzZWxlY3RvcjogICAnYTJ0LXVwZGF0ZS1wYXNzd29yZCcsXG4gICAgcHJvdmlkZXJzOiAgW0EydEZvcm1TZXJ2aWNlXSxcbiAgICB0ZW1wbGF0ZTogYFxuICAgICAgICA8YTJ0LWhlYWRsaW5lPlVwZGF0ZSB5b3VyIFBhc3N3b3JkPC9hMnQtaGVhZGxpbmU+XG4gICAgICAgIDxhMnQtZXJyb3IgW2Vycm9yc109XCJfZXJyb3JzXCI+PC9hMnQtZXJyb3I+XG4gICAgICAgIDxhMnQtZm9ybT5VcGRhdGUgUGFzc3dvcmQ8L2EydC1mb3JtPlxuICAgIGBcbn0pXG5leHBvcnQgY2xhc3MgQTJ0VXBkYXRlUGFzc3dvcmRDb21wb25lbnQge1xuXG4gICAgX2Vycm9yczogc3RyaW5nW107XG5cbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgcHVibGljIF9mb3JtU2VydmljZTogQTJ0Rm9ybVNlcnZpY2UsXG4gICAgICAgIHB1YmxpYyBfc2Vzc2lvblNlcnZpY2U6IEFuZ3VsYXIyVG9rZW5TZXJ2aWNlLFxuICAgICAgICBwdWJsaWMgX3JvdXRlcjogUm91dGVyXG4gICAgKSB7XG4gICAgICAgIHRoaXMuX2Zvcm1TZXJ2aWNlLmluaXRGb3JtKFVQREFURV9QQVNTV09SRF9GT1JNKTtcbiAgICAgICAgdGhpcy5fZm9ybVNlcnZpY2Uuc3VibWl0JC5zdWJzY3JpYmUoXG4gICAgICAgICAgICAoZGF0YTogVXBkYXRlUGFzc3dvcmREYXRhKSA9PiB0aGlzLl9zZXNzaW9uU2VydmljZS51cGRhdGVQYXNzd29yZChkYXRhKS5zdWJzY3JpYmUoXG4gICAgICAgICAgICAgICAgcmVzID0+ICAgICAgdGhpcy5faGFuZGxlU3VjY2VzcyhyZXMpLFxuICAgICAgICAgICAgICAgIGVycm9yID0+ICAgIHRoaXMuX2hhbmRsZUVycm9yKGVycm9yKVxuICAgICAgICAgICAgKVxuICAgICAgICApO1xuICAgIH1cblxuICAgIHByaXZhdGUgX2hhbmRsZVN1Y2Nlc3MoZGF0YTogYW55KSB7XG4gICAgICAgIHRoaXMuX3JvdXRlci5uYXZpZ2F0ZShbJ3Nlc3Npb24vc2lnbi1pbiddKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIF9oYW5kbGVFcnJvcihlcnJvcjogYW55KSB7XG4gICAgICAgIHRoaXMuX2Vycm9ycyA9IGVycm9yLmpzb24oKS5lcnJvcnM7XG4gICAgICAgIHRoaXMuX2Zvcm1TZXJ2aWNlLnVubG9ja1N1Ym1pdCgpO1xuICAgIH1cbn1cbiIsImltcG9ydCB7IE1vZHVsZVdpdGhQcm92aWRlcnMgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7IFJvdXRlcywgUm91dGVyTW9kdWxlIH0gZnJvbSAnQGFuZ3VsYXIvcm91dGVyJztcblxuaW1wb3J0IHsgQW5ndWxhcjJUb2tlblNlcnZpY2UgfSBmcm9tICcuLi9hbmd1bGFyMi10b2tlbi5zZXJ2aWNlJztcblxuaW1wb3J0IHsgQTJ0VWlDb21wb25lbnQgfSBmcm9tICcuL2EydC11aS5jb21wb25lbnQnO1xuaW1wb3J0IHsgQTJ0U2lnbkluQ29tcG9uZW50IH0gZnJvbSAnLi9hMnQtc2lnbi1pbi9hMnQtc2lnbi1pbi5jb21wb25lbnQnO1xuaW1wb3J0IHsgQTJ0U2lnblVwQ29tcG9uZW50IH0gZnJvbSAnLi9hMnQtc2lnbi11cC9hMnQtc2lnbi11cC5jb21wb25lbnQnO1xuaW1wb3J0IHsgQTJ0UmVzZXRQYXNzd29yZENvbXBvbmVudCB9IGZyb20gJy4vYTJ0LXJlc2V0LXBhc3N3b3JkL2EydC1yZXNldC1wYXNzd29yZC5jb21wb25lbnQnO1xuaW1wb3J0IHsgQTJ0VXBkYXRlUGFzc3dvcmRDb21wb25lbnQgfSBmcm9tICcuL2EydC11cGRhdGUtcGFzc3dvcmQvYTJ0LXVwZGF0ZS1wYXNzd29yZC5jb21wb25lbnQnO1xuXG5jb25zdCByb3V0ZXM6IFJvdXRlcyA9IFt7XG4gICAgICAgIHBhdGg6ICdzZXNzaW9uJyxcbiAgICAgICAgY29tcG9uZW50OiBBMnRVaUNvbXBvbmVudCxcbiAgICAgICAgY2hpbGRyZW46IFtcbiAgICAgICAgICAgIHsgcGF0aDogJ3NpZ24taW4nLCBjb21wb25lbnQ6IEEydFNpZ25JbkNvbXBvbmVudCB9LFxuICAgICAgICAgICAgeyBwYXRoOiAnc2lnbi11cCcsIGNvbXBvbmVudDogQTJ0U2lnblVwQ29tcG9uZW50IH0sXG4gICAgICAgICAgICB7IHBhdGg6ICdyZXNldC1wYXNzd29yZCcsIGNvbXBvbmVudDogQTJ0UmVzZXRQYXNzd29yZENvbXBvbmVudCB9LFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHBhdGg6ICd1cGRhdGUtcGFzc3dvcmQnLFxuICAgICAgICAgICAgICAgIGNvbXBvbmVudDogQTJ0VXBkYXRlUGFzc3dvcmRDb21wb25lbnQsXG4gICAgICAgICAgICAgICAgY2FuQWN0aXZhdGU6IFtBbmd1bGFyMlRva2VuU2VydmljZV1cbiAgICAgICAgICAgIH1cbiAgICAgICAgXVxufV07XG5cbmV4cG9ydCBjb25zdCBhMnRSb3V0ZXMgPSBSb3V0ZXJNb2R1bGUuZm9yQ2hpbGQocm91dGVzKTtcbiIsImltcG9ydCB7IE5nTW9kdWxlIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSdcbmltcG9ydCB7IENvbW1vbk1vZHVsZSB9IGZyb20gJ0Bhbmd1bGFyL2NvbW1vbic7XG5pbXBvcnQgeyBSb3V0ZXJNb2R1bGUgfSBmcm9tICdAYW5ndWxhci9yb3V0ZXInO1xuXG5pbXBvcnQgeyBBbmd1bGFyMlRva2VuU2VydmljZSB9IGZyb20gJy4uL2FuZ3VsYXIyLXRva2VuLnNlcnZpY2UnO1xuXG5pbXBvcnQgeyBBMnRTaGFyZWRNb2R1bGUgfSBmcm9tICcuL2EydC1zaGFyZWQvYTJ0LXNoYXJlZC5tb2R1bGUnO1xuaW1wb3J0IHsgYTJ0Um91dGVzIH0gZnJvbSAnLi9hMnQtdWkucm91dGVzJztcbmltcG9ydCB7IEEydFVpQ29tcG9uZW50IH0gZnJvbSAnLi9hMnQtdWkuY29tcG9uZW50JztcbmltcG9ydCB7IEEydFNpZ25JbkNvbXBvbmVudCB9IGZyb20gJy4vYTJ0LXNpZ24taW4vYTJ0LXNpZ24taW4uY29tcG9uZW50JztcbmltcG9ydCB7IEEydFNpZ25VcENvbXBvbmVudCB9IGZyb20gJy4vYTJ0LXNpZ24tdXAvYTJ0LXNpZ24tdXAuY29tcG9uZW50JztcbmltcG9ydCB7IEEydFJlc2V0UGFzc3dvcmRDb21wb25lbnQgfSBmcm9tICcuL2EydC1yZXNldC1wYXNzd29yZC9hMnQtcmVzZXQtcGFzc3dvcmQuY29tcG9uZW50JztcbmltcG9ydCB7IEEydFVwZGF0ZVBhc3N3b3JkQ29tcG9uZW50IH0gZnJvbSAnLi9hMnQtdXBkYXRlLXBhc3N3b3JkL2EydC11cGRhdGUtcGFzc3dvcmQuY29tcG9uZW50JztcblxuQE5nTW9kdWxlKHtcbiAgICBpbXBvcnRzOiBbXG4gICAgICAgIENvbW1vbk1vZHVsZSxcbiAgICAgICAgUm91dGVyTW9kdWxlLFxuICAgICAgICBBMnRTaGFyZWRNb2R1bGUsXG4gICAgICAgIGEydFJvdXRlc1xuICAgIF0sXG4gICAgZGVjbGFyYXRpb25zOiBbXG4gICAgICAgIEEydFVpQ29tcG9uZW50LFxuICAgICAgICBBMnRTaWduSW5Db21wb25lbnQsXG4gICAgICAgIEEydFNpZ25VcENvbXBvbmVudCxcbiAgICAgICAgQTJ0UmVzZXRQYXNzd29yZENvbXBvbmVudCxcbiAgICAgICAgQTJ0VXBkYXRlUGFzc3dvcmRDb21wb25lbnRcbiAgICBdXG59KVxuZXhwb3J0IGNsYXNzIEEydFVpTW9kdWxlIHsgfSJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7QUFBQTtJQWtCSTt1QkFQaUIsSUFBSSxZQUFZLEVBQU87MEJBQ1gsS0FBSztLQU1qQjs7Ozs7SUFFVixpQ0FBUTs7OztjQUFDLE1BQW1CO1FBQy9CLElBQUksQ0FBQyxNQUFNLEdBQUcsTUFBTSxDQUFDO1FBQ3JCLElBQUksQ0FBQyxnQkFBZ0IsRUFBRSxDQUFDOzs7OztJQUdyQiwrQkFBTTs7OztRQUNULElBQUksQ0FBQyxVQUFVLEdBQUcsSUFBSSxDQUFDO1FBQ3ZCLElBQUksQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxTQUFTLENBQUMsS0FBSyxDQUFDLENBQUM7Ozs7O0lBR3JDLHFDQUFZOzs7O1FBQ2YsSUFBSSxDQUFDLFNBQVMsQ0FBQyxLQUFLLEVBQUUsQ0FBQztRQUN2QixJQUFJLENBQUMsVUFBVSxHQUFHLEtBQUssQ0FBQzs7Ozs7SUFHcEIseUNBQWdCOzs7O1FBRXBCLHFCQUFJLEtBQUssR0FBUSxFQUFFLENBQUM7UUFFcEIsSUFBSSxDQUFDLE1BQU0sQ0FBQyxPQUFPLENBQUMsVUFBQSxRQUFRO1lBQ3hCLEtBQUssQ0FBQyxRQUFRLENBQUMsR0FBRyxDQUFDLEdBQUcsSUFBSSxXQUFXLENBQUMsSUFBSSxFQUFFLFFBQVEsQ0FBQyxVQUFVLENBQUMsQ0FBQztTQUNwRSxDQUFDLENBQUM7UUFFSCxJQUFJLENBQUMsU0FBUyxHQUFHLElBQUksU0FBUyxDQUFDLEtBQUssQ0FBQyxDQUFDOzs7Z0JBcEM3QyxVQUFVOzs7O3lCQVBYOzs7Ozs7O0FDQUE7SUFvRUksMEJBQW1CLFlBQTRCO1FBQTVCLGlCQUFZLEdBQVosWUFBWSxDQUFnQjtLQUFLOztnQkEvRHZELFNBQVMsU0FBQztvQkFDUCxRQUFRLEVBQUUsVUFBVTtvQkFDcEIsUUFBUSxFQUFFLG1zQkFnQlQ7b0JBQ0QsTUFBTSxFQUFFLENBQUMsbWxDQXdDUixDQUFDO2lCQUNMOzs7O2dCQS9EUSxjQUFjOzsyQkFGdkI7Ozs7Ozs7QUNBQSxBQUVBLElBQUE7SUFPSSxtQkFBWSxPQU1OO1FBTk0sd0JBQUEsRUFBQSxZQU1OO1FBQ0YsSUFBSSxDQUFDLEtBQUssR0FBRyxPQUFPLENBQUMsS0FBSyxDQUFDO1FBQzNCLElBQUksQ0FBQyxHQUFHLEdBQUcsT0FBTyxDQUFDLEdBQUcsSUFBSSxFQUFFLENBQUM7UUFDN0IsSUFBSSxDQUFDLEtBQUssR0FBRyxPQUFPLENBQUMsS0FBSyxJQUFJLEVBQUUsQ0FBQztRQUNqQyxJQUFJLENBQUMsVUFBVSxHQUFHLE9BQU8sQ0FBQyxVQUFVLEtBQUssU0FBUyxHQUFHLEVBQUUsR0FBRyxPQUFPLENBQUMsVUFBVSxDQUFDO1FBQzdFLElBQUksQ0FBQyxJQUFJLEdBQUcsT0FBTyxDQUFDLElBQUksSUFBSSxFQUFFLENBQUM7S0FDbEM7b0JBckJMO0lBc0JDLENBQUE7QUFwQkQsQUFzQk8scUJBQU0sWUFBWSxHQUFnQjtJQUNyQyxJQUFJLFNBQVMsQ0FBQztRQUNWLEdBQUcsRUFBRSxPQUFPO1FBQ1osS0FBSyxFQUFFLE9BQU87UUFDZCxJQUFJLEVBQUUsTUFBTTtRQUNaLFVBQVUsRUFBRTtZQUNSLFVBQVUsQ0FBQyxRQUFRO1lBQ25CLFVBQVUsQ0FBQyxTQUFTLENBQUMsQ0FBQyxDQUFDO1NBQzFCO0tBQ0osQ0FBQztJQUNGLElBQUksU0FBUyxDQUFDO1FBQ1YsR0FBRyxFQUFFLFVBQVU7UUFDZixLQUFLLEVBQUUsVUFBVTtRQUNqQixJQUFJLEVBQUUsVUFBVTtRQUNoQixVQUFVLEVBQUU7WUFDUixVQUFVLENBQUMsUUFBUTtZQUNuQixVQUFVLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQztTQUMxQjtLQUNKLENBQUM7Q0FDTCxDQUFDO0FBRUYsQUFBTyxxQkFBTSxZQUFZLEdBQWdCO0lBQ3JDLElBQUksU0FBUyxDQUFDO1FBQ1YsR0FBRyxFQUFFLE9BQU87UUFDWixLQUFLLEVBQUUsT0FBTztRQUNkLElBQUksRUFBRSxNQUFNO1FBQ1osVUFBVSxFQUFFO1lBQ1IsVUFBVSxDQUFDLFFBQVE7WUFDbkIsVUFBVSxDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUM7U0FDMUI7S0FDSixDQUFDO0lBQ0YsSUFBSSxTQUFTLENBQUM7UUFDVixHQUFHLEVBQUUsVUFBVTtRQUNmLEtBQUssRUFBRSxVQUFVO1FBQ2pCLElBQUksRUFBRSxVQUFVO1FBQ2hCLFVBQVUsRUFBRTtZQUNSLFVBQVUsQ0FBQyxRQUFRO1lBQ25CLFVBQVUsQ0FBQyxTQUFTLENBQUMsQ0FBQyxDQUFDO1NBQzFCO0tBQ0osQ0FBQztJQUNGLElBQUksU0FBUyxDQUFDO1FBQ1YsR0FBRyxFQUFFLHNCQUFzQjtRQUMzQixLQUFLLEVBQUUsdUJBQXVCO1FBQzlCLElBQUksRUFBRSxVQUFVO1FBQ2hCLFVBQVUsRUFBRTtZQUNSLFVBQVUsQ0FBQyxRQUFRO1lBQ25CLFVBQVUsQ0FBQyxTQUFTLENBQUMsQ0FBQyxDQUFDO1NBQzFCO0tBQ0osQ0FBQztDQUNMLENBQUM7QUFFRixBQUFPLHFCQUFNLG1CQUFtQixHQUFnQjtJQUM1QyxJQUFJLFNBQVMsQ0FBQztRQUNWLEdBQUcsRUFBRSxPQUFPO1FBQ1osS0FBSyxFQUFFLE9BQU87UUFDZCxJQUFJLEVBQUUsTUFBTTtRQUNaLFVBQVUsRUFBRTtZQUNSLFVBQVUsQ0FBQyxRQUFRO1lBQ25CLFVBQVUsQ0FBQyxTQUFTLENBQUMsQ0FBQyxDQUFDO1NBQzFCO0tBQ0osQ0FBQztDQUNMLENBQUM7QUFFRixBQUFPLHFCQUFNLG9CQUFvQixHQUFnQjtJQUM3QyxJQUFJLFNBQVMsQ0FBQztRQUNWLEdBQUcsRUFBRSxVQUFVO1FBQ2YsS0FBSyxFQUFFLFVBQVU7UUFDakIsSUFBSSxFQUFFLFVBQVU7UUFDaEIsVUFBVSxFQUFFO1lBQ1IsVUFBVSxDQUFDLFFBQVE7WUFDbkIsVUFBVSxDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUM7U0FDMUI7S0FDSixDQUFDO0lBQ0YsSUFBSSxTQUFTLENBQUM7UUFDVixHQUFHLEVBQUUsc0JBQXNCO1FBQzNCLEtBQUssRUFBRSx1QkFBdUI7UUFDOUIsSUFBSSxFQUFFLFVBQVU7UUFDaEIsVUFBVSxFQUFFO1lBQ1IsVUFBVSxDQUFDLFFBQVE7WUFDbkIsVUFBVSxDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUM7U0FDMUI7S0FDSixDQUFDO0lBQ0YsSUFBSSxTQUFTLENBQUM7UUFDVixHQUFHLEVBQUUsaUJBQWlCO1FBQ3RCLEtBQUssRUFBRSxjQUFjO1FBQ3JCLElBQUksRUFBRSxVQUFVO1FBQ2hCLFVBQVUsRUFBRTtZQUNSLFVBQVUsQ0FBQyxRQUFRO1lBQ25CLFVBQVUsQ0FBQyxTQUFTLENBQUMsQ0FBQyxDQUFDO1NBQzFCO0tBQ0osQ0FBQztDQUNMLENBQUM7Ozs7OztBQ25IRjs7Ozs7O0lBMEZJLHdDQUFROzs7SUFBUjtRQUNJLElBQUksQ0FBQyxRQUFRLEdBQUcsSUFBSSxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxHQUFHLENBQUMsQ0FBQztLQUN6RDtJQUVELHNCQUFJLDBDQUFPOzs7O1FBQVg7WUFDSSxPQUFPLElBQUksQ0FBQyxRQUFRLENBQUMsS0FBSyxDQUFDO1NBQzlCOzs7T0FBQTs7Z0JBM0ZKLFNBQVMsU0FBQztvQkFDUCxRQUFRLEVBQUksZ0JBQWdCO29CQUM1QixRQUFRLEVBQUUsMHhDQXVDVDtvQkFDRCxNQUFNLEVBQUUsQ0FBQyx5eUJBaUNSLENBQUM7aUJBQ0w7OzsyQkFJSSxLQUFLO3VCQUNMLEtBQUs7O2dDQXRGVjs7Ozs7OztBQ0FBO0lBc0NJO0tBQWlCOztnQkFwQ3BCLFNBQVMsU0FBQztvQkFDUCxRQUFRLEVBQUksV0FBVztvQkFDdkIsUUFBUSxFQUFFLGlYQU1UO29CQUNELE1BQU0sRUFBRSxDQUFDLDJjQXFCUixDQUFDO2lCQUNMOzs7Ozt1QkFHSSxLQUFLOzs0QkFwQ1Y7Ozs7Ozs7QUNBQTtJQTBCSTtLQUFpQjs7Z0JBeEJwQixTQUFTLFNBQUM7b0JBQ1AsUUFBUSxFQUFJLFdBQVc7b0JBQ3ZCLFFBQVEsRUFBSSwwREFBMEQ7b0JBQ3RFLE1BQU0sRUFBRSxDQUFDLCtWQWVSLENBQUM7aUJBQ0w7Ozs7O3lCQUdJLEtBQUs7OzRCQXhCVjs7Ozs7OztBQ0FBO0lBY0k7S0FBaUI7O2dCQVpwQixTQUFTLFNBQUM7b0JBQ1AsUUFBUSxFQUFJLGNBQWM7b0JBQzFCLFFBQVEsRUFBSSxrQ0FBa0M7b0JBQzlDLE1BQU0sRUFBRyxDQUFDLDBIQU1ULENBQUM7aUJBQ0w7Ozs7K0JBWkQ7Ozs7Ozs7QUNBQTs7OztnQkFXQyxRQUFRLFNBQUM7b0JBQ04sT0FBTyxFQUFFO3dCQUNMLFlBQVk7d0JBQ1osbUJBQW1CO3dCQUNuQixZQUFZO3FCQUNmO29CQUNELFlBQVksRUFBRTt3QkFDVixxQkFBcUI7d0JBQ3JCLGdCQUFnQjt3QkFDaEIsaUJBQWlCO3dCQUNqQixpQkFBaUI7d0JBQ2pCLG9CQUFvQjtxQkFDdkI7b0JBQ0QsT0FBTyxFQUFFO3dCQUNMLGdCQUFnQjt3QkFDaEIsaUJBQWlCO3dCQUNqQixpQkFBaUI7d0JBQ2pCLG9CQUFvQjtxQkFDdkI7aUJBQ0o7OzBCQTlCRDs7Ozs7OztBQ0FBO0lBaUVJLDhCQUNZLE1BQ1ksY0FBOEIsRUFDOUIsTUFBYztRQUYxQixTQUFJLEdBQUosSUFBSTtRQUNRLG1CQUFjLEdBQWQsY0FBYyxDQUFnQjtRQUM5QixXQUFNLEdBQU4sTUFBTSxDQUFRO0tBQ2pDO0lBdENMLHNCQUFJLGlEQUFlOzs7O1FBQW5CO1lBQ0ksSUFBSSxJQUFJLENBQUMsaUJBQWlCLElBQUksSUFBSTtnQkFDOUIsT0FBTyxJQUFJLENBQUMsaUJBQWlCLENBQUMsSUFBSSxDQUFDOztnQkFFbkMsT0FBTyxJQUFJLENBQUM7U0FDbkI7OztPQUFBO0lBRUQsc0JBQUksaURBQWU7Ozs7UUFBbkI7WUFDSSxPQUFPLElBQUksQ0FBQyxpQkFBaUIsQ0FBQztTQUNqQzs7O09BQUE7SUFFRCxzQkFBSSxpREFBZTs7OztRQUFuQjtZQUNJLE9BQU8sSUFBSSxDQUFDLGlCQUFpQixDQUFDO1NBQ2pDOzs7T0FBQTtJQUVELHNCQUFJLG9EQUFrQjs7OztRQUF0QjtZQUNJLElBQUksSUFBSSxDQUFDLGlCQUFpQixJQUFJLElBQUksRUFBRTtnQkFDaEMsT0FBTyxJQUFJLE9BQU8sQ0FBQztvQkFDZixjQUFjLEVBQUUsSUFBSSxDQUFDLGlCQUFpQixDQUFDLFdBQVc7b0JBQ2xELFFBQVEsRUFBUSxJQUFJLENBQUMsaUJBQWlCLENBQUMsTUFBTTtvQkFDN0MsUUFBUSxFQUFRLElBQUksQ0FBQyxpQkFBaUIsQ0FBQyxNQUFNO29CQUM3QyxZQUFZLEVBQUksSUFBSSxDQUFDLGlCQUFpQixDQUFDLFNBQVM7b0JBQ2hELEtBQUssRUFBVyxJQUFJLENBQUMsaUJBQWlCLENBQUMsR0FBRztpQkFDN0MsQ0FBQyxDQUFDO2FBQ047WUFFRCxPQUFPLElBQUksT0FBTyxDQUFDO1NBQ3RCOzs7T0FBQTs7OztJQWFELDJDQUFZOzs7SUFBWjtRQUNJLE9BQU8sQ0FBQyxDQUFDLElBQUksQ0FBQyxpQkFBaUIsQ0FBQztLQUNuQzs7OztJQUVELDBDQUFXOzs7SUFBWDtRQUNJLElBQUksSUFBSSxDQUFDLFlBQVksRUFBRTtZQUNuQixPQUFPLElBQUksQ0FBQzthQUNYOztZQUVELElBQUksSUFBSSxDQUFDLFNBQVMsQ0FBQyx5QkFBeUIsRUFBRTtnQkFDMUMsWUFBWSxDQUFDLE9BQU8sQ0FDaEIsSUFBSSxDQUFDLFNBQVMsQ0FBQyx5QkFBeUIsRUFDeEMsTUFBTSxDQUFDLFFBQVEsQ0FBQyxRQUFRLEdBQUcsTUFBTSxDQUFDLFFBQVEsQ0FBQyxNQUFNLENBQ3BELENBQUM7YUFDTDs7WUFHRCxJQUFHLElBQUksQ0FBQyxNQUFNLElBQUksSUFBSSxDQUFDLFNBQVMsQ0FBQyxjQUFjO2dCQUMzQyxJQUFJLENBQUMsTUFBTSxDQUFDLFFBQVEsQ0FBQyxDQUFDLElBQUksQ0FBQyxTQUFTLENBQUMsY0FBYyxDQUFDLENBQUMsQ0FBQztZQUUxRCxPQUFPLEtBQUssQ0FBQztTQUNoQjtLQUNKOzs7Ozs7SUFHRCxtQ0FBSTs7OztJQUFKLFVBQUssT0FBOEI7UUFFL0IscUJBQUksY0FBYyxHQUF5QjtZQUN2QyxPQUFPLEVBQXFCLElBQUk7WUFDaEMsT0FBTyxFQUFxQixJQUFJO1lBRWhDLFVBQVUsRUFBa0IsY0FBYztZQUMxQyxjQUFjLEVBQWMsSUFBSTtZQUNoQyx5QkFBeUIsRUFBRyxJQUFJO1lBRWhDLFdBQVcsRUFBaUIsZUFBZTtZQUMzQyxpQkFBaUIsRUFBVyxxQkFBcUI7WUFDakQscUJBQXFCLEVBQU8sS0FBSztZQUVqQyxtQkFBbUIsRUFBUyxNQUFNO1lBQ2xDLGlCQUFpQixFQUFXLE1BQU07WUFDbEMsdUJBQXVCLEVBQUssTUFBTSxDQUFDLFFBQVEsQ0FBQyxJQUFJO1lBRWhELGtCQUFrQixFQUFVLE1BQU07WUFFbEMsaUJBQWlCLEVBQVcsZUFBZTtZQUMzQyxxQkFBcUIsRUFBTyxNQUFNLENBQUMsUUFBUSxDQUFDLElBQUk7WUFFaEQsU0FBUyxFQUFtQixJQUFJO1lBRWhDLFNBQVMsRUFBbUIsTUFBTSxDQUFDLFFBQVEsQ0FBQyxNQUFNO1lBQ2xELFVBQVUsRUFBRTtnQkFDUixNQUFNLEVBQWtCLGFBQWE7YUFDeEM7WUFDRCxpQkFBaUIsRUFBVyxnQkFBZ0I7WUFDNUMsZUFBZSxFQUFhLFdBQVc7WUFDdkMsa0JBQWtCLEVBQVUsSUFBSTtZQUVoQyxhQUFhLEVBQUU7Z0JBQ1gsT0FBTyxFQUFFO29CQUNMLGNBQWMsRUFBRSxrQkFBa0I7b0JBQ2xDLFFBQVEsRUFBUSxrQkFBa0I7aUJBQ3JDO2FBQ0o7U0FDSixDQUFDO1FBRUYsSUFBSSxDQUFDLFNBQVMsR0FBRyxtQkFBTSxNQUFNLEdBQUUsTUFBTSxDQUFDLGNBQWMsRUFBRSxPQUFPLENBQUMsQ0FBQztRQUUvRCxJQUFJLENBQUMsZUFBZSxFQUFFLENBQUM7S0FDMUI7Ozs7Ozs7Ozs7Ozs7O0lBU0QsOENBQWU7Ozs7Ozs7SUFBZixVQUFnQixZQUEwQjtRQUV0QyxJQUFJLFlBQVksQ0FBQyxRQUFRLElBQUksSUFBSTtZQUM3QixJQUFJLENBQUMsaUJBQWlCLEdBQUcsSUFBSSxDQUFDO2FBQzdCO1lBQ0QsSUFBSSxDQUFDLGlCQUFpQixHQUFHLElBQUksQ0FBQyxpQkFBaUIsQ0FBQyxZQUFZLENBQUMsUUFBUSxDQUFDLENBQUM7WUFDdkUsT0FBTyxZQUFZLENBQUMsUUFBUSxDQUFDO1NBQ2hDO1FBRUQsSUFDSSxZQUFZLDZCQUEwQixJQUFJO1lBQzFDLFlBQVksQ0FBQyxvQkFBb0IsSUFBSSxJQUN6QyxFQUFFO1lBQ0UsWUFBWSw0QkFBMEIsWUFBWSxDQUFDLG9CQUFvQixDQUFDO1lBQ3hFLE9BQU8sWUFBWSxDQUFDLG9CQUFvQixDQUFDO1NBQzVDO1FBRUQsWUFBWSwwQkFBMEIsSUFBSSxDQUFDLFNBQVMsQ0FBQyx1QkFBdUIsQ0FBQztRQUU3RSxPQUFPLElBQUksQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLFdBQVcsRUFBRSxHQUFHLElBQUksQ0FBQyxTQUFTLENBQUMsbUJBQW1CLEVBQUUsSUFBSSxDQUFDLFNBQVMsQ0FBQyxZQUFZLENBQUMsQ0FBQyxDQUFDO0tBQzNHOzs7OztJQUdELDRDQUFhOzs7SUFBYjtRQUNJLE9BQU8sSUFBSSxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsV0FBVyxFQUFFLEdBQUcsSUFBSSxDQUFDLFNBQVMsQ0FBQyxpQkFBaUIsQ0FBQyxDQUFDO0tBQzdFOzs7Ozs7SUFHRCxxQ0FBTTs7OztJQUFOLFVBQU8sVUFBc0I7UUFBN0IsaUJBaUJDO1FBZkcsSUFBSSxVQUFVLENBQUMsUUFBUSxJQUFJLElBQUk7WUFDM0IsSUFBSSxDQUFDLGlCQUFpQixHQUFHLElBQUksQ0FBQzs7WUFFOUIsSUFBSSxDQUFDLGlCQUFpQixHQUFHLElBQUksQ0FBQyxpQkFBaUIsQ0FBQyxVQUFVLENBQUMsUUFBUSxDQUFDLENBQUM7UUFFekUscUJBQUksSUFBSSxHQUFHLElBQUksQ0FBQyxTQUFTLENBQUM7WUFDdEIsS0FBSyxFQUFPLFVBQVUsQ0FBQyxLQUFLO1lBQzVCLFFBQVEsRUFBSSxVQUFVLENBQUMsUUFBUTtTQUNsQyxDQUFDLENBQUM7UUFFSCxxQkFBSSxNQUFNLEdBQUcsSUFBSSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsV0FBVyxFQUFFLEdBQUcsSUFBSSxDQUFDLFNBQVMsQ0FBQyxVQUFVLEVBQUUsSUFBSSxDQUFDLENBQUM7UUFFN0UsTUFBTSxDQUFDLFNBQVMsQ0FBQyxVQUFBLEdBQUcsSUFBSSxPQUFBLEtBQUksQ0FBQyxpQkFBaUIsR0FBRyxHQUFHLENBQUMsSUFBSSxFQUFFLENBQUMsSUFBSSxHQUFBLEVBQUUsVUFBQSxNQUFNLElBQUksT0FBQSxJQUFJLEdBQUEsQ0FBQyxDQUFDO1FBRWxGLE9BQU8sTUFBTSxDQUFDO0tBQ2pCOzs7OztJQUVELDBDQUFXOzs7O0lBQVgsVUFBWSxTQUFpQjtRQUV6QixxQkFBSSxTQUFTLEdBQVcsSUFBSSxDQUFDLFlBQVksQ0FBQyxTQUFTLENBQUMsQ0FBQztRQUNyRCxxQkFBSSxXQUFXLEdBQWMsTUFBTSxDQUFDLFFBQVEsQ0FBQyxNQUFNLFNBQUksSUFBSSxDQUFDLFNBQVMsQ0FBQyxpQkFBbUIsQ0FBQztRQUMxRixxQkFBSSxlQUFlLEdBQVcsSUFBSSxDQUFDLFNBQVMsQ0FBQyxlQUFlLENBQUM7UUFDN0QscUJBQUksT0FBTyxHQUFXLElBQUksQ0FBQyxXQUFXLENBQUMsU0FBUyxFQUFFLFdBQVcsRUFBRSxlQUFlLENBQUMsQ0FBQztRQUVoRixJQUFJLGVBQWUsSUFBSSxXQUFXLEVBQUU7WUFDaEMscUJBQUksa0JBQWtCLEdBQUcsSUFBSSxDQUFDLFNBQVMsQ0FBQyxrQkFBa0IsQ0FBQztZQUMzRCxxQkFBSSxhQUFhLEdBQUcsRUFBRSxDQUFDO1lBRXZCLElBQUksa0JBQWtCLEVBQUU7Z0JBQ3BCLEtBQUsscUJBQUksR0FBRyxJQUFJLGtCQUFrQixFQUFFO29CQUNoQyxhQUFhLElBQUksTUFBSSxHQUFHLFNBQUksa0JBQWtCLENBQUMsR0FBRyxDQUFHLENBQUM7aUJBQ3pEO2FBQ0o7WUFFRCxxQkFBSSxLQUFLLEdBQUcsTUFBTSxDQUFDLElBQUksQ0FDbkIsT0FBTyxFQUNQLFFBQVEsRUFDUiw4QkFBNEIsYUFBZSxDQUM5QyxDQUFDO1lBQ0YsT0FBTyxJQUFJLENBQUMsZ0NBQWdDLENBQUMsS0FBSyxDQUFDLENBQUM7U0FDdkQ7YUFBTSxJQUFJLGVBQWUsSUFBSSxZQUFZLEVBQUU7WUFDeEMsTUFBTSxDQUFDLFFBQVEsQ0FBQyxJQUFJLEdBQUcsT0FBTyxDQUFDO1NBQ2xDO2FBQU07WUFDSCxNQUFNLG1DQUFnQyxlQUFlLE9BQUcsQ0FBQztTQUM1RDtLQUNKOzs7O0lBRUQsbURBQW9COzs7SUFBcEI7UUFDSSxJQUFJLENBQUMscUJBQXFCLEVBQUUsQ0FBQztLQUNoQzs7Ozs7SUFHRCxzQ0FBTzs7O0lBQVA7UUFDSSxxQkFBSSxNQUFNLEdBQUcsSUFBSSxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsV0FBVyxFQUFFLEdBQUcsSUFBSSxDQUFDLFNBQVMsQ0FBQyxXQUFXLENBQUMsQ0FBQztRQUUxRSxZQUFZLENBQUMsVUFBVSxDQUFDLGFBQWEsQ0FBQyxDQUFDO1FBQ3ZDLFlBQVksQ0FBQyxVQUFVLENBQUMsUUFBUSxDQUFDLENBQUM7UUFDbEMsWUFBWSxDQUFDLFVBQVUsQ0FBQyxRQUFRLENBQUMsQ0FBQztRQUNsQyxZQUFZLENBQUMsVUFBVSxDQUFDLFdBQVcsQ0FBQyxDQUFDO1FBQ3JDLFlBQVksQ0FBQyxVQUFVLENBQUMsS0FBSyxDQUFDLENBQUM7UUFFL0IsSUFBSSxDQUFDLGlCQUFpQixHQUFHLElBQUksQ0FBQztRQUM5QixJQUFJLENBQUMsaUJBQWlCLEdBQUcsSUFBSSxDQUFDO1FBQzlCLElBQUksQ0FBQyxpQkFBaUIsR0FBRyxJQUFJLENBQUM7UUFFOUIsT0FBTyxNQUFNLENBQUM7S0FDakI7Ozs7O0lBR0QsNENBQWE7OztJQUFiO1FBQUEsaUJBWUM7UUFYRyxxQkFBSSxNQUFNLEdBQUcsSUFBSSxDQUFDLEdBQUcsQ0FBQyxJQUFJLENBQUMsV0FBVyxFQUFFLEdBQUcsSUFBSSxDQUFDLFNBQVMsQ0FBQyxpQkFBaUIsQ0FBQyxDQUFDO1FBRTdFLE1BQU0sQ0FBQyxTQUFTLENBQ1osVUFBQSxHQUFHLElBQUksT0FBQSxLQUFJLENBQUMsaUJBQWlCLEdBQUcsR0FBRyxDQUFDLElBQUksRUFBRSxDQUFDLElBQUksR0FBQSxFQUMvQyxVQUFBLEtBQUs7WUFDRCxJQUFJLEtBQUssQ0FBQyxNQUFNLEtBQUssR0FBRyxJQUFJLEtBQUksQ0FBQyxTQUFTLENBQUMscUJBQXFCLEVBQUU7Z0JBQzlELEtBQUksQ0FBQyxPQUFPLEVBQUUsQ0FBQzthQUNsQjtTQUNKLENBQUMsQ0FBQztRQUVQLE9BQU8sTUFBTSxDQUFDO0tBQ2pCOzs7Ozs7SUFHRCw2Q0FBYzs7OztJQUFkLFVBQWUsa0JBQXNDO1FBRWpELElBQUksa0JBQWtCLENBQUMsUUFBUSxJQUFJLElBQUk7WUFDbkMsSUFBSSxDQUFDLGlCQUFpQixHQUFHLElBQUksQ0FBQyxpQkFBaUIsQ0FBQyxrQkFBa0IsQ0FBQyxRQUFRLENBQUMsQ0FBQztRQUVqRixxQkFBSSxJQUFTLENBQUM7UUFFZCxJQUFJLGtCQUFrQixDQUFDLGVBQWUsSUFBSSxJQUFJLEVBQUU7WUFDNUMsSUFBSSxHQUFHO2dCQUNILFFBQVEsRUFBZ0Isa0JBQWtCLENBQUMsUUFBUTtnQkFDbkQscUJBQXFCLEVBQUcsa0JBQWtCLENBQUMsb0JBQW9CO2FBQ2xFLENBQUE7U0FDSjthQUFNO1lBQ0gsSUFBSSxHQUFHO2dCQUNILGdCQUFnQixFQUFRLGtCQUFrQixDQUFDLGVBQWU7Z0JBQzFELFFBQVEsRUFBZ0Isa0JBQWtCLENBQUMsUUFBUTtnQkFDbkQscUJBQXFCLEVBQUcsa0JBQWtCLENBQUMsb0JBQW9CO2FBQ2xFLENBQUM7U0FDTDtRQUVELElBQUksa0JBQWtCLENBQUMsa0JBQWtCLEVBQUU7WUFDdkMsSUFBSSxDQUFDLG9CQUFvQixHQUFHLGtCQUFrQixDQUFDLGtCQUFrQixDQUFDO1NBQ3JFO1FBRUQscUJBQUksSUFBSSxHQUFHLElBQUksQ0FBQyxTQUFTLENBQUMsSUFBSSxDQUFDLENBQUM7UUFDaEMsT0FBTyxJQUFJLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxXQUFXLEVBQUUsR0FBRyxJQUFJLENBQUMsU0FBUyxDQUFDLGtCQUFrQixFQUFFLElBQUksQ0FBQyxDQUFDO0tBQ2pGOzs7Ozs7SUFHRCw0Q0FBYTs7OztJQUFiLFVBQWMsaUJBQW9DO1FBRTlDLElBQUksaUJBQWlCLENBQUMsUUFBUSxJQUFJLElBQUk7WUFDbEMsSUFBSSxDQUFDLGlCQUFpQixHQUFHLElBQUksQ0FBQzs7WUFFOUIsSUFBSSxDQUFDLGlCQUFpQixHQUFHLElBQUksQ0FBQyxpQkFBaUIsQ0FBQyxpQkFBaUIsQ0FBQyxRQUFRLENBQUMsQ0FBQztRQUVoRixxQkFBSSxJQUFJLEdBQUcsSUFBSSxDQUFDLFNBQVMsQ0FBQztZQUN0QixLQUFLLEVBQVcsaUJBQWlCLENBQUMsS0FBSztZQUN2QyxZQUFZLEVBQUksSUFBSSxDQUFDLFNBQVMsQ0FBQyxxQkFBcUI7U0FDdkQsQ0FBQyxDQUFDO1FBRUgsT0FBTyxJQUFJLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxXQUFXLEVBQUUsR0FBRyxJQUFJLENBQUMsU0FBUyxDQUFDLGlCQUFpQixFQUFFLElBQUksQ0FBQyxDQUFDO0tBQ2pGOzs7Ozs7Ozs7Ozs7OztJQVFELGtDQUFHOzs7Ozs7OztJQUFILFVBQUksR0FBVyxFQUFFLE9BQTRCO1FBQ3pDLE9BQU8sSUFBSSxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsdUJBQXVCLENBQUM7WUFDN0MsR0FBRyxFQUFLLElBQUksQ0FBQyxVQUFVLEVBQUUsR0FBRyxHQUFHO1lBQy9CLE1BQU0sRUFBRSxhQUFhLENBQUMsR0FBRztTQUM1QixFQUFFLE9BQU8sQ0FBQyxDQUFDLENBQUM7S0FDaEI7Ozs7Ozs7SUFFRCxtQ0FBSTs7Ozs7O0lBQUosVUFBSyxHQUFXLEVBQUUsSUFBUyxFQUFFLE9BQTRCO1FBQ3JELE9BQU8sSUFBSSxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsdUJBQXVCLENBQUM7WUFDN0MsR0FBRyxFQUFLLElBQUksQ0FBQyxVQUFVLEVBQUUsR0FBRyxHQUFHO1lBQy9CLE1BQU0sRUFBRSxhQUFhLENBQUMsSUFBSTtZQUMxQixJQUFJLEVBQUksSUFBSTtTQUNmLEVBQUUsT0FBTyxDQUFDLENBQUMsQ0FBQztLQUNoQjs7Ozs7OztJQUVELGtDQUFHOzs7Ozs7SUFBSCxVQUFJLEdBQVcsRUFBRSxJQUFTLEVBQUUsT0FBNEI7UUFDcEQsT0FBTyxJQUFJLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyx1QkFBdUIsQ0FBQztZQUM3QyxHQUFHLEVBQUssSUFBSSxDQUFDLFVBQVUsRUFBRSxHQUFHLEdBQUc7WUFDL0IsTUFBTSxFQUFFLGFBQWEsQ0FBQyxHQUFHO1lBQ3pCLElBQUksRUFBSSxJQUFJO1NBQ2YsRUFBRSxPQUFPLENBQUMsQ0FBQyxDQUFDO0tBQ2hCOzs7Ozs7SUFFRCxxQ0FBTTs7Ozs7SUFBTixVQUFPLEdBQVcsRUFBRSxPQUE0QjtRQUM1QyxPQUFPLElBQUksQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLHVCQUF1QixDQUFDO1lBQzdDLEdBQUcsRUFBSyxJQUFJLENBQUMsVUFBVSxFQUFFLEdBQUcsR0FBRztZQUMvQixNQUFNLEVBQUUsYUFBYSxDQUFDLE1BQU07U0FDL0IsRUFBRSxPQUFPLENBQUMsQ0FBQyxDQUFDO0tBQ2hCOzs7Ozs7O0lBRUQsb0NBQUs7Ozs7OztJQUFMLFVBQU0sR0FBVyxFQUFFLElBQVMsRUFBRSxPQUE0QjtRQUN0RCxPQUFPLElBQUksQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLHVCQUF1QixDQUFDO1lBQzdDLEdBQUcsRUFBSyxJQUFJLENBQUMsVUFBVSxFQUFFLEdBQUcsR0FBRztZQUMvQixNQUFNLEVBQUUsYUFBYSxDQUFDLEtBQUs7WUFDM0IsSUFBSSxFQUFJLElBQUk7U0FDZixFQUFFLE9BQU8sQ0FBQyxDQUFDLENBQUM7S0FDaEI7Ozs7OztJQUVELG1DQUFJOzs7OztJQUFKLFVBQUssSUFBWSxFQUFFLE9BQTRCO1FBQzNDLE9BQU8sSUFBSSxDQUFDLE9BQU8sQ0FBQztZQUNoQixNQUFNLEVBQUUsYUFBYSxDQUFDLElBQUk7WUFDMUIsR0FBRyxFQUFLLElBQUksQ0FBQyxVQUFVLEVBQUUsR0FBRyxJQUFJO1NBQ25DLENBQUMsQ0FBQztLQUNOOzs7Ozs7SUFFRCxzQ0FBTzs7Ozs7SUFBUCxVQUFRLEdBQVcsRUFBRSxPQUE0QjtRQUM3QyxPQUFPLElBQUksQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLHVCQUF1QixDQUFDO1lBQzdDLEdBQUcsRUFBSyxJQUFJLENBQUMsVUFBVSxFQUFFLEdBQUcsR0FBRztZQUMvQixNQUFNLEVBQUUsYUFBYSxDQUFDLE9BQU87U0FDaEMsRUFBRSxPQUFPLENBQUMsQ0FBQyxDQUFDO0tBQ2hCOzs7Ozs7SUFHRCxzQ0FBTzs7OztJQUFQLFVBQVEsT0FBMkI7UUFFL0IscUJBQUksa0JBQWtDLENBQUM7UUFDdkMscUJBQUksV0FBVyxHQUFxQyxJQUFJLENBQUMsU0FBUyxDQUFDLGFBQWEsQ0FBQyxPQUFPLENBQUM7O1FBR3pGLElBQUksQ0FBQyxzQkFBc0IsRUFBRSxDQUFDOztRQUc5QixJQUFJLElBQUksQ0FBQyxpQkFBaUIsSUFBSSxJQUFJLEVBQUU7WUFDaEMsbUJBQU0sTUFBTSxHQUFFLE1BQU0sQ0FBQyxXQUFXLEVBQUU7Z0JBQzlCLGNBQWMsRUFBRSxJQUFJLENBQUMsaUJBQWlCLENBQUMsV0FBVztnQkFDbEQsUUFBUSxFQUFRLElBQUksQ0FBQyxpQkFBaUIsQ0FBQyxNQUFNO2dCQUM3QyxRQUFRLEVBQVEsSUFBSSxDQUFDLGlCQUFpQixDQUFDLE1BQU07Z0JBQzdDLFlBQVksRUFBSSxJQUFJLENBQUMsaUJBQWlCLENBQUMsU0FBUztnQkFDaEQsS0FBSyxFQUFXLElBQUksQ0FBQyxpQkFBaUIsQ0FBQyxHQUFHO2FBQzdDLENBQUMsQ0FBQztTQUNOO1FBRUQsa0JBQWtCLEdBQUcsSUFBSSxjQUFjLENBQUM7WUFDcEMsT0FBTyxFQUFFLElBQUksT0FBTyxDQUFDLFdBQVcsQ0FBQztTQUNwQyxDQUFDLENBQUM7O1FBR0gsa0JBQWtCLEdBQUcsa0JBQWtCLENBQUMsS0FBSyxDQUFDLE9BQU8sQ0FBQyxDQUFDO1FBRXZELHFCQUFJLFFBQVEsR0FBRyxJQUFJLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxJQUFJLE9BQU8sQ0FBQyxrQkFBa0IsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLEtBQUssRUFBRSxDQUFDLENBQUM7UUFDaEYsSUFBSSxDQUFDLGNBQWMsQ0FBQyxRQUFRLENBQUMsQ0FBQztRQUU5QixPQUFPLFFBQVEsQ0FBQztLQUNuQjs7Ozs7O0lBRU8sc0RBQXVCOzs7OztjQUFDLE9BQTJCLEVBQUUsVUFBK0I7UUFFeEYscUJBQUksYUFBYSxHQUF1QixPQUFPLENBQUM7UUFFaEQsSUFBSSxPQUFPO1lBQ1AsbUJBQU0sTUFBTSxHQUFFLE1BQU0sQ0FBQyxhQUFhLEVBQUUsVUFBVSxDQUFDLENBQUM7UUFFcEQsT0FBTyxhQUFhLENBQUM7Ozs7OztJQUlqQiw2Q0FBYzs7OztjQUFDLFFBQThCOztRQUNqRCxRQUFRLENBQUMsU0FBUyxDQUFDLFVBQUEsR0FBRztZQUNsQixLQUFJLENBQUMsMEJBQTBCLG1CQUFNLEdBQUcsRUFBQyxDQUFDO1NBQzdDLEVBQUUsVUFBQSxLQUFLO1lBQ0osS0FBSSxDQUFDLDBCQUEwQixtQkFBTSxLQUFLLEVBQUMsQ0FBQztTQUMvQyxDQUFDLENBQUM7Ozs7Ozs7O0lBVUMsOENBQWU7Ozs7Ozs7UUFFbkIscUJBQUksUUFBUSxHQUFHLElBQUksQ0FBQyxpQkFBaUIsQ0FBQyxZQUFZLENBQUMsT0FBTyxDQUFDLFVBQVUsQ0FBQyxDQUFDLENBQUM7UUFFeEUsSUFBSSxRQUFRO1lBQ1IsSUFBSSxDQUFDLGlCQUFpQixHQUFHLFFBQVEsQ0FBQztRQUV0QyxJQUFJLENBQUMsc0JBQXNCLEVBQUUsQ0FBQztRQUU5QixJQUFHLElBQUksQ0FBQyxjQUFjO1lBQ2xCLElBQUksQ0FBQyxxQkFBcUIsRUFBRSxDQUFDO1FBRWpDLElBQUksSUFBSSxDQUFDLGlCQUFpQjtZQUN0QixJQUFJLENBQUMsYUFBYSxFQUFFLENBQUM7Ozs7OztJQUlyQix5REFBMEI7Ozs7Y0FBQyxJQUFTO1FBQ3hDLHFCQUFJLE9BQU8sR0FBRyxJQUFJLENBQUMsT0FBTyxDQUFDO1FBRTNCLHFCQUFJLFFBQVEsR0FBYTtZQUNyQixXQUFXLEVBQUssT0FBTyxDQUFDLEdBQUcsQ0FBQyxjQUFjLENBQUM7WUFDM0MsTUFBTSxFQUFVLE9BQU8sQ0FBQyxHQUFHLENBQUMsUUFBUSxDQUFDO1lBQ3JDLE1BQU0sRUFBVSxPQUFPLENBQUMsR0FBRyxDQUFDLFFBQVEsQ0FBQztZQUNyQyxTQUFTLEVBQU8sT0FBTyxDQUFDLEdBQUcsQ0FBQyxZQUFZLENBQUM7WUFDekMsR0FBRyxFQUFhLE9BQU8sQ0FBQyxHQUFHLENBQUMsS0FBSyxDQUFDO1NBQ3JDLENBQUM7UUFFRixJQUFJLENBQUMsV0FBVyxDQUFDLFFBQVEsQ0FBQyxDQUFDOzs7Ozs7SUFJdkIseURBQTBCOzs7O2NBQUMsSUFBUztRQUN4QyxxQkFBSSxRQUFRLEdBQWE7WUFDckIsV0FBVyxFQUFLLElBQUksQ0FBQyxZQUFZLENBQUM7WUFDbEMsTUFBTSxFQUFVLElBQUksQ0FBQyxXQUFXLENBQUM7WUFDakMsTUFBTSxFQUFVLElBQUksQ0FBQyxRQUFRLENBQUM7WUFDOUIsU0FBUyxFQUFPLFFBQVE7WUFDeEIsR0FBRyxFQUFhLElBQUksQ0FBQyxLQUFLLENBQUM7U0FDOUIsQ0FBQztRQUVGLElBQUksQ0FBQyxXQUFXLENBQUMsUUFBUSxDQUFDLENBQUM7Ozs7O0lBSXZCLHFEQUFzQjs7OztRQUUxQixxQkFBSSxRQUFRLEdBQWE7WUFDckIsV0FBVyxFQUFLLFlBQVksQ0FBQyxPQUFPLENBQUMsYUFBYSxDQUFDO1lBQ25ELE1BQU0sRUFBVSxZQUFZLENBQUMsT0FBTyxDQUFDLFFBQVEsQ0FBQztZQUM5QyxNQUFNLEVBQVUsWUFBWSxDQUFDLE9BQU8sQ0FBQyxRQUFRLENBQUM7WUFDOUMsU0FBUyxFQUFPLFlBQVksQ0FBQyxPQUFPLENBQUMsV0FBVyxDQUFDO1lBQ2pELEdBQUcsRUFBYSxZQUFZLENBQUMsT0FBTyxDQUFDLEtBQUssQ0FBQztTQUM5QyxDQUFDO1FBRUYsSUFBSSxJQUFJLENBQUMsYUFBYSxDQUFDLFFBQVEsQ0FBQztZQUM1QixJQUFJLENBQUMsaUJBQWlCLEdBQUcsUUFBUSxDQUFDOzs7OztJQUlsQyxvREFBcUI7Ozs7O1FBQ3pCLElBQUcsSUFBSSxDQUFDLGNBQWMsQ0FBQyxXQUFXOztZQUM5QixJQUFJLENBQUMsY0FBYyxDQUFDLFdBQVcsQ0FBQyxTQUFTLENBQUMsVUFBQSxXQUFXO2dCQUNqRCxxQkFBSSxRQUFRLEdBQWE7b0JBQ3JCLFdBQVcsRUFBSyxXQUFXLENBQUMsT0FBTyxDQUFDLElBQUksV0FBVyxDQUFDLFlBQVksQ0FBQztvQkFDakUsTUFBTSxFQUFVLFdBQVcsQ0FBQyxXQUFXLENBQUM7b0JBQ3hDLE1BQU0sRUFBVSxXQUFXLENBQUMsUUFBUSxDQUFDO29CQUNyQyxTQUFTLEVBQU8sUUFBUTtvQkFDeEIsR0FBRyxFQUFhLFdBQVcsQ0FBQyxLQUFLLENBQUM7aUJBQ3JDLENBQUM7Z0JBRUYsSUFBSSxLQUFJLENBQUMsYUFBYSxDQUFDLFFBQVEsQ0FBQztvQkFDNUIsS0FBSSxDQUFDLGlCQUFpQixHQUFHLFFBQVEsQ0FBQzthQUN6QyxDQUFDLENBQUM7Ozs7Ozs7OztJQVVILDBDQUFXOzs7Ozs7O2NBQUMsUUFBa0I7UUFFbEMsSUFBSSxJQUFJLENBQUMsYUFBYSxDQUFDLFFBQVEsQ0FBQyxFQUFFO1lBRTlCLElBQUksQ0FBQyxpQkFBaUIsR0FBRyxRQUFRLENBQUM7WUFFbEMsWUFBWSxDQUFDLE9BQU8sQ0FBQyxhQUFhLEVBQUUsUUFBUSxDQUFDLFdBQVcsQ0FBQyxDQUFDO1lBQzFELFlBQVksQ0FBQyxPQUFPLENBQUMsUUFBUSxFQUFFLFFBQVEsQ0FBQyxNQUFNLENBQUMsQ0FBQztZQUNoRCxZQUFZLENBQUMsT0FBTyxDQUFDLFFBQVEsRUFBRSxRQUFRLENBQUMsTUFBTSxDQUFDLENBQUM7WUFDaEQsWUFBWSxDQUFDLE9BQU8sQ0FBQyxXQUFXLEVBQUUsUUFBUSxDQUFDLFNBQVMsQ0FBQyxDQUFDO1lBQ3RELFlBQVksQ0FBQyxPQUFPLENBQUMsS0FBSyxFQUFFLFFBQVEsQ0FBQyxHQUFHLENBQUMsQ0FBQztZQUUxQyxJQUFJLElBQUksQ0FBQyxpQkFBaUIsSUFBSSxJQUFJO2dCQUM5QixZQUFZLENBQUMsT0FBTyxDQUFDLFVBQVUsRUFBRSxJQUFJLENBQUMsaUJBQWlCLENBQUMsSUFBSSxDQUFDLENBQUM7U0FFckU7Ozs7Ozs7OztJQVVHLDRDQUFhOzs7Ozs7O2NBQUMsUUFBa0I7UUFFcEMsSUFDSSxRQUFRLENBQUMsV0FBVyxJQUFJLElBQUk7WUFDNUIsUUFBUSxDQUFDLE1BQU0sSUFBSSxJQUFJO1lBQ3ZCLFFBQVEsQ0FBQyxNQUFNLElBQUksSUFBSTtZQUN2QixRQUFRLENBQUMsU0FBUyxJQUFJLElBQUk7WUFDMUIsUUFBUSxDQUFDLEdBQUcsSUFBSSxJQUNwQixFQUFFO1lBQ0UsSUFBSSxJQUFJLENBQUMsaUJBQWlCLElBQUksSUFBSTtnQkFDOUIsT0FBTyxRQUFRLENBQUMsTUFBTSxJQUFJLElBQUksQ0FBQyxpQkFBaUIsQ0FBQyxNQUFNLENBQUM7O2dCQUV4RCxPQUFPLElBQUksQ0FBQztTQUNuQjthQUFNO1lBQ0gsT0FBTyxLQUFLLENBQUM7U0FDaEI7Ozs7Ozs7O0lBU0csMENBQVc7Ozs7Ozs7UUFDZixJQUFJLElBQUksQ0FBQyxpQkFBaUIsSUFBSSxJQUFJO1lBQzlCLE9BQU8sRUFBRSxDQUFDOztZQUVWLE9BQU8sSUFBSSxDQUFDLGlCQUFpQixDQUFDLElBQUksR0FBRyxHQUFHLENBQUM7Ozs7O0lBR3pDLHlDQUFVOzs7O1FBQ2QscUJBQUksZUFBZSxHQUFHLEVBQUUsQ0FBQztRQUV6QixJQUFJLElBQUksQ0FBQyxTQUFTLENBQUMsT0FBTyxJQUFJLElBQUk7WUFDOUIsZUFBZSxJQUFJLElBQUksQ0FBQyxTQUFTLENBQUMsT0FBTyxHQUFHLEdBQUcsQ0FBQztRQUVwRCxJQUFJLElBQUksQ0FBQyxTQUFTLENBQUMsT0FBTyxJQUFJLElBQUk7WUFDOUIsZUFBZSxJQUFJLElBQUksQ0FBQyxTQUFTLENBQUMsT0FBTyxHQUFHLEdBQUcsQ0FBQztRQUVwRCxPQUFPLGVBQWUsQ0FBQzs7Ozs7O0lBR25CLDJDQUFZOzs7O2NBQUMsU0FBaUI7UUFDbEMscUJBQUksU0FBaUIsQ0FBQztRQUV0QixTQUFTLEdBQUcsSUFBSSxDQUFDLFNBQVMsQ0FBQyxVQUFVLENBQUMsU0FBUyxDQUFDLENBQUM7UUFFakQsSUFBSSxTQUFTLElBQUksSUFBSTtZQUNqQixTQUFTLEdBQUcsV0FBUyxTQUFXLENBQUM7UUFFckMsT0FBTyxTQUFTLENBQUM7Ozs7Ozs7O0lBR2IsMENBQVc7Ozs7OztjQUFDLFNBQWlCLEVBQUUsV0FBbUIsRUFBRSxVQUFrQjtRQUMxRSxxQkFBSSxHQUFXLENBQUM7UUFFaEIsR0FBRyxHQUFRLElBQUksQ0FBQyxTQUFTLENBQUMsU0FBUyxTQUFJLFNBQVcsQ0FBQztRQUNuRCxHQUFHLElBQUssMkJBQXlCLFVBQVksQ0FBQztRQUM5QyxHQUFHLElBQUssc0JBQW9CLGtCQUFrQixDQUFDLFdBQVcsQ0FBRyxDQUFDO1FBRTlELElBQUksSUFBSSxDQUFDLGlCQUFpQixJQUFJLElBQUk7WUFDOUIsR0FBRyxJQUFJLHFCQUFtQixJQUFJLENBQUMsaUJBQWlCLENBQUMsSUFBTSxDQUFDO1FBRTVELE9BQU8sR0FBRyxDQUFDOzs7Ozs7Ozs7SUFTUCwrREFBZ0M7Ozs7Ozs7Y0FBQyxVQUFlO1FBQ3BELHFCQUFJLFlBQVksR0FBRyxRQUFRLENBQUMsR0FBRyxDQUFDLENBQUM7UUFFakMscUJBQUksY0FBYyxHQUFHLFNBQVMsQ0FBQyxNQUFNLEVBQUUsU0FBUyxDQUFDLENBQUMsSUFBSSxDQUNsRCxLQUFLLENBQUMsTUFBTSxDQUFDLEVBQ2IsTUFBTSxDQUFDLElBQUksQ0FBQyx5QkFBeUIsQ0FBQyxDQUN6QyxDQUFDO1FBRUYscUJBQUksb0JBQW9CLEdBQUcsY0FBYyxDQUFDLFNBQVMsQ0FDL0MsSUFBSSxDQUFDLDBCQUEwQixDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FDN0MsQ0FBQztRQUVGLHFCQUFJLGtCQUFrQixHQUFHLFlBQVksQ0FBQyxTQUFTLENBQUM7WUFDNUMsSUFBSSxVQUFVLENBQUMsTUFBTTtnQkFDakIsa0JBQWtCLENBQUMsV0FBVyxFQUFFLENBQUM7O2dCQUVqQyxVQUFVLENBQUMsV0FBVyxDQUFDLG9CQUFvQixFQUFFLEdBQUcsQ0FBQyxDQUFDO1NBQ3pELENBQUMsQ0FBQztRQUVILE9BQU8sY0FBYyxDQUFDOzs7Ozs7SUFHbEIsd0RBQXlCOzs7O2NBQUMsSUFBUztRQUN2QyxJQUFHLElBQUksQ0FBQyxPQUFPLElBQUksb0JBQW9CLElBQUksSUFBSSxDQUFDLE9BQU8sSUFBSSxhQUFhO1lBQ3BFLE9BQU8sSUFBSSxDQUFDOzs7Ozs7Ozs7SUFVWixnREFBaUI7Ozs7Ozs7Y0FBQyxJQUFZO1FBQ2xDLElBQUksSUFBSSxJQUFJLElBQUksSUFBSSxJQUFJLENBQUMsU0FBUyxDQUFDLFNBQVMsSUFBSSxJQUFJO1lBQ2hELE9BQU8sSUFBSSxDQUFDO1FBRWhCLE9BQU8sSUFBSSxDQUFDLFNBQVMsQ0FBQyxTQUFTLENBQUMsSUFBSSxDQUNoQyxVQUFBLFFBQVEsSUFBSSxPQUFBLFFBQVEsQ0FBQyxJQUFJLEtBQUssSUFBSSxHQUFBLENBQ3JDLENBQUM7OztnQkF6bUJULFVBQVU7Ozs7Z0JBekJQLElBQUk7Z0JBRkMsY0FBYyx1QkFrRWQsUUFBUTtnQkFsRVEsTUFBTSx1QkFtRXRCLFFBQVE7OytCQXBFakI7Ozs7Ozs7QUNBQTtJQXNDSTtLQUFpQjs7Z0JBbkNwQixTQUFTLFNBQUM7b0JBQ1AsUUFBUSxFQUFJLFFBQVE7b0JBQ3BCLFFBQVEsRUFBRSw2S0FNVDtvQkFDRCxNQUFNLEVBQUUsQ0FBQyxnZEF1QlIsQ0FBQztpQkFDTDs7Ozt5QkFwQ0Q7Ozs7Ozs7QUNBQTtJQXNCSSw0QkFDVyxjQUNBLGlCQUNBO1FBSFgsaUJBWUM7UUFYVSxpQkFBWSxHQUFaLFlBQVk7UUFDWixvQkFBZSxHQUFmLGVBQWU7UUFDZixZQUFPLEdBQVAsT0FBTztRQUVkLElBQUksQ0FBQyxZQUFZLENBQUMsUUFBUSxDQUFDLFlBQVksQ0FBQyxDQUFDO1FBQ3pDLElBQUksQ0FBQyxZQUFZLENBQUMsT0FBTyxDQUFDLFNBQVMsQ0FDL0IsVUFBQyxJQUFnQixJQUFLLE9BQUEsS0FBSSxDQUFDLGVBQWUsQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLENBQUMsU0FBUyxDQUM3RCxVQUFDLEdBQVEsSUFBTyxPQUFBLEtBQUksQ0FBQyxjQUFjLENBQUMsR0FBRyxDQUFDLEdBQUEsRUFDeEMsVUFBQyxLQUFVLElBQUssT0FBQSxLQUFJLENBQUMsWUFBWSxDQUFDLEtBQUssQ0FBQyxHQUFBLENBQzNDLEdBQUEsQ0FDSixDQUFDO0tBQ0w7Ozs7O0lBRU8sMkNBQWM7Ozs7Y0FBQyxJQUFTO1FBQzVCLElBQUksQ0FBQyxPQUFPLEdBQUcsSUFBSSxDQUFDO1FBQ3BCLElBQUksQ0FBQyxZQUFZLENBQUMsWUFBWSxFQUFFLENBQUM7UUFDakMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxRQUFRLENBQUMsQ0FBQyxZQUFZLENBQUMsQ0FBQyxDQUFDOzs7Ozs7SUFHbEMseUNBQVk7Ozs7Y0FBQyxLQUFVO1FBQzNCLElBQUksQ0FBQyxPQUFPLEdBQUcsS0FBSyxDQUFDLElBQUksRUFBRSxDQUFDLE1BQU0sQ0FBQztRQUNuQyxJQUFJLENBQUMsWUFBWSxDQUFDLFlBQVksRUFBRSxDQUFDOzs7Z0JBcEN4QyxTQUFTLFNBQUM7b0JBQ1AsUUFBUSxFQUFJLGFBQWE7b0JBQ3pCLFNBQVMsRUFBRyxDQUFDLGNBQWMsQ0FBQztvQkFDNUIsUUFBUSxFQUFFLG9NQUtUO2lCQUNKOzs7O2dCQVpRLGNBQWM7Z0JBSGQsb0JBQW9CO2dCQURwQixNQUFNOzs2QkFEZjs7Ozs7OztBQ0FBO0lBc0JJLDRCQUNXLGNBQ0EsaUJBQ0E7UUFIWCxpQkFZQztRQVhVLGlCQUFZLEdBQVosWUFBWTtRQUNaLG9CQUFlLEdBQWYsZUFBZTtRQUNmLFlBQU8sR0FBUCxPQUFPO1FBRWQsSUFBSSxDQUFDLFlBQVksQ0FBQyxRQUFRLENBQUMsWUFBWSxDQUFDLENBQUM7UUFDekMsSUFBSSxDQUFDLFlBQVksQ0FBQyxPQUFPLENBQUMsU0FBUyxDQUMvQixVQUFDLElBQWtCLElBQUssT0FBQSxLQUFJLENBQUMsZUFBZSxDQUFDLGVBQWUsQ0FBQyxJQUFJLENBQUMsQ0FBQyxTQUFTLENBQ3hFLFVBQUEsR0FBRyxJQUFTLE9BQUEsS0FBSSxDQUFDLGNBQWMsQ0FBQyxHQUFHLENBQUMsR0FBQSxFQUNwQyxVQUFBLEtBQUssSUFBTyxPQUFBLEtBQUksQ0FBQyxZQUFZLENBQUMsS0FBSyxDQUFDLEdBQUEsQ0FDdkMsR0FBQSxDQUNKLENBQUM7S0FDTDs7Ozs7SUFFTywyQ0FBYzs7OztjQUFDLElBQVM7UUFDNUIsSUFBSSxDQUFDLE9BQU8sR0FBRyxJQUFJLENBQUM7UUFDcEIsSUFBSSxDQUFDLFlBQVksQ0FBQyxZQUFZLEVBQUUsQ0FBQztRQUNqQyxJQUFJLENBQUMsT0FBTyxDQUFDLFFBQVEsQ0FBQyxDQUFDLFlBQVksQ0FBQyxDQUFDLENBQUM7Ozs7OztJQUdsQyx5Q0FBWTs7OztjQUFDLEtBQVU7UUFDM0IsSUFBSSxDQUFDLE9BQU8sR0FBRyxLQUFLLENBQUMsSUFBSSxFQUFFLENBQUMsTUFBTSxDQUFDLGFBQWEsQ0FBQztRQUNqRCxJQUFJLENBQUMsWUFBWSxDQUFDLFlBQVksRUFBRSxDQUFDOzs7Z0JBcEN4QyxTQUFTLFNBQUM7b0JBQ1AsUUFBUSxFQUFRLGFBQWE7b0JBQzdCLFNBQVMsRUFBTyxDQUFDLGNBQWMsQ0FBQztvQkFDaEMsUUFBUSxFQUFFLG9NQUtUO2lCQUNKOzs7O2dCQVpRLGNBQWM7Z0JBSGQsb0JBQW9CO2dCQURwQixNQUFNOzs2QkFEZjs7Ozs7OztBQ0FBO0lBaUNJLG1DQUNZLGNBQ0E7UUFGWixpQkFXQztRQVZXLGlCQUFZLEdBQVosWUFBWTtRQUNaLG9CQUFlLEdBQWYsZUFBZTswQkFKTCxLQUFLO1FBTXZCLElBQUksQ0FBQyxZQUFZLENBQUMsUUFBUSxDQUFDLG1CQUFtQixDQUFDLENBQUM7UUFDaEQsSUFBSSxDQUFDLFlBQVksQ0FBQyxPQUFPLENBQUMsU0FBUyxDQUMvQixVQUFDLElBQXVCLElBQUssT0FBQSxLQUFJLENBQUMsZUFBZSxDQUFDLGFBQWEsQ0FBQyxJQUFJLENBQUMsQ0FBQyxTQUFTLENBQzNFLFVBQUEsR0FBRyxJQUFTLE9BQUEsS0FBSSxDQUFDLGNBQWMsRUFBRSxHQUFBLEVBQ2pDLFVBQUEsS0FBSyxJQUFPLE9BQUEsS0FBSSxDQUFDLFlBQVksRUFBRSxHQUFBLENBQ2xDLEdBQUEsQ0FDSixDQUFDO0tBQ0w7Ozs7SUFFTyxrREFBYzs7OztRQUNsQixJQUFJLENBQUMsVUFBVSxHQUFHLElBQUksQ0FBQzs7Ozs7SUFHbkIsZ0RBQVk7Ozs7UUFDaEIsSUFBSSxDQUFDLFVBQVUsR0FBRyxJQUFJLENBQUM7OztnQkE1QzlCLFNBQVMsU0FBQztvQkFDUCxRQUFRLEVBQVEsb0JBQW9CO29CQUNwQyxTQUFTLEVBQU8sQ0FBQyxjQUFjLENBQUM7b0JBQ2hDLFFBQVEsRUFBRSw0WkFPVDtvQkFDRCxNQUFNLEVBQUUsQ0FBQyw4T0FTUixDQUFDO2lCQUNMOzs7O2dCQXhCUSxjQUFjO2dCQUhkLG9CQUFvQjs7b0NBRDdCOzs7Ozs7O0FDQUE7SUFxQkksb0NBQ1csY0FDQSxpQkFDQTtRQUhYLGlCQVlDO1FBWFUsaUJBQVksR0FBWixZQUFZO1FBQ1osb0JBQWUsR0FBZixlQUFlO1FBQ2YsWUFBTyxHQUFQLE9BQU87UUFFZCxJQUFJLENBQUMsWUFBWSxDQUFDLFFBQVEsQ0FBQyxvQkFBb0IsQ0FBQyxDQUFDO1FBQ2pELElBQUksQ0FBQyxZQUFZLENBQUMsT0FBTyxDQUFDLFNBQVMsQ0FDL0IsVUFBQyxJQUF3QixJQUFLLE9BQUEsS0FBSSxDQUFDLGVBQWUsQ0FBQyxjQUFjLENBQUMsSUFBSSxDQUFDLENBQUMsU0FBUyxDQUM3RSxVQUFBLEdBQUcsSUFBUyxPQUFBLEtBQUksQ0FBQyxjQUFjLENBQUMsR0FBRyxDQUFDLEdBQUEsRUFDcEMsVUFBQSxLQUFLLElBQU8sT0FBQSxLQUFJLENBQUMsWUFBWSxDQUFDLEtBQUssQ0FBQyxHQUFBLENBQ3ZDLEdBQUEsQ0FDSixDQUFDO0tBQ0w7Ozs7O0lBRU8sbURBQWM7Ozs7Y0FBQyxJQUFTO1FBQzVCLElBQUksQ0FBQyxPQUFPLENBQUMsUUFBUSxDQUFDLENBQUMsaUJBQWlCLENBQUMsQ0FBQyxDQUFDOzs7Ozs7SUFHdkMsaURBQVk7Ozs7Y0FBQyxLQUFVO1FBQzNCLElBQUksQ0FBQyxPQUFPLEdBQUcsS0FBSyxDQUFDLElBQUksRUFBRSxDQUFDLE1BQU0sQ0FBQztRQUNuQyxJQUFJLENBQUMsWUFBWSxDQUFDLFlBQVksRUFBRSxDQUFDOzs7Z0JBakN4QyxTQUFTLFNBQUM7b0JBQ1AsUUFBUSxFQUFJLHFCQUFxQjtvQkFDakMsU0FBUyxFQUFHLENBQUMsY0FBYyxDQUFDO29CQUM1QixRQUFRLEVBQUUsdUtBSVQ7aUJBQ0o7Ozs7Z0JBWFEsY0FBYztnQkFIZCxvQkFBb0I7Z0JBRHBCLE1BQU07O3FDQURmOzs7Ozs7O0FDQ0EsQUFVQSxxQkFBTSxNQUFNLEdBQVcsQ0FBQztRQUNoQixJQUFJLEVBQUUsU0FBUztRQUNmLFNBQVMsRUFBRSxjQUFjO1FBQ3pCLFFBQVEsRUFBRTtZQUNOLEVBQUUsSUFBSSxFQUFFLFNBQVMsRUFBRSxTQUFTLEVBQUUsa0JBQWtCLEVBQUU7WUFDbEQsRUFBRSxJQUFJLEVBQUUsU0FBUyxFQUFFLFNBQVMsRUFBRSxrQkFBa0IsRUFBRTtZQUNsRCxFQUFFLElBQUksRUFBRSxnQkFBZ0IsRUFBRSxTQUFTLEVBQUUseUJBQXlCLEVBQUU7WUFDaEU7Z0JBQ0ksSUFBSSxFQUFFLGlCQUFpQjtnQkFDdkIsU0FBUyxFQUFFLDBCQUEwQjtnQkFDckMsV0FBVyxFQUFFLENBQUMsb0JBQW9CLENBQUM7YUFDdEM7U0FDSjtLQUNSLENBQUMsQ0FBQztBQUVILHFCQUFhLFNBQVMsR0FBRyxZQUFZLENBQUMsUUFBUSxDQUFDLE1BQU0sQ0FBQzs7Ozs7O0FDMUJ0RDs7OztnQkFjQyxRQUFRLFNBQUM7b0JBQ04sT0FBTyxFQUFFO3dCQUNMLFlBQVk7d0JBQ1osWUFBWTt3QkFDWixlQUFlO3dCQUNmLFNBQVM7cUJBQ1o7b0JBQ0QsWUFBWSxFQUFFO3dCQUNWLGNBQWM7d0JBQ2Qsa0JBQWtCO3dCQUNsQixrQkFBa0I7d0JBQ2xCLHlCQUF5Qjt3QkFDekIsMEJBQTBCO3FCQUM3QjtpQkFDSjs7c0JBNUJEOzs7Ozs7Ozs7Ozs7Ozs7In0=