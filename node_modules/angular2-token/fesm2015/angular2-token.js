import { Injectable, EventEmitter, Component, Input, NgModule, Optional } from '@angular/core';
import { FormGroup, FormControl, Validators, ReactiveFormsModule } from '@angular/forms';
import { CommonModule } from '@angular/common';
import { RouterModule, ActivatedRoute, Router } from '@angular/router';
import { Http, Headers, Request, RequestMethod, RequestOptions } from '@angular/http';
import { interval, fromEvent } from 'rxjs';
import { share, pluck, filter } from 'rxjs/operators';

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes} checked by tsc
 */
class A2tFormService {
    constructor() {
        this.submit$ = new EventEmitter();
        this.submitLock = false;
    }
    /**
     * @param {?} fields
     * @return {?}
     */
    initForm(fields) {
        this.fields = fields;
        this._createFormGroup();
    }
    /**
     * @return {?}
     */
    submit() {
        this.submitLock = true;
        this.submit$.emit(this.formGroup.value);
    }
    /**
     * @return {?}
     */
    unlockSubmit() {
        this.formGroup.reset();
        this.submitLock = false;
    }
    ;
    /**
     * @return {?}
     */
    _createFormGroup() {
        let /** @type {?} */ group = {};
        this.fields.forEach(question => {
            group[question.key] = new FormControl(null, question.validators);
        });
        this.formGroup = new FormGroup(group);
    }
}
A2tFormService.decorators = [
    { type: Injectable },
];
/** @nocollapse */
A2tFormService.ctorParameters = () => [];

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes} checked by tsc
 */
class A2tFormComponent {
    /**
     * @param {?} _formService
     */
    constructor(_formService) {
        this._formService = _formService;
    }
}
A2tFormComponent.decorators = [
    { type: Component, args: [{
                selector: 'a2t-form',
                template: `
        <form class="a2t-form"
            (ngSubmit)="_formService.submit()"
            [formGroup]="_formService.formGroup">

            <a2t-form-field
                *ngFor="let field of this._formService.fields"
                [question]="field"
                [form]="_formService.formGroup">
            </a2t-form-field>

            <button type="submit" [disabled]="!_formService.formGroup.valid || _formService.formGroup.pristine || _formService.submitLock">
                <ng-content *ngIf="!_formService.submitLock"></ng-content>
                <span *ngIf="_formService.submitLock">Submitting ...</span>
            </button>
        </form>
    `,
                styles: [`
        .a2t-form {
            background-color: white;
            border-radius: 3px;
            box-shadow: 0px 1px 5px 0 rgba(0,0,0,0.3);
            padding-top: 20px;
            font-family: "Segoe UI", "Helvetica Neue", Arial, sans-serif;
        }

        .a2t-form button {
            width: 100%;

            transition: .3s;
            background-color: #72c380;

            border-bottom-right-radius: 3px;
            border-bottom-left-radius: 3px;

            outline: none;
            text-align: center;
            font-weight: 400;
            border: none;
            font-size: 16px;
            line-height: 30px;

            text-shadow: 0 1px 2px rgba(0, 0, 0, 0.25);
            color: white;
            border-bottom: 3px solid transparent;
        }

        .a2t-form button:disabled {
            background-color: #eee !important;
            cursor: not-allowed;
            color: #999;
            text-shadow: none;
        }

        .a2t-form button:hover {
            background-color: #a6d9ae;
        }
    `]
            },] },
];
/** @nocollapse */
A2tFormComponent.ctorParameters = () => [
    { type: A2tFormService }
];

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes} checked by tsc
 */
class BaseField {
    /**
     * @param {?=} options
     */
    constructor(options = {}) {
        this.value = options.value;
        this.key = options.key || '';
        this.label = options.label || '';
        this.validators = options.validators === undefined ? [] : options.validators;
        this.type = options.type || '';
    }
}
const /** @type {?} */ SIGN_IN_FORM = [
    new BaseField({
        key: 'email',
        label: 'Email',
        type: 'text',
        validators: [
            Validators.required,
            Validators.minLength(8)
        ]
    }),
    new BaseField({
        key: 'password',
        label: 'Password',
        type: 'password',
        validators: [
            Validators.required,
            Validators.minLength(8)
        ]
    })
];
const /** @type {?} */ SIGN_UP_FORM = [
    new BaseField({
        key: 'email',
        label: 'Email',
        type: 'text',
        validators: [
            Validators.required,
            Validators.minLength(8)
        ]
    }),
    new BaseField({
        key: 'password',
        label: 'Password',
        type: 'password',
        validators: [
            Validators.required,
            Validators.minLength(8)
        ]
    }),
    new BaseField({
        key: 'passwordConfirmation',
        label: 'Password Confirmation',
        type: 'password',
        validators: [
            Validators.required,
            Validators.minLength(8)
        ]
    })
];
const /** @type {?} */ RESET_PASSWORD_FORM = [
    new BaseField({
        key: 'email',
        label: 'Email',
        type: 'text',
        validators: [
            Validators.required,
            Validators.minLength(8)
        ]
    })
];
const /** @type {?} */ UPDATE_PASSWORD_FORM = [
    new BaseField({
        key: 'password',
        label: 'Password',
        type: 'password',
        validators: [
            Validators.required,
            Validators.minLength(8)
        ]
    }),
    new BaseField({
        key: 'passwordConfirmation',
        label: 'Password Confirmation',
        type: 'password',
        validators: [
            Validators.required,
            Validators.minLength(8)
        ]
    }),
    new BaseField({
        key: 'passwordCurrent',
        label: 'Old Password',
        type: 'password',
        validators: [
            Validators.required,
            Validators.minLength(8)
        ]
    })
];

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes} checked by tsc
 */
class A2tFormFieldComponent {
    /**
     * @return {?}
     */
    ngOnInit() {
        this._control = this.form.controls[this.question.key];
    }
    /**
     * @return {?}
     */
    get isValid() {
        return this._control.valid;
    }
}
A2tFormFieldComponent.decorators = [
    { type: Component, args: [{
                selector: 'a2t-form-field',
                template: `
        <div class="a2t-input-group"
            [formGroup]="form">

            <label
                [attr.for]="question.key"
                *ngIf="_control.pristine">
                {{question.label}}
            </label>

            <label class="a2t-error"
                [attr.for]="question.key"
                *ngIf="_control.hasError('required') && !_control.pristine">
                {{question.label}} is required
            </label>

            <label class="a2t-error"
                [attr.for]="question.key"
                *ngIf="_control.hasError('minlength')">
                {{question.label}} is too short
            </label>

            <label class="a2t-error"
                [attr.for]="question.key"
                *ngIf="_control.hasError('maxlength')">
                {{question.label}} is too long
            </label>

            <label class="a2t-valid"
                [attr.for]="question.key"
                *ngIf="_control.valid && !_control.pristine">
                {{question.label}}
            </label>

            <input
                [formControlName]="question.key"
                [id]="question.key"
                [type]="question.type">
        </div>
    `,
                styles: [`
        .a2t-input-group {
            padding-bottom: 40px;
            padding-right: 20px;
            padding-left: 20px;
            font-family: "Segoe UI", "Helvetica Neue", Arial, sans-serif;
        }

        .a2t-input-group input {
            width: 100%;
            outline: none;
            border: none;
            background-color: #eee;
            line-height: 40px;

            padding-left: 10px;
            padding-right: 10px;
        }

        .a2t-input-group label {
            color: #666;
            font-weight: 600;
            font-size: 13px;
            margin-bottom: 0;
        }

        .a2t-error {
            color: #df6564 !important;
        }

        .a2t-valid {
            color: #72c380 !important;
        }
    `]
            },] },
];
A2tFormFieldComponent.propDecorators = {
    question: [{ type: Input }],
    form: [{ type: Input }]
};

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes} checked by tsc
 */
class A2tLinksComponent {
    constructor() { }
}
A2tLinksComponent.decorators = [
    { type: Component, args: [{
                selector: 'a2t-links',
                template: `
        <div class="a2t-wrapper">
            <p><a routerLink="/session/reset-password" *ngIf="case != 'reset-password'">Forgot Password?</a></p>
            <p><a routerLink="/session/sign-up" *ngIf="case != 'sign-up'">Sign Up</a></p>
            <p><a routerLink="/session/sign-in" *ngIf="case != 'sign-in'">Sign In</a></p>
        </div>
    `,
                styles: [`
        .a2t-wrapper {
            margin-top: 20px;
        }

        p {
            margin-bottom: 0;
        }

        a {
            color: #eee !important;
            transition: .3s;
            text-decoration: none;
            font-size: 15px;
            font-weight: 300;
            font-family: "Segoe UI", "Helvetica Neue", Arial, sans-serif;
        }

        a:hover {
            color: white;
        }
    `]
            },] },
];
/** @nocollapse */
A2tLinksComponent.ctorParameters = () => [];
A2tLinksComponent.propDecorators = {
    case: [{ type: Input }]
};

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes} checked by tsc
 */
class A2tErrorComponent {
    constructor() { }
}
A2tErrorComponent.decorators = [
    { type: Component, args: [{
                selector: 'a2t-error',
                template: '<div *ngFor="let error of errors"><p>{{error}}</p></div>',
                styles: [`
        div {
            width: 100%;
            background-color: #df6564;
            color: white;
            font-weight: 300;
            font-size: 15px;
            padding: 10px 20px;
            border-radius: 3px;
            margin-bottom: 15px;
        }

        div > p {
            margin-bottom: 0;
        }
    `]
            },] },
];
/** @nocollapse */
A2tErrorComponent.ctorParameters = () => [];
A2tErrorComponent.propDecorators = {
    errors: [{ type: Input }]
};

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes} checked by tsc
 */
class A2tHeadlineComponent {
    constructor() { }
}
A2tHeadlineComponent.decorators = [
    { type: Component, args: [{
                selector: 'a2t-headline',
                template: '<p><ng-content></ng-content></p>',
                styles: [`
        p {
            text-align: center;
            color: white;
            font-size: 30px;
        }
    `]
            },] },
];
/** @nocollapse */
A2tHeadlineComponent.ctorParameters = () => [];

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes} checked by tsc
 */
class A2tSharedModule {
}
A2tSharedModule.decorators = [
    { type: NgModule, args: [{
                imports: [
                    CommonModule,
                    ReactiveFormsModule,
                    RouterModule
                ],
                declarations: [
                    A2tFormFieldComponent,
                    A2tFormComponent,
                    A2tLinksComponent,
                    A2tErrorComponent,
                    A2tHeadlineComponent
                ],
                exports: [
                    A2tFormComponent,
                    A2tLinksComponent,
                    A2tErrorComponent,
                    A2tHeadlineComponent
                ]
            },] },
];

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes} checked by tsc
 */
class Angular2TokenService {
    /**
     * @param {?} http
     * @param {?} activatedRoute
     * @param {?} router
     */
    constructor(http, activatedRoute, router) {
        this.http = http;
        this.activatedRoute = activatedRoute;
        this.router = router;
    }
    /**
     * @return {?}
     */
    get currentUserType() {
        if (this.atCurrentUserType != null)
            return this.atCurrentUserType.name;
        else
            return null;
    }
    /**
     * @return {?}
     */
    get currentUserData() {
        return this.atCurrentUserData;
    }
    /**
     * @return {?}
     */
    get currentAuthData() {
        return this.atCurrentAuthData;
    }
    /**
     * @return {?}
     */
    get currentAuthHeaders() {
        if (this.atCurrentAuthData != null) {
            return new Headers({
                'access-token': this.atCurrentAuthData.accessToken,
                'client': this.atCurrentAuthData.client,
                'expiry': this.atCurrentAuthData.expiry,
                'token-type': this.atCurrentAuthData.tokenType,
                'uid': this.atCurrentAuthData.uid
            });
        }
        return new Headers;
    }
    /**
     * @return {?}
     */
    userSignedIn() {
        return !!this.atCurrentAuthData;
    }
    /**
     * @return {?}
     */
    canActivate() {
        if (this.userSignedIn())
            return true;
        else {
            // Store current location in storage (usefull for redirection after signing in)
            if (this.atOptions.signInStoredUrlStorageKey) {
                localStorage.setItem(this.atOptions.signInStoredUrlStorageKey, window.location.pathname + window.location.search);
            }
            // Redirect user to sign in if signInRedirect is set
            if (this.router && this.atOptions.signInRedirect)
                this.router.navigate([this.atOptions.signInRedirect]);
            return false;
        }
    }
    /**
     * @param {?=} options
     * @return {?}
     */
    init(options) {
        let /** @type {?} */ defaultOptions = {
            apiPath: null,
            apiBase: null,
            signInPath: 'auth/sign_in',
            signInRedirect: null,
            signInStoredUrlStorageKey: null,
            signOutPath: 'auth/sign_out',
            validateTokenPath: 'auth/validate_token',
            signOutFailedValidate: false,
            registerAccountPath: 'auth',
            deleteAccountPath: 'auth',
            registerAccountCallback: window.location.href,
            updatePasswordPath: 'auth',
            resetPasswordPath: 'auth/password',
            resetPasswordCallback: window.location.href,
            userTypes: null,
            oAuthBase: window.location.origin,
            oAuthPaths: {
                github: 'auth/github'
            },
            oAuthCallbackPath: 'oauth_callback',
            oAuthWindowType: 'newWindow',
            oAuthWindowOptions: null,
            globalOptions: {
                headers: {
                    'Content-Type': 'application/json',
                    'Accept': 'application/json'
                }
            }
        };
        this.atOptions = (/** @type {?} */ (Object)).assign(defaultOptions, options);
        this.tryLoadAuthData();
    }
    /**
     *
     * Actions
     *
     * @param {?} registerData
     * @return {?}
     */
    registerAccount(registerData) {
        if (registerData.userType == null)
            this.atCurrentUserType = null;
        else {
            this.atCurrentUserType = this.getUserTypeByName(registerData.userType);
            delete registerData.userType;
        }
        if (registerData["password_confirmation"] == null &&
            registerData.passwordConfirmation != null) {
            registerData["password_confirmation"] = registerData.passwordConfirmation;
            delete registerData.passwordConfirmation;
        }
        registerData["confirm_success_url"] = this.atOptions.registerAccountCallback;
        return this.post(this.getUserPath() + this.atOptions.registerAccountPath, JSON.stringify(registerData));
    }
    /**
     * @return {?}
     */
    deleteAccount() {
        return this.delete(this.getUserPath() + this.atOptions.deleteAccountPath);
    }
    /**
     * @param {?} signInData
     * @return {?}
     */
    signIn(signInData) {
        if (signInData.userType == null)
            this.atCurrentUserType = null;
        else
            this.atCurrentUserType = this.getUserTypeByName(signInData.userType);
        let /** @type {?} */ body = JSON.stringify({
            email: signInData.email,
            password: signInData.password
        });
        let /** @type {?} */ observ = this.post(this.getUserPath() + this.atOptions.signInPath, body);
        observ.subscribe(res => this.atCurrentUserData = res.json().data, _error => null);
        return observ;
    }
    /**
     * @param {?} oAuthType
     * @return {?}
     */
    signInOAuth(oAuthType) {
        let /** @type {?} */ oAuthPath = this.getOAuthPath(oAuthType);
        let /** @type {?} */ callbackUrl = `${window.location.origin}/${this.atOptions.oAuthCallbackPath}`;
        let /** @type {?} */ oAuthWindowType = this.atOptions.oAuthWindowType;
        let /** @type {?} */ authUrl = this.getOAuthUrl(oAuthPath, callbackUrl, oAuthWindowType);
        if (oAuthWindowType == 'newWindow') {
            let /** @type {?} */ oAuthWindowOptions = this.atOptions.oAuthWindowOptions;
            let /** @type {?} */ windowOptions = '';
            if (oAuthWindowOptions) {
                for (let /** @type {?} */ key in oAuthWindowOptions) {
                    windowOptions += `,${key}=${oAuthWindowOptions[key]}`;
                }
            }
            let /** @type {?} */ popup = window.open(authUrl, '_blank', `closebuttoncaption=Cancel${windowOptions}`);
            return this.requestCredentialsViaPostMessage(popup);
        }
        else if (oAuthWindowType == 'sameWindow') {
            window.location.href = authUrl;
        }
        else {
            throw `Unsupported oAuthWindowType "${oAuthWindowType}"`;
        }
    }
    /**
     * @return {?}
     */
    processOAuthCallback() {
        this.getAuthDataFromParams();
    }
    /**
     * @return {?}
     */
    signOut() {
        let /** @type {?} */ observ = this.delete(this.getUserPath() + this.atOptions.signOutPath);
        localStorage.removeItem('accessToken');
        localStorage.removeItem('client');
        localStorage.removeItem('expiry');
        localStorage.removeItem('tokenType');
        localStorage.removeItem('uid');
        this.atCurrentAuthData = null;
        this.atCurrentUserType = null;
        this.atCurrentUserData = null;
        return observ;
    }
    /**
     * @return {?}
     */
    validateToken() {
        let /** @type {?} */ observ = this.get(this.getUserPath() + this.atOptions.validateTokenPath);
        observ.subscribe(res => this.atCurrentUserData = res.json().data, error => {
            if (error.status === 401 && this.atOptions.signOutFailedValidate) {
                this.signOut();
            }
        });
        return observ;
    }
    /**
     * @param {?} updatePasswordData
     * @return {?}
     */
    updatePassword(updatePasswordData) {
        if (updatePasswordData.userType != null)
            this.atCurrentUserType = this.getUserTypeByName(updatePasswordData.userType);
        let /** @type {?} */ args;
        if (updatePasswordData.passwordCurrent == null) {
            args = {
                password: updatePasswordData.password,
                password_confirmation: updatePasswordData.passwordConfirmation
            };
        }
        else {
            args = {
                current_password: updatePasswordData.passwordCurrent,
                password: updatePasswordData.password,
                password_confirmation: updatePasswordData.passwordConfirmation
            };
        }
        if (updatePasswordData.resetPasswordToken) {
            args.reset_password_token = updatePasswordData.resetPasswordToken;
        }
        let /** @type {?} */ body = JSON.stringify(args);
        return this.put(this.getUserPath() + this.atOptions.updatePasswordPath, body);
    }
    /**
     * @param {?} resetPasswordData
     * @return {?}
     */
    resetPassword(resetPasswordData) {
        if (resetPasswordData.userType == null)
            this.atCurrentUserType = null;
        else
            this.atCurrentUserType = this.getUserTypeByName(resetPasswordData.userType);
        let /** @type {?} */ body = JSON.stringify({
            email: resetPasswordData.email,
            redirect_url: this.atOptions.resetPasswordCallback
        });
        return this.post(this.getUserPath() + this.atOptions.resetPasswordPath, body);
    }
    /**
     *
     * HTTP Wrappers
     *
     * @param {?} url
     * @param {?=} options
     * @return {?}
     */
    get(url, options) {
        return this.request(this.mergeRequestOptionsArgs({
            url: this.getApiPath() + url,
            method: RequestMethod.Get
        }, options));
    }
    /**
     * @param {?} url
     * @param {?} body
     * @param {?=} options
     * @return {?}
     */
    post(url, body, options) {
        return this.request(this.mergeRequestOptionsArgs({
            url: this.getApiPath() + url,
            method: RequestMethod.Post,
            body: body
        }, options));
    }
    /**
     * @param {?} url
     * @param {?} body
     * @param {?=} options
     * @return {?}
     */
    put(url, body, options) {
        return this.request(this.mergeRequestOptionsArgs({
            url: this.getApiPath() + url,
            method: RequestMethod.Put,
            body: body
        }, options));
    }
    /**
     * @param {?} url
     * @param {?=} options
     * @return {?}
     */
    delete(url, options) {
        return this.request(this.mergeRequestOptionsArgs({
            url: this.getApiPath() + url,
            method: RequestMethod.Delete
        }, options));
    }
    /**
     * @param {?} url
     * @param {?} body
     * @param {?=} options
     * @return {?}
     */
    patch(url, body, options) {
        return this.request(this.mergeRequestOptionsArgs({
            url: this.getApiPath() + url,
            method: RequestMethod.Patch,
            body: body
        }, options));
    }
    /**
     * @param {?} path
     * @param {?=} options
     * @return {?}
     */
    head(path, options) {
        return this.request({
            method: RequestMethod.Head,
            url: this.getApiPath() + path
        });
    }
    /**
     * @param {?} url
     * @param {?=} options
     * @return {?}
     */
    options(url, options) {
        return this.request(this.mergeRequestOptionsArgs({
            url: this.getApiPath() + url,
            method: RequestMethod.Options
        }, options));
    }
    /**
     * @param {?} options
     * @return {?}
     */
    request(options) {
        let /** @type {?} */ baseRequestOptions;
        let /** @type {?} */ baseHeaders = this.atOptions.globalOptions.headers;
        // Get auth data from local storage
        this.getAuthDataFromStorage();
        // Merge auth headers to request if set
        if (this.atCurrentAuthData != null) {
            (/** @type {?} */ (Object)).assign(baseHeaders, {
                'access-token': this.atCurrentAuthData.accessToken,
                'client': this.atCurrentAuthData.client,
                'expiry': this.atCurrentAuthData.expiry,
                'token-type': this.atCurrentAuthData.tokenType,
                'uid': this.atCurrentAuthData.uid
            });
        }
        baseRequestOptions = new RequestOptions({
            headers: new Headers(baseHeaders)
        });
        // Merge standard and custom RequestOptions
        baseRequestOptions = baseRequestOptions.merge(options);
        let /** @type {?} */ response = this.http.request(new Request(baseRequestOptions)).pipe(share());
        this.handleResponse(response);
        return response;
    }
    /**
     * @param {?} options
     * @param {?=} addOptions
     * @return {?}
     */
    mergeRequestOptionsArgs(options, addOptions) {
        let /** @type {?} */ returnOptions = options;
        if (options)
            (/** @type {?} */ (Object)).assign(returnOptions, addOptions);
        return returnOptions;
    }
    /**
     * @param {?} response
     * @return {?}
     */
    handleResponse(response) {
        response.subscribe(res => {
            this.getAuthHeadersFromResponse(/** @type {?} */ (res));
        }, error => {
            this.getAuthHeadersFromResponse(/** @type {?} */ (error));
        });
    }
    /**
     *
     * Get Auth Data
     *
     * @return {?}
     */
    tryLoadAuthData() {
        let /** @type {?} */ userType = this.getUserTypeByName(localStorage.getItem('userType'));
        if (userType)
            this.atCurrentUserType = userType;
        this.getAuthDataFromStorage();
        if (this.activatedRoute)
            this.getAuthDataFromParams();
        if (this.atCurrentAuthData)
            this.validateToken();
    }
    /**
     * @param {?} data
     * @return {?}
     */
    getAuthHeadersFromResponse(data) {
        let /** @type {?} */ headers = data.headers;
        let /** @type {?} */ authData = {
            accessToken: headers.get('access-token'),
            client: headers.get('client'),
            expiry: headers.get('expiry'),
            tokenType: headers.get('token-type'),
            uid: headers.get('uid')
        };
        this.setAuthData(authData);
    }
    /**
     * @param {?} data
     * @return {?}
     */
    getAuthDataFromPostMessage(data) {
        let /** @type {?} */ authData = {
            accessToken: data['auth_token'],
            client: data['client_id'],
            expiry: data['expiry'],
            tokenType: 'Bearer',
            uid: data['uid']
        };
        this.setAuthData(authData);
    }
    /**
     * @return {?}
     */
    getAuthDataFromStorage() {
        let /** @type {?} */ authData = {
            accessToken: localStorage.getItem('accessToken'),
            client: localStorage.getItem('client'),
            expiry: localStorage.getItem('expiry'),
            tokenType: localStorage.getItem('tokenType'),
            uid: localStorage.getItem('uid')
        };
        if (this.checkAuthData(authData))
            this.atCurrentAuthData = authData;
    }
    /**
     * @return {?}
     */
    getAuthDataFromParams() {
        if (this.activatedRoute.queryParams)
            // Fix for Testing, needs to be removed later
            this.activatedRoute.queryParams.subscribe(queryParams => {
                let /** @type {?} */ authData = {
                    accessToken: queryParams['token'] || queryParams['auth_token'],
                    client: queryParams['client_id'],
                    expiry: queryParams['expiry'],
                    tokenType: 'Bearer',
                    uid: queryParams['uid']
                };
                if (this.checkAuthData(authData))
                    this.atCurrentAuthData = authData;
            });
    }
    /**
     *
     * Set Auth Data
     *
     * @param {?} authData
     * @return {?}
     */
    setAuthData(authData) {
        if (this.checkAuthData(authData)) {
            this.atCurrentAuthData = authData;
            localStorage.setItem('accessToken', authData.accessToken);
            localStorage.setItem('client', authData.client);
            localStorage.setItem('expiry', authData.expiry);
            localStorage.setItem('tokenType', authData.tokenType);
            localStorage.setItem('uid', authData.uid);
            if (this.atCurrentUserType != null)
                localStorage.setItem('userType', this.atCurrentUserType.name);
        }
    }
    /**
     *
     * Validate Auth Data
     *
     * @param {?} authData
     * @return {?}
     */
    checkAuthData(authData) {
        if (authData.accessToken != null &&
            authData.client != null &&
            authData.expiry != null &&
            authData.tokenType != null &&
            authData.uid != null) {
            if (this.atCurrentAuthData != null)
                return authData.expiry >= this.atCurrentAuthData.expiry;
            else
                return true;
        }
        else {
            return false;
        }
    }
    /**
     *
     * Construct Paths / Urls
     *
     * @return {?}
     */
    getUserPath() {
        if (this.atCurrentUserType == null)
            return '';
        else
            return this.atCurrentUserType.path + '/';
    }
    /**
     * @return {?}
     */
    getApiPath() {
        let /** @type {?} */ constructedPath = '';
        if (this.atOptions.apiBase != null)
            constructedPath += this.atOptions.apiBase + '/';
        if (this.atOptions.apiPath != null)
            constructedPath += this.atOptions.apiPath + '/';
        return constructedPath;
    }
    /**
     * @param {?} oAuthType
     * @return {?}
     */
    getOAuthPath(oAuthType) {
        let /** @type {?} */ oAuthPath;
        oAuthPath = this.atOptions.oAuthPaths[oAuthType];
        if (oAuthPath == null)
            oAuthPath = `/auth/${oAuthType}`;
        return oAuthPath;
    }
    /**
     * @param {?} oAuthPath
     * @param {?} callbackUrl
     * @param {?} windowType
     * @return {?}
     */
    getOAuthUrl(oAuthPath, callbackUrl, windowType) {
        let /** @type {?} */ url;
        url = `${this.atOptions.oAuthBase}/${oAuthPath}`;
        url += `?omniauth_window_type=${windowType}`;
        url += `&auth_origin_url=${encodeURIComponent(callbackUrl)}`;
        if (this.atCurrentUserType != null)
            url += `&resource_class=${this.atCurrentUserType.name}`;
        return url;
    }
    /**
     *
     * OAuth
     *
     * @param {?} authWindow
     * @return {?}
     */
    requestCredentialsViaPostMessage(authWindow) {
        let /** @type {?} */ pollerObserv = interval(500);
        let /** @type {?} */ responseObserv = fromEvent(window, 'message').pipe(pluck('data'), filter(this.oAuthWindowResponseFilter));
        let /** @type {?} */ responseSubscription = responseObserv.subscribe(this.getAuthDataFromPostMessage.bind(this));
        let /** @type {?} */ pollerSubscription = pollerObserv.subscribe(() => {
            if (authWindow.closed)
                pollerSubscription.unsubscribe();
            else
                authWindow.postMessage('requestCredentials', '*');
        });
        return responseObserv;
    }
    /**
     * @param {?} data
     * @return {?}
     */
    oAuthWindowResponseFilter(data) {
        if (data.message == 'deliverCredentials' || data.message == 'authFailure')
            return data;
    }
    /**
     *
     * Utilities
     *
     * @param {?} name
     * @return {?}
     */
    getUserTypeByName(name) {
        if (name == null || this.atOptions.userTypes == null)
            return null;
        return this.atOptions.userTypes.find(userType => userType.name === name);
    }
}
Angular2TokenService.decorators = [
    { type: Injectable },
];
/** @nocollapse */
Angular2TokenService.ctorParameters = () => [
    { type: Http },
    { type: ActivatedRoute, decorators: [{ type: Optional }] },
    { type: Router, decorators: [{ type: Optional }] }
];

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes} checked by tsc
 */
class A2tUiComponent {
    constructor() { }
}
A2tUiComponent.decorators = [
    { type: Component, args: [{
                selector: 'a2t-ui',
                template: `
        <div class="a2t-wrapper">
            <div class="a2t-container">
                <router-outlet></router-outlet>
            </div>
        </div>
    `,
                styles: [`
        .a2t-wrapper {
            width: 100%;
            height: 100vh;
            min-height: 500px;

            padding-top: 100px;

            display: flex;
            justify-content: center;

            background-color: #3270a0;
        }

        .a2t-logo {
            text-align: center;
            color: white;
            font-size: 30px;
        }

        .a2t-container {
            width: 400px;
        }
    `]
            },] },
];
/** @nocollapse */
A2tUiComponent.ctorParameters = () => [];

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes} checked by tsc
 */
class A2tSignInComponent {
    /**
     * @param {?} _formService
     * @param {?} _sessionService
     * @param {?} _router
     */
    constructor(_formService, _sessionService, _router) {
        this._formService = _formService;
        this._sessionService = _sessionService;
        this._router = _router;
        this._formService.initForm(SIGN_IN_FORM);
        this._formService.submit$.subscribe((data) => this._sessionService.signIn(data).subscribe((res) => this._handleSuccess(res), (error) => this._handleError(error)));
    }
    /**
     * @param {?} data
     * @return {?}
     */
    _handleSuccess(data) {
        this._errors = null;
        this._formService.unlockSubmit();
        this._router.navigate(['restricted']);
    }
    /**
     * @param {?} error
     * @return {?}
     */
    _handleError(error) {
        this._errors = error.json().errors;
        this._formService.unlockSubmit();
    }
}
A2tSignInComponent.decorators = [
    { type: Component, args: [{
                selector: 'a2t-sign-in',
                providers: [A2tFormService],
                template: `
        <a2t-headline>Sign In</a2t-headline>
        <a2t-error [errors]="_errors"></a2t-error>
        <a2t-form>Sign In</a2t-form>
        <a2t-links case="sign-in"></a2t-links>
    `
            },] },
];
/** @nocollapse */
A2tSignInComponent.ctorParameters = () => [
    { type: A2tFormService },
    { type: Angular2TokenService },
    { type: Router }
];

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes} checked by tsc
 */
class A2tSignUpComponent {
    /**
     * @param {?} _formService
     * @param {?} _sessionService
     * @param {?} _router
     */
    constructor(_formService, _sessionService, _router) {
        this._formService = _formService;
        this._sessionService = _sessionService;
        this._router = _router;
        this._formService.initForm(SIGN_UP_FORM);
        this._formService.submit$.subscribe((data) => this._sessionService.registerAccount(data).subscribe(res => this._handleSuccess(res), error => this._handleError(error)));
    }
    /**
     * @param {?} data
     * @return {?}
     */
    _handleSuccess(data) {
        this._errors = null;
        this._formService.unlockSubmit();
        this._router.navigate(['restricted']);
    }
    /**
     * @param {?} error
     * @return {?}
     */
    _handleError(error) {
        this._errors = error.json().errors.full_messages;
        this._formService.unlockSubmit();
    }
}
A2tSignUpComponent.decorators = [
    { type: Component, args: [{
                selector: 'a2t-sign-up',
                providers: [A2tFormService],
                template: `
        <a2t-headline>Sign Up</a2t-headline>
        <a2t-error [errors]="_errors"></a2t-error>
        <a2t-form>Sign Up</a2t-form>
        <a2t-links case="sign-up"></a2t-links>
    `
            },] },
];
/** @nocollapse */
A2tSignUpComponent.ctorParameters = () => [
    { type: A2tFormService },
    { type: Angular2TokenService },
    { type: Router }
];

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes} checked by tsc
 */
class A2tResetPasswordComponent {
    /**
     * @param {?} _formService
     * @param {?} _sessionService
     */
    constructor(_formService, _sessionService) {
        this._formService = _formService;
        this._sessionService = _sessionService;
        this._emailSend = false;
        this._formService.initForm(RESET_PASSWORD_FORM);
        this._formService.submit$.subscribe((data) => this._sessionService.resetPassword(data).subscribe(res => this._handleSuccess(), error => this._handleError()));
    }
    /**
     * @return {?}
     */
    _handleSuccess() {
        this._emailSend = true;
    }
    /**
     * @return {?}
     */
    _handleError() {
        this._emailSend = true;
    }
}
A2tResetPasswordComponent.decorators = [
    { type: Component, args: [{
                selector: 'a2t-reset-password',
                providers: [A2tFormService],
                template: `
        <a2t-headline *ngIf="!_emailSend">Reset your Password</a2t-headline>
        <a2t-form *ngIf="!_emailSend">Reset Password</a2t-form>
        <p class="email-send-text" *ngIf="_emailSend">
            If the entered email is registered we will send instruction on how to reset your password.
        </p>
        <a2t-links *ngIf="!_emailSend" case="reset-password"></a2t-links>
    `,
                styles: [`
        .email-send-text {
            background-color: #72c380;
            color: white;
            font-size: 16pt;
            text-align: center;
            padding: 20px;
            border-radius: 3px;
        }
    `]
            },] },
];
/** @nocollapse */
A2tResetPasswordComponent.ctorParameters = () => [
    { type: A2tFormService },
    { type: Angular2TokenService }
];

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes} checked by tsc
 */
class A2tUpdatePasswordComponent {
    /**
     * @param {?} _formService
     * @param {?} _sessionService
     * @param {?} _router
     */
    constructor(_formService, _sessionService, _router) {
        this._formService = _formService;
        this._sessionService = _sessionService;
        this._router = _router;
        this._formService.initForm(UPDATE_PASSWORD_FORM);
        this._formService.submit$.subscribe((data) => this._sessionService.updatePassword(data).subscribe(res => this._handleSuccess(res), error => this._handleError(error)));
    }
    /**
     * @param {?} data
     * @return {?}
     */
    _handleSuccess(data) {
        this._router.navigate(['session/sign-in']);
    }
    /**
     * @param {?} error
     * @return {?}
     */
    _handleError(error) {
        this._errors = error.json().errors;
        this._formService.unlockSubmit();
    }
}
A2tUpdatePasswordComponent.decorators = [
    { type: Component, args: [{
                selector: 'a2t-update-password',
                providers: [A2tFormService],
                template: `
        <a2t-headline>Update your Password</a2t-headline>
        <a2t-error [errors]="_errors"></a2t-error>
        <a2t-form>Update Password</a2t-form>
    `
            },] },
];
/** @nocollapse */
A2tUpdatePasswordComponent.ctorParameters = () => [
    { type: A2tFormService },
    { type: Angular2TokenService },
    { type: Router }
];

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes} checked by tsc
 */
const /** @type {?} */ routes = [{
        path: 'session',
        component: A2tUiComponent,
        children: [
            { path: 'sign-in', component: A2tSignInComponent },
            { path: 'sign-up', component: A2tSignUpComponent },
            { path: 'reset-password', component: A2tResetPasswordComponent },
            {
                path: 'update-password',
                component: A2tUpdatePasswordComponent,
                canActivate: [Angular2TokenService]
            }
        ]
    }];
const /** @type {?} */ a2tRoutes = RouterModule.forChild(routes);

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes} checked by tsc
 */
class A2tUiModule {
}
A2tUiModule.decorators = [
    { type: NgModule, args: [{
                imports: [
                    CommonModule,
                    RouterModule,
                    A2tSharedModule,
                    a2tRoutes
                ],
                declarations: [
                    A2tUiComponent,
                    A2tSignInComponent,
                    A2tSignUpComponent,
                    A2tResetPasswordComponent,
                    A2tUpdatePasswordComponent
                ]
            },] },
];

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes} checked by tsc
 */

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes} checked by tsc
 */

export { A2tUiModule, Angular2TokenService, A2tResetPasswordComponent as ɵl, A2tErrorComponent as ɵf, A2tFormFieldComponent as ɵb, A2tFormComponent as ɵc, A2tFormService as ɵd, A2tHeadlineComponent as ɵg, A2tLinksComponent as ɵe, A2tSharedModule as ɵa, A2tSignInComponent as ɵj, A2tSignUpComponent as ɵk, A2tUiComponent as ɵi, a2tRoutes as ɵh, A2tUpdatePasswordComponent as ɵm };

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYW5ndWxhcjItdG9rZW4uanMubWFwIiwic291cmNlcyI6WyJuZzovL2FuZ3VsYXIyLXRva2VuL2EydC11aS9hMnQtc2hhcmVkL2EydC1mb3JtL2EydC1mb3JtLnNlcnZpY2UudHMiLCJuZzovL2FuZ3VsYXIyLXRva2VuL2EydC11aS9hMnQtc2hhcmVkL2EydC1mb3JtL2EydC1mb3JtLmNvbXBvbmVudC50cyIsIm5nOi8vYW5ndWxhcjItdG9rZW4vYTJ0LXVpL2EydC11aS5mb3Jtcy50cyIsIm5nOi8vYW5ndWxhcjItdG9rZW4vYTJ0LXVpL2EydC1zaGFyZWQvYTJ0LWZvcm0vYTJ0LWZvcm0tZmllbGQvYTJ0LWZvcm0tZmllbGQuY29tcG9uZW50LnRzIiwibmc6Ly9hbmd1bGFyMi10b2tlbi9hMnQtdWkvYTJ0LXNoYXJlZC9hMnQtbGlua3MvYTJ0LWxpbmtzLmNvbXBvbmVudC50cyIsIm5nOi8vYW5ndWxhcjItdG9rZW4vYTJ0LXVpL2EydC1zaGFyZWQvYTJ0LWVycm9yL2EydC1lcnJvci5jb21wb25lbnQudHMiLCJuZzovL2FuZ3VsYXIyLXRva2VuL2EydC11aS9hMnQtc2hhcmVkL2EydC1oZWFkbGluZS9hMnQtaGVhZGxpbmUuY29tcG9uZW50LnRzIiwibmc6Ly9hbmd1bGFyMi10b2tlbi9hMnQtdWkvYTJ0LXNoYXJlZC9hMnQtc2hhcmVkLm1vZHVsZS50cyIsIm5nOi8vYW5ndWxhcjItdG9rZW4vYW5ndWxhcjItdG9rZW4uc2VydmljZS50cyIsIm5nOi8vYW5ndWxhcjItdG9rZW4vYTJ0LXVpL2EydC11aS5jb21wb25lbnQudHMiLCJuZzovL2FuZ3VsYXIyLXRva2VuL2EydC11aS9hMnQtc2lnbi1pbi9hMnQtc2lnbi1pbi5jb21wb25lbnQudHMiLCJuZzovL2FuZ3VsYXIyLXRva2VuL2EydC11aS9hMnQtc2lnbi11cC9hMnQtc2lnbi11cC5jb21wb25lbnQudHMiLCJuZzovL2FuZ3VsYXIyLXRva2VuL2EydC11aS9hMnQtcmVzZXQtcGFzc3dvcmQvYTJ0LXJlc2V0LXBhc3N3b3JkLmNvbXBvbmVudC50cyIsIm5nOi8vYW5ndWxhcjItdG9rZW4vYTJ0LXVpL2EydC11cGRhdGUtcGFzc3dvcmQvYTJ0LXVwZGF0ZS1wYXNzd29yZC5jb21wb25lbnQudHMiLCJuZzovL2FuZ3VsYXIyLXRva2VuL2EydC11aS9hMnQtdWkucm91dGVzLnRzIiwibmc6Ly9hbmd1bGFyMi10b2tlbi9hMnQtdWkvYTJ0LXVpLm1vZHVsZS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBJbmplY3RhYmxlLCBFdmVudEVtaXR0ZXIgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7IEZvcm1Hcm91cCwgRm9ybUNvbnRyb2wgfSBmcm9tICdAYW5ndWxhci9mb3Jtcyc7XG5pbXBvcnQgeyBTdWJqZWN0IH0gZnJvbSAncnhqcy9TdWJqZWN0JztcblxuaW1wb3J0IHsgU2lnbkluRGF0YSB9IGZyb20gJy4uLy4uLy4uL2FuZ3VsYXIyLXRva2VuLm1vZGVsJztcbmltcG9ydCB7IEJhc2VGaWVsZCB9IGZyb20gJy4uLy4uL2EydC11aS5mb3Jtcyc7XG5cbkBJbmplY3RhYmxlKClcbmV4cG9ydCBjbGFzcyBBMnRGb3JtU2VydmljZSB7XG5cbiAgICAvLyBTdWJtaXQgRXZlbnRcbiAgICBwdWJsaWMgc3VibWl0JCA9IG5ldyBFdmVudEVtaXR0ZXI8YW55PigpO1xuICAgIHB1YmxpYyBzdWJtaXRMb2NrOiBib29sZWFuID0gZmFsc2U7XG5cbiAgICAvLyBGb3JtIEJ1aWxkaW5nXG4gICAgcHVibGljIGZvcm1Hcm91cDogRm9ybUdyb3VwO1xuICAgIHB1YmxpYyBmaWVsZHM6IEJhc2VGaWVsZFtdO1xuXG4gICAgY29uc3RydWN0b3IoKSB7IH1cblxuICAgIHB1YmxpYyBpbml0Rm9ybShmaWVsZHM6IEJhc2VGaWVsZFtdKSB7XG4gICAgICAgIHRoaXMuZmllbGRzID0gZmllbGRzO1xuICAgICAgICB0aGlzLl9jcmVhdGVGb3JtR3JvdXAoKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgc3VibWl0KCkge1xuICAgICAgICB0aGlzLnN1Ym1pdExvY2sgPSB0cnVlO1xuICAgICAgICB0aGlzLnN1Ym1pdCQuZW1pdCh0aGlzLmZvcm1Hcm91cC52YWx1ZSk7XG4gICAgfVxuXG4gICAgcHVibGljIHVubG9ja1N1Ym1pdCgpIHtcbiAgICAgICAgdGhpcy5mb3JtR3JvdXAucmVzZXQoKTtcbiAgICAgICAgdGhpcy5zdWJtaXRMb2NrID0gZmFsc2U7XG4gICAgfTtcblxuICAgIHByaXZhdGUgX2NyZWF0ZUZvcm1Hcm91cCgpIHtcblxuICAgICAgICBsZXQgZ3JvdXA6IGFueSA9IHt9O1xuXG4gICAgICAgIHRoaXMuZmllbGRzLmZvckVhY2gocXVlc3Rpb24gPT4ge1xuICAgICAgICAgICAgZ3JvdXBbcXVlc3Rpb24ua2V5XSA9IG5ldyBGb3JtQ29udHJvbChudWxsLCBxdWVzdGlvbi52YWxpZGF0b3JzKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgdGhpcy5mb3JtR3JvdXAgPSBuZXcgRm9ybUdyb3VwKGdyb3VwKTtcbiAgICB9XG59XG4iLCJpbXBvcnQgeyBDb21wb25lbnQgfSAgZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5cbmltcG9ydCB7IEEydEZvcm1TZXJ2aWNlIH0gZnJvbSAnLi9hMnQtZm9ybS5zZXJ2aWNlJztcbmltcG9ydCB7IEEydEZvcm1GaWVsZENvbXBvbmVudCB9IGZyb20gJy4vYTJ0LWZvcm0tZmllbGQvYTJ0LWZvcm0tZmllbGQuY29tcG9uZW50JztcblxuQENvbXBvbmVudCh7XG4gICAgc2VsZWN0b3I6ICdhMnQtZm9ybScsXG4gICAgdGVtcGxhdGU6IGBcbiAgICAgICAgPGZvcm0gY2xhc3M9XCJhMnQtZm9ybVwiXG4gICAgICAgICAgICAobmdTdWJtaXQpPVwiX2Zvcm1TZXJ2aWNlLnN1Ym1pdCgpXCJcbiAgICAgICAgICAgIFtmb3JtR3JvdXBdPVwiX2Zvcm1TZXJ2aWNlLmZvcm1Hcm91cFwiPlxuXG4gICAgICAgICAgICA8YTJ0LWZvcm0tZmllbGRcbiAgICAgICAgICAgICAgICAqbmdGb3I9XCJsZXQgZmllbGQgb2YgdGhpcy5fZm9ybVNlcnZpY2UuZmllbGRzXCJcbiAgICAgICAgICAgICAgICBbcXVlc3Rpb25dPVwiZmllbGRcIlxuICAgICAgICAgICAgICAgIFtmb3JtXT1cIl9mb3JtU2VydmljZS5mb3JtR3JvdXBcIj5cbiAgICAgICAgICAgIDwvYTJ0LWZvcm0tZmllbGQ+XG5cbiAgICAgICAgICAgIDxidXR0b24gdHlwZT1cInN1Ym1pdFwiIFtkaXNhYmxlZF09XCIhX2Zvcm1TZXJ2aWNlLmZvcm1Hcm91cC52YWxpZCB8fCBfZm9ybVNlcnZpY2UuZm9ybUdyb3VwLnByaXN0aW5lIHx8IF9mb3JtU2VydmljZS5zdWJtaXRMb2NrXCI+XG4gICAgICAgICAgICAgICAgPG5nLWNvbnRlbnQgKm5nSWY9XCIhX2Zvcm1TZXJ2aWNlLnN1Ym1pdExvY2tcIj48L25nLWNvbnRlbnQ+XG4gICAgICAgICAgICAgICAgPHNwYW4gKm5nSWY9XCJfZm9ybVNlcnZpY2Uuc3VibWl0TG9ja1wiPlN1Ym1pdHRpbmcgLi4uPC9zcGFuPlxuICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgIDwvZm9ybT5cbiAgICBgLFxuICAgIHN0eWxlczogW2BcbiAgICAgICAgLmEydC1mb3JtIHtcbiAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6IHdoaXRlO1xuICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogM3B4O1xuICAgICAgICAgICAgYm94LXNoYWRvdzogMHB4IDFweCA1cHggMCByZ2JhKDAsMCwwLDAuMyk7XG4gICAgICAgICAgICBwYWRkaW5nLXRvcDogMjBweDtcbiAgICAgICAgICAgIGZvbnQtZmFtaWx5OiBcIlNlZ29lIFVJXCIsIFwiSGVsdmV0aWNhIE5ldWVcIiwgQXJpYWwsIHNhbnMtc2VyaWY7XG4gICAgICAgIH1cblxuICAgICAgICAuYTJ0LWZvcm0gYnV0dG9uIHtcbiAgICAgICAgICAgIHdpZHRoOiAxMDAlO1xuXG4gICAgICAgICAgICB0cmFuc2l0aW9uOiAuM3M7XG4gICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjNzJjMzgwO1xuXG4gICAgICAgICAgICBib3JkZXItYm90dG9tLXJpZ2h0LXJhZGl1czogM3B4O1xuICAgICAgICAgICAgYm9yZGVyLWJvdHRvbS1sZWZ0LXJhZGl1czogM3B4O1xuXG4gICAgICAgICAgICBvdXRsaW5lOiBub25lO1xuICAgICAgICAgICAgdGV4dC1hbGlnbjogY2VudGVyO1xuICAgICAgICAgICAgZm9udC13ZWlnaHQ6IDQwMDtcbiAgICAgICAgICAgIGJvcmRlcjogbm9uZTtcbiAgICAgICAgICAgIGZvbnQtc2l6ZTogMTZweDtcbiAgICAgICAgICAgIGxpbmUtaGVpZ2h0OiAzMHB4O1xuXG4gICAgICAgICAgICB0ZXh0LXNoYWRvdzogMCAxcHggMnB4IHJnYmEoMCwgMCwgMCwgMC4yNSk7XG4gICAgICAgICAgICBjb2xvcjogd2hpdGU7XG4gICAgICAgICAgICBib3JkZXItYm90dG9tOiAzcHggc29saWQgdHJhbnNwYXJlbnQ7XG4gICAgICAgIH1cblxuICAgICAgICAuYTJ0LWZvcm0gYnV0dG9uOmRpc2FibGVkIHtcbiAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6ICNlZWUgIWltcG9ydGFudDtcbiAgICAgICAgICAgIGN1cnNvcjogbm90LWFsbG93ZWQ7XG4gICAgICAgICAgICBjb2xvcjogIzk5OTtcbiAgICAgICAgICAgIHRleHQtc2hhZG93OiBub25lO1xuICAgICAgICB9XG5cbiAgICAgICAgLmEydC1mb3JtIGJ1dHRvbjpob3ZlciB7XG4gICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjYTZkOWFlO1xuICAgICAgICB9XG4gICAgYF1cbn0pXG5cbmV4cG9ydCBjbGFzcyBBMnRGb3JtQ29tcG9uZW50IHtcbiAgICBjb25zdHJ1Y3RvcihwdWJsaWMgX2Zvcm1TZXJ2aWNlOiBBMnRGb3JtU2VydmljZSkgeyB9XG59XG4iLCJpbXBvcnQgeyBWYWxpZGF0b3JzIH0gZnJvbSAnQGFuZ3VsYXIvZm9ybXMnO1xuXG5leHBvcnQgY2xhc3MgQmFzZUZpZWxke1xuICAgIHZhbHVlOiBzdHJpbmc7XG4gICAga2V5OiBzdHJpbmc7XG4gICAgbGFiZWw6IHN0cmluZztcbiAgICB0eXBlOiBzdHJpbmc7XG4gICAgdmFsaWRhdG9yczogYW55W107XG5cbiAgICBjb25zdHJ1Y3RvcihvcHRpb25zOiB7XG4gICAgICAgIHZhbHVlPzogc3RyaW5nLFxuICAgICAgICBrZXk/OiBzdHJpbmcsXG4gICAgICAgIGxhYmVsPzogc3RyaW5nLFxuICAgICAgICB0eXBlPzogc3RyaW5nLFxuICAgICAgICB2YWxpZGF0b3JzPzogYW55W10sXG4gICAgfSA9IHt9KSB7XG4gICAgICAgIHRoaXMudmFsdWUgPSBvcHRpb25zLnZhbHVlO1xuICAgICAgICB0aGlzLmtleSA9IG9wdGlvbnMua2V5IHx8ICcnO1xuICAgICAgICB0aGlzLmxhYmVsID0gb3B0aW9ucy5sYWJlbCB8fCAnJztcbiAgICAgICAgdGhpcy52YWxpZGF0b3JzID0gb3B0aW9ucy52YWxpZGF0b3JzID09PSB1bmRlZmluZWQgPyBbXSA6IG9wdGlvbnMudmFsaWRhdG9ycztcbiAgICAgICAgdGhpcy50eXBlID0gb3B0aW9ucy50eXBlIHx8ICcnO1xuICAgIH1cbn1cblxuZXhwb3J0IGNvbnN0IFNJR05fSU5fRk9STTogQmFzZUZpZWxkW10gPSBbXG4gICAgbmV3IEJhc2VGaWVsZCh7XG4gICAgICAgIGtleTogJ2VtYWlsJyxcbiAgICAgICAgbGFiZWw6ICdFbWFpbCcsXG4gICAgICAgIHR5cGU6ICd0ZXh0JyxcbiAgICAgICAgdmFsaWRhdG9yczogW1xuICAgICAgICAgICAgVmFsaWRhdG9ycy5yZXF1aXJlZCxcbiAgICAgICAgICAgIFZhbGlkYXRvcnMubWluTGVuZ3RoKDgpXG4gICAgICAgIF1cbiAgICB9KSxcbiAgICBuZXcgQmFzZUZpZWxkKHtcbiAgICAgICAga2V5OiAncGFzc3dvcmQnLFxuICAgICAgICBsYWJlbDogJ1Bhc3N3b3JkJyxcbiAgICAgICAgdHlwZTogJ3Bhc3N3b3JkJyxcbiAgICAgICAgdmFsaWRhdG9yczogW1xuICAgICAgICAgICAgVmFsaWRhdG9ycy5yZXF1aXJlZCxcbiAgICAgICAgICAgIFZhbGlkYXRvcnMubWluTGVuZ3RoKDgpXG4gICAgICAgIF1cbiAgICB9KVxuXTtcblxuZXhwb3J0IGNvbnN0IFNJR05fVVBfRk9STTogQmFzZUZpZWxkW10gPSBbXG4gICAgbmV3IEJhc2VGaWVsZCh7XG4gICAgICAgIGtleTogJ2VtYWlsJyxcbiAgICAgICAgbGFiZWw6ICdFbWFpbCcsXG4gICAgICAgIHR5cGU6ICd0ZXh0JyxcbiAgICAgICAgdmFsaWRhdG9yczogW1xuICAgICAgICAgICAgVmFsaWRhdG9ycy5yZXF1aXJlZCxcbiAgICAgICAgICAgIFZhbGlkYXRvcnMubWluTGVuZ3RoKDgpXG4gICAgICAgIF1cbiAgICB9KSxcbiAgICBuZXcgQmFzZUZpZWxkKHtcbiAgICAgICAga2V5OiAncGFzc3dvcmQnLFxuICAgICAgICBsYWJlbDogJ1Bhc3N3b3JkJyxcbiAgICAgICAgdHlwZTogJ3Bhc3N3b3JkJyxcbiAgICAgICAgdmFsaWRhdG9yczogW1xuICAgICAgICAgICAgVmFsaWRhdG9ycy5yZXF1aXJlZCxcbiAgICAgICAgICAgIFZhbGlkYXRvcnMubWluTGVuZ3RoKDgpXG4gICAgICAgIF1cbiAgICB9KSxcbiAgICBuZXcgQmFzZUZpZWxkKHtcbiAgICAgICAga2V5OiAncGFzc3dvcmRDb25maXJtYXRpb24nLFxuICAgICAgICBsYWJlbDogJ1Bhc3N3b3JkIENvbmZpcm1hdGlvbicsXG4gICAgICAgIHR5cGU6ICdwYXNzd29yZCcsXG4gICAgICAgIHZhbGlkYXRvcnM6IFtcbiAgICAgICAgICAgIFZhbGlkYXRvcnMucmVxdWlyZWQsXG4gICAgICAgICAgICBWYWxpZGF0b3JzLm1pbkxlbmd0aCg4KVxuICAgICAgICBdXG4gICAgfSlcbl07XG5cbmV4cG9ydCBjb25zdCBSRVNFVF9QQVNTV09SRF9GT1JNOiBCYXNlRmllbGRbXSA9IFtcbiAgICBuZXcgQmFzZUZpZWxkKHtcbiAgICAgICAga2V5OiAnZW1haWwnLFxuICAgICAgICBsYWJlbDogJ0VtYWlsJyxcbiAgICAgICAgdHlwZTogJ3RleHQnLFxuICAgICAgICB2YWxpZGF0b3JzOiBbXG4gICAgICAgICAgICBWYWxpZGF0b3JzLnJlcXVpcmVkLFxuICAgICAgICAgICAgVmFsaWRhdG9ycy5taW5MZW5ndGgoOClcbiAgICAgICAgXVxuICAgIH0pXG5dO1xuXG5leHBvcnQgY29uc3QgVVBEQVRFX1BBU1NXT1JEX0ZPUk06IEJhc2VGaWVsZFtdID0gW1xuICAgIG5ldyBCYXNlRmllbGQoe1xuICAgICAgICBrZXk6ICdwYXNzd29yZCcsXG4gICAgICAgIGxhYmVsOiAnUGFzc3dvcmQnLFxuICAgICAgICB0eXBlOiAncGFzc3dvcmQnLFxuICAgICAgICB2YWxpZGF0b3JzOiBbXG4gICAgICAgICAgICBWYWxpZGF0b3JzLnJlcXVpcmVkLFxuICAgICAgICAgICAgVmFsaWRhdG9ycy5taW5MZW5ndGgoOClcbiAgICAgICAgXVxuICAgIH0pLFxuICAgIG5ldyBCYXNlRmllbGQoe1xuICAgICAgICBrZXk6ICdwYXNzd29yZENvbmZpcm1hdGlvbicsXG4gICAgICAgIGxhYmVsOiAnUGFzc3dvcmQgQ29uZmlybWF0aW9uJyxcbiAgICAgICAgdHlwZTogJ3Bhc3N3b3JkJyxcbiAgICAgICAgdmFsaWRhdG9yczogW1xuICAgICAgICAgICAgVmFsaWRhdG9ycy5yZXF1aXJlZCxcbiAgICAgICAgICAgIFZhbGlkYXRvcnMubWluTGVuZ3RoKDgpXG4gICAgICAgIF1cbiAgICB9KSxcbiAgICBuZXcgQmFzZUZpZWxkKHtcbiAgICAgICAga2V5OiAncGFzc3dvcmRDdXJyZW50JyxcbiAgICAgICAgbGFiZWw6ICdPbGQgUGFzc3dvcmQnLFxuICAgICAgICB0eXBlOiAncGFzc3dvcmQnLFxuICAgICAgICB2YWxpZGF0b3JzOiBbXG4gICAgICAgICAgICBWYWxpZGF0b3JzLnJlcXVpcmVkLFxuICAgICAgICAgICAgVmFsaWRhdG9ycy5taW5MZW5ndGgoOClcbiAgICAgICAgXVxuICAgIH0pXG5dOyIsImltcG9ydCB7IENvbXBvbmVudCwgSW5wdXQsIE9uSW5pdCB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgRm9ybUdyb3VwLCBBYnN0cmFjdENvbnRyb2wgfSBmcm9tICdAYW5ndWxhci9mb3Jtcyc7XG5cbmltcG9ydCB7IEJhc2VGaWVsZCB9IGZyb20gJy4uLy4uLy4uL2EydC11aS5mb3Jtcyc7XG5cbkBDb21wb25lbnQoe1xuICAgIHNlbGVjdG9yOiAgICdhMnQtZm9ybS1maWVsZCcsXG4gICAgdGVtcGxhdGU6IGBcbiAgICAgICAgPGRpdiBjbGFzcz1cImEydC1pbnB1dC1ncm91cFwiXG4gICAgICAgICAgICBbZm9ybUdyb3VwXT1cImZvcm1cIj5cblxuICAgICAgICAgICAgPGxhYmVsXG4gICAgICAgICAgICAgICAgW2F0dHIuZm9yXT1cInF1ZXN0aW9uLmtleVwiXG4gICAgICAgICAgICAgICAgKm5nSWY9XCJfY29udHJvbC5wcmlzdGluZVwiPlxuICAgICAgICAgICAgICAgIHt7cXVlc3Rpb24ubGFiZWx9fVxuICAgICAgICAgICAgPC9sYWJlbD5cblxuICAgICAgICAgICAgPGxhYmVsIGNsYXNzPVwiYTJ0LWVycm9yXCJcbiAgICAgICAgICAgICAgICBbYXR0ci5mb3JdPVwicXVlc3Rpb24ua2V5XCJcbiAgICAgICAgICAgICAgICAqbmdJZj1cIl9jb250cm9sLmhhc0Vycm9yKCdyZXF1aXJlZCcpICYmICFfY29udHJvbC5wcmlzdGluZVwiPlxuICAgICAgICAgICAgICAgIHt7cXVlc3Rpb24ubGFiZWx9fSBpcyByZXF1aXJlZFxuICAgICAgICAgICAgPC9sYWJlbD5cblxuICAgICAgICAgICAgPGxhYmVsIGNsYXNzPVwiYTJ0LWVycm9yXCJcbiAgICAgICAgICAgICAgICBbYXR0ci5mb3JdPVwicXVlc3Rpb24ua2V5XCJcbiAgICAgICAgICAgICAgICAqbmdJZj1cIl9jb250cm9sLmhhc0Vycm9yKCdtaW5sZW5ndGgnKVwiPlxuICAgICAgICAgICAgICAgIHt7cXVlc3Rpb24ubGFiZWx9fSBpcyB0b28gc2hvcnRcbiAgICAgICAgICAgIDwvbGFiZWw+XG5cbiAgICAgICAgICAgIDxsYWJlbCBjbGFzcz1cImEydC1lcnJvclwiXG4gICAgICAgICAgICAgICAgW2F0dHIuZm9yXT1cInF1ZXN0aW9uLmtleVwiXG4gICAgICAgICAgICAgICAgKm5nSWY9XCJfY29udHJvbC5oYXNFcnJvcignbWF4bGVuZ3RoJylcIj5cbiAgICAgICAgICAgICAgICB7e3F1ZXN0aW9uLmxhYmVsfX0gaXMgdG9vIGxvbmdcbiAgICAgICAgICAgIDwvbGFiZWw+XG5cbiAgICAgICAgICAgIDxsYWJlbCBjbGFzcz1cImEydC12YWxpZFwiXG4gICAgICAgICAgICAgICAgW2F0dHIuZm9yXT1cInF1ZXN0aW9uLmtleVwiXG4gICAgICAgICAgICAgICAgKm5nSWY9XCJfY29udHJvbC52YWxpZCAmJiAhX2NvbnRyb2wucHJpc3RpbmVcIj5cbiAgICAgICAgICAgICAgICB7e3F1ZXN0aW9uLmxhYmVsfX1cbiAgICAgICAgICAgIDwvbGFiZWw+XG5cbiAgICAgICAgICAgIDxpbnB1dFxuICAgICAgICAgICAgICAgIFtmb3JtQ29udHJvbE5hbWVdPVwicXVlc3Rpb24ua2V5XCJcbiAgICAgICAgICAgICAgICBbaWRdPVwicXVlc3Rpb24ua2V5XCJcbiAgICAgICAgICAgICAgICBbdHlwZV09XCJxdWVzdGlvbi50eXBlXCI+XG4gICAgICAgIDwvZGl2PlxuICAgIGAsXG4gICAgc3R5bGVzOiBbYFxuICAgICAgICAuYTJ0LWlucHV0LWdyb3VwIHtcbiAgICAgICAgICAgIHBhZGRpbmctYm90dG9tOiA0MHB4O1xuICAgICAgICAgICAgcGFkZGluZy1yaWdodDogMjBweDtcbiAgICAgICAgICAgIHBhZGRpbmctbGVmdDogMjBweDtcbiAgICAgICAgICAgIGZvbnQtZmFtaWx5OiBcIlNlZ29lIFVJXCIsIFwiSGVsdmV0aWNhIE5ldWVcIiwgQXJpYWwsIHNhbnMtc2VyaWY7XG4gICAgICAgIH1cblxuICAgICAgICAuYTJ0LWlucHV0LWdyb3VwIGlucHV0IHtcbiAgICAgICAgICAgIHdpZHRoOiAxMDAlO1xuICAgICAgICAgICAgb3V0bGluZTogbm9uZTtcbiAgICAgICAgICAgIGJvcmRlcjogbm9uZTtcbiAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6ICNlZWU7XG4gICAgICAgICAgICBsaW5lLWhlaWdodDogNDBweDtcblxuICAgICAgICAgICAgcGFkZGluZy1sZWZ0OiAxMHB4O1xuICAgICAgICAgICAgcGFkZGluZy1yaWdodDogMTBweDtcbiAgICAgICAgfVxuXG4gICAgICAgIC5hMnQtaW5wdXQtZ3JvdXAgbGFiZWwge1xuICAgICAgICAgICAgY29sb3I6ICM2NjY7XG4gICAgICAgICAgICBmb250LXdlaWdodDogNjAwO1xuICAgICAgICAgICAgZm9udC1zaXplOiAxM3B4O1xuICAgICAgICAgICAgbWFyZ2luLWJvdHRvbTogMDtcbiAgICAgICAgfVxuXG4gICAgICAgIC5hMnQtZXJyb3Ige1xuICAgICAgICAgICAgY29sb3I6ICNkZjY1NjQgIWltcG9ydGFudDtcbiAgICAgICAgfVxuXG4gICAgICAgIC5hMnQtdmFsaWQge1xuICAgICAgICAgICAgY29sb3I6ICM3MmMzODAgIWltcG9ydGFudDtcbiAgICAgICAgfVxuICAgIGBdXG59KVxuXG5leHBvcnQgY2xhc3MgQTJ0Rm9ybUZpZWxkQ29tcG9uZW50IGltcGxlbWVudHMgT25Jbml0IHtcblxuICAgIEBJbnB1dCgpIHF1ZXN0aW9uOiAgQmFzZUZpZWxkO1xuICAgIEBJbnB1dCgpIGZvcm06ICAgICAgRm9ybUdyb3VwO1xuXG4gICAgX2NvbnRyb2w6ICAgQWJzdHJhY3RDb250cm9sO1xuXG4gICAgbmdPbkluaXQoKSB7XG4gICAgICAgIHRoaXMuX2NvbnRyb2wgPSB0aGlzLmZvcm0uY29udHJvbHNbdGhpcy5xdWVzdGlvbi5rZXldO1xuICAgIH1cblxuICAgIGdldCBpc1ZhbGlkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fY29udHJvbC52YWxpZDtcbiAgICB9XG59XG4iLCJpbXBvcnQgeyBDb21wb25lbnQsIElucHV0IH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5cbkBDb21wb25lbnQoe1xuICAgIHNlbGVjdG9yOiAgICdhMnQtbGlua3MnLFxuICAgIHRlbXBsYXRlOiBgXG4gICAgICAgIDxkaXYgY2xhc3M9XCJhMnQtd3JhcHBlclwiPlxuICAgICAgICAgICAgPHA+PGEgcm91dGVyTGluaz1cIi9zZXNzaW9uL3Jlc2V0LXBhc3N3b3JkXCIgKm5nSWY9XCJjYXNlICE9ICdyZXNldC1wYXNzd29yZCdcIj5Gb3Jnb3QgUGFzc3dvcmQ/PC9hPjwvcD5cbiAgICAgICAgICAgIDxwPjxhIHJvdXRlckxpbms9XCIvc2Vzc2lvbi9zaWduLXVwXCIgKm5nSWY9XCJjYXNlICE9ICdzaWduLXVwJ1wiPlNpZ24gVXA8L2E+PC9wPlxuICAgICAgICAgICAgPHA+PGEgcm91dGVyTGluaz1cIi9zZXNzaW9uL3NpZ24taW5cIiAqbmdJZj1cImNhc2UgIT0gJ3NpZ24taW4nXCI+U2lnbiBJbjwvYT48L3A+XG4gICAgICAgIDwvZGl2PlxuICAgIGAsXG4gICAgc3R5bGVzOiBbYFxuICAgICAgICAuYTJ0LXdyYXBwZXIge1xuICAgICAgICAgICAgbWFyZ2luLXRvcDogMjBweDtcbiAgICAgICAgfVxuXG4gICAgICAgIHAge1xuICAgICAgICAgICAgbWFyZ2luLWJvdHRvbTogMDtcbiAgICAgICAgfVxuXG4gICAgICAgIGEge1xuICAgICAgICAgICAgY29sb3I6ICNlZWUgIWltcG9ydGFudDtcbiAgICAgICAgICAgIHRyYW5zaXRpb246IC4zcztcbiAgICAgICAgICAgIHRleHQtZGVjb3JhdGlvbjogbm9uZTtcbiAgICAgICAgICAgIGZvbnQtc2l6ZTogMTVweDtcbiAgICAgICAgICAgIGZvbnQtd2VpZ2h0OiAzMDA7XG4gICAgICAgICAgICBmb250LWZhbWlseTogXCJTZWdvZSBVSVwiLCBcIkhlbHZldGljYSBOZXVlXCIsIEFyaWFsLCBzYW5zLXNlcmlmO1xuICAgICAgICB9XG5cbiAgICAgICAgYTpob3ZlciB7XG4gICAgICAgICAgICBjb2xvcjogd2hpdGU7XG4gICAgICAgIH1cbiAgICBgXVxufSlcbmV4cG9ydCBjbGFzcyBBMnRMaW5rc0NvbXBvbmVudCB7XG5cbiAgICBASW5wdXQoKSBjYXNlOiBzdHJpbmc7XG5cbiAgICBjb25zdHJ1Y3RvcigpIHsgfVxufSIsImltcG9ydCB7IENvbXBvbmVudCwgSW5wdXQgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcblxuQENvbXBvbmVudCh7XG4gICAgc2VsZWN0b3I6ICAgJ2EydC1lcnJvcicsXG4gICAgdGVtcGxhdGU6ICAgJzxkaXYgKm5nRm9yPVwibGV0IGVycm9yIG9mIGVycm9yc1wiPjxwPnt7ZXJyb3J9fTwvcD48L2Rpdj4nLFxuICAgIHN0eWxlczogW2BcbiAgICAgICAgZGl2IHtcbiAgICAgICAgICAgIHdpZHRoOiAxMDAlO1xuICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogI2RmNjU2NDtcbiAgICAgICAgICAgIGNvbG9yOiB3aGl0ZTtcbiAgICAgICAgICAgIGZvbnQtd2VpZ2h0OiAzMDA7XG4gICAgICAgICAgICBmb250LXNpemU6IDE1cHg7XG4gICAgICAgICAgICBwYWRkaW5nOiAxMHB4IDIwcHg7XG4gICAgICAgICAgICBib3JkZXItcmFkaXVzOiAzcHg7XG4gICAgICAgICAgICBtYXJnaW4tYm90dG9tOiAxNXB4O1xuICAgICAgICB9XG5cbiAgICAgICAgZGl2ID4gcCB7XG4gICAgICAgICAgICBtYXJnaW4tYm90dG9tOiAwO1xuICAgICAgICB9XG4gICAgYF1cbn0pXG5leHBvcnQgY2xhc3MgQTJ0RXJyb3JDb21wb25lbnQge1xuXG4gICAgQElucHV0KCkgZXJyb3JzOiBzdHJpbmdbXTtcblxuICAgIGNvbnN0cnVjdG9yKCkgeyB9XG59IiwiaW1wb3J0IHsgQ29tcG9uZW50IH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5cbkBDb21wb25lbnQoe1xuICAgIHNlbGVjdG9yOiAgICdhMnQtaGVhZGxpbmUnLFxuICAgIHRlbXBsYXRlOiAgICc8cD48bmctY29udGVudD48L25nLWNvbnRlbnQ+PC9wPicsXG4gICAgc3R5bGVzOiAgW2BcbiAgICAgICAgcCB7XG4gICAgICAgICAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XG4gICAgICAgICAgICBjb2xvcjogd2hpdGU7XG4gICAgICAgICAgICBmb250LXNpemU6IDMwcHg7XG4gICAgICAgIH1cbiAgICBgXVxufSlcbmV4cG9ydCBjbGFzcyBBMnRIZWFkbGluZUNvbXBvbmVudCB7XG4gICAgY29uc3RydWN0b3IoKSB7IH1cbn0iLCJpbXBvcnQgeyBOZ01vZHVsZSB9ICAgICBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7IFJlYWN0aXZlRm9ybXNNb2R1bGUgfSAgZnJvbSAnQGFuZ3VsYXIvZm9ybXMnO1xuaW1wb3J0IHsgQ29tbW9uTW9kdWxlIH0gZnJvbSAnQGFuZ3VsYXIvY29tbW9uJztcbmltcG9ydCB7IFJvdXRlck1vZHVsZSB9IGZyb20gJ0Bhbmd1bGFyL3JvdXRlcic7XG5cbmltcG9ydCB7IEEydEZvcm1Db21wb25lbnQgfSBmcm9tICcuL2EydC1mb3JtL2EydC1mb3JtLmNvbXBvbmVudCc7XG5pbXBvcnQgeyBBMnRGb3JtRmllbGRDb21wb25lbnQgfSBmcm9tICcuL2EydC1mb3JtL2EydC1mb3JtLWZpZWxkL2EydC1mb3JtLWZpZWxkLmNvbXBvbmVudCc7XG5pbXBvcnQgeyBBMnRMaW5rc0NvbXBvbmVudCB9IGZyb20gJy4vYTJ0LWxpbmtzL2EydC1saW5rcy5jb21wb25lbnQnO1xuaW1wb3J0IHsgQTJ0RXJyb3JDb21wb25lbnQgfSBmcm9tICcuL2EydC1lcnJvci9hMnQtZXJyb3IuY29tcG9uZW50JztcbmltcG9ydCB7IEEydEhlYWRsaW5lQ29tcG9uZW50IH0gZnJvbSAnLi9hMnQtaGVhZGxpbmUvYTJ0LWhlYWRsaW5lLmNvbXBvbmVudCc7XG5cbkBOZ01vZHVsZSh7XG4gICAgaW1wb3J0czogW1xuICAgICAgICBDb21tb25Nb2R1bGUsXG4gICAgICAgIFJlYWN0aXZlRm9ybXNNb2R1bGUsXG4gICAgICAgIFJvdXRlck1vZHVsZVxuICAgIF0sXG4gICAgZGVjbGFyYXRpb25zOiBbXG4gICAgICAgIEEydEZvcm1GaWVsZENvbXBvbmVudCxcbiAgICAgICAgQTJ0Rm9ybUNvbXBvbmVudCxcbiAgICAgICAgQTJ0TGlua3NDb21wb25lbnQsXG4gICAgICAgIEEydEVycm9yQ29tcG9uZW50LFxuICAgICAgICBBMnRIZWFkbGluZUNvbXBvbmVudFxuICAgIF0sXG4gICAgZXhwb3J0czogW1xuICAgICAgICBBMnRGb3JtQ29tcG9uZW50LFxuICAgICAgICBBMnRMaW5rc0NvbXBvbmVudCxcbiAgICAgICAgQTJ0RXJyb3JDb21wb25lbnQsXG4gICAgICAgIEEydEhlYWRsaW5lQ29tcG9uZW50XG4gICAgXVxufSlcbmV4cG9ydCBjbGFzcyBBMnRTaGFyZWRNb2R1bGUgeyB9XG4iLCJpbXBvcnQgeyBJbmplY3RhYmxlLCBPcHRpb25hbCB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgQWN0aXZhdGVkUm91dGUsIFJvdXRlciwgQ2FuQWN0aXZhdGUgfSBmcm9tICdAYW5ndWxhci9yb3V0ZXInO1xuaW1wb3J0IHtcbiAgICBIdHRwLFxuICAgIFJlc3BvbnNlLFxuICAgIEhlYWRlcnMsXG4gICAgUmVxdWVzdCxcbiAgICBSZXF1ZXN0TWV0aG9kLFxuICAgIFJlcXVlc3RPcHRpb25zLFxuICAgIFJlcXVlc3RPcHRpb25zQXJnc1xufSBmcm9tICdAYW5ndWxhci9odHRwJztcblxuaW1wb3J0IHsgT2JzZXJ2YWJsZSwgaW50ZXJ2YWwsIGZyb21FdmVudCB9IGZyb20gJ3J4anMnO1xuaW1wb3J0IHsgc2hhcmUsIHBsdWNrLCBmaWx0ZXIgfSBmcm9tICdyeGpzL29wZXJhdG9ycyc7XG5cbmltcG9ydCB7XG4gICAgU2lnbkluRGF0YSxcbiAgICBSZWdpc3RlckRhdGEsXG4gICAgVXBkYXRlUGFzc3dvcmREYXRhLFxuICAgIFJlc2V0UGFzc3dvcmREYXRhLFxuXG4gICAgVXNlclR5cGUsXG4gICAgVXNlckRhdGEsXG4gICAgQXV0aERhdGEsXG5cbiAgICBBbmd1bGFyMlRva2VuT3B0aW9uc1xufSBmcm9tICcuL2FuZ3VsYXIyLXRva2VuLm1vZGVsJztcblxuQEluamVjdGFibGUoKVxuZXhwb3J0IGNsYXNzIEFuZ3VsYXIyVG9rZW5TZXJ2aWNlIGltcGxlbWVudHMgQ2FuQWN0aXZhdGUge1xuXG4gICAgZ2V0IGN1cnJlbnRVc2VyVHlwZSgpOiBzdHJpbmcge1xuICAgICAgICBpZiAodGhpcy5hdEN1cnJlbnRVc2VyVHlwZSAhPSBudWxsKVxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuYXRDdXJyZW50VXNlclR5cGUubmFtZTtcbiAgICAgICAgZWxzZVxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgZ2V0IGN1cnJlbnRVc2VyRGF0YSgpOiBVc2VyRGF0YSB7XG4gICAgICAgIHJldHVybiB0aGlzLmF0Q3VycmVudFVzZXJEYXRhO1xuICAgIH1cblxuICAgIGdldCBjdXJyZW50QXV0aERhdGEoKTogQXV0aERhdGEge1xuICAgICAgICByZXR1cm4gdGhpcy5hdEN1cnJlbnRBdXRoRGF0YTtcbiAgICB9XG5cbiAgICBnZXQgY3VycmVudEF1dGhIZWFkZXJzKCk6IEhlYWRlcnMge1xuICAgICAgICBpZiAodGhpcy5hdEN1cnJlbnRBdXRoRGF0YSAhPSBudWxsKSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IEhlYWRlcnMoe1xuICAgICAgICAgICAgICAgICdhY2Nlc3MtdG9rZW4nOiB0aGlzLmF0Q3VycmVudEF1dGhEYXRhLmFjY2Vzc1Rva2VuLFxuICAgICAgICAgICAgICAgICdjbGllbnQnOiAgICAgICB0aGlzLmF0Q3VycmVudEF1dGhEYXRhLmNsaWVudCxcbiAgICAgICAgICAgICAgICAnZXhwaXJ5JzogICAgICAgdGhpcy5hdEN1cnJlbnRBdXRoRGF0YS5leHBpcnksXG4gICAgICAgICAgICAgICAgJ3Rva2VuLXR5cGUnOiAgIHRoaXMuYXRDdXJyZW50QXV0aERhdGEudG9rZW5UeXBlLFxuICAgICAgICAgICAgICAgICd1aWQnOiAgICAgICAgICB0aGlzLmF0Q3VycmVudEF1dGhEYXRhLnVpZFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gbmV3IEhlYWRlcnM7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBhdE9wdGlvbnM6IEFuZ3VsYXIyVG9rZW5PcHRpb25zO1xuICAgIHByaXZhdGUgYXRDdXJyZW50VXNlclR5cGU6IFVzZXJUeXBlO1xuICAgIHByaXZhdGUgYXRDdXJyZW50QXV0aERhdGE6IEF1dGhEYXRhO1xuICAgIHByaXZhdGUgYXRDdXJyZW50VXNlckRhdGE6IFVzZXJEYXRhO1xuXG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIHByaXZhdGUgaHR0cDogSHR0cCxcbiAgICAgICAgQE9wdGlvbmFsKCkgcHJpdmF0ZSBhY3RpdmF0ZWRSb3V0ZTogQWN0aXZhdGVkUm91dGUsXG4gICAgICAgIEBPcHRpb25hbCgpIHByaXZhdGUgcm91dGVyOiBSb3V0ZXJcbiAgICApIHsgfVxuXG4gICAgdXNlclNpZ25lZEluKCk6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gISF0aGlzLmF0Q3VycmVudEF1dGhEYXRhO1xuICAgIH1cblxuICAgIGNhbkFjdGl2YXRlKCk6IGJvb2xlYW4ge1xuICAgICAgICBpZiAodGhpcy51c2VyU2lnbmVkSW4oKSlcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIC8vIFN0b3JlIGN1cnJlbnQgbG9jYXRpb24gaW4gc3RvcmFnZSAodXNlZnVsbCBmb3IgcmVkaXJlY3Rpb24gYWZ0ZXIgc2lnbmluZyBpbilcbiAgICAgICAgICAgIGlmICh0aGlzLmF0T3B0aW9ucy5zaWduSW5TdG9yZWRVcmxTdG9yYWdlS2V5KSB7XG4gICAgICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYXRPcHRpb25zLnNpZ25JblN0b3JlZFVybFN0b3JhZ2VLZXksXG4gICAgICAgICAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5wYXRobmFtZSArIHdpbmRvdy5sb2NhdGlvbi5zZWFyY2hcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBSZWRpcmVjdCB1c2VyIHRvIHNpZ24gaW4gaWYgc2lnbkluUmVkaXJlY3QgaXMgc2V0XG4gICAgICAgICAgICBpZih0aGlzLnJvdXRlciAmJiB0aGlzLmF0T3B0aW9ucy5zaWduSW5SZWRpcmVjdClcbiAgICAgICAgICAgICAgICB0aGlzLnJvdXRlci5uYXZpZ2F0ZShbdGhpcy5hdE9wdGlvbnMuc2lnbkluUmVkaXJlY3RdKTtcblxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLy8gSW5pdGFsIGNvbmZpZ3VyYXRpb25cbiAgICBpbml0KG9wdGlvbnM/OiBBbmd1bGFyMlRva2VuT3B0aW9ucykge1xuXG4gICAgICAgIGxldCBkZWZhdWx0T3B0aW9uczogQW5ndWxhcjJUb2tlbk9wdGlvbnMgPSB7XG4gICAgICAgICAgICBhcGlQYXRoOiAgICAgICAgICAgICAgICAgICAgbnVsbCxcbiAgICAgICAgICAgIGFwaUJhc2U6ICAgICAgICAgICAgICAgICAgICBudWxsLFxuXG4gICAgICAgICAgICBzaWduSW5QYXRoOiAgICAgICAgICAgICAgICAgJ2F1dGgvc2lnbl9pbicsXG4gICAgICAgICAgICBzaWduSW5SZWRpcmVjdDogICAgICAgICAgICAgbnVsbCxcbiAgICAgICAgICAgIHNpZ25JblN0b3JlZFVybFN0b3JhZ2VLZXk6ICBudWxsLFxuXG4gICAgICAgICAgICBzaWduT3V0UGF0aDogICAgICAgICAgICAgICAgJ2F1dGgvc2lnbl9vdXQnLFxuICAgICAgICAgICAgdmFsaWRhdGVUb2tlblBhdGg6ICAgICAgICAgICdhdXRoL3ZhbGlkYXRlX3Rva2VuJyxcbiAgICAgICAgICAgIHNpZ25PdXRGYWlsZWRWYWxpZGF0ZTogICAgICBmYWxzZSxcblxuICAgICAgICAgICAgcmVnaXN0ZXJBY2NvdW50UGF0aDogICAgICAgICdhdXRoJyxcbiAgICAgICAgICAgIGRlbGV0ZUFjY291bnRQYXRoOiAgICAgICAgICAnYXV0aCcsXG4gICAgICAgICAgICByZWdpc3RlckFjY291bnRDYWxsYmFjazogICAgd2luZG93LmxvY2F0aW9uLmhyZWYsXG5cbiAgICAgICAgICAgIHVwZGF0ZVBhc3N3b3JkUGF0aDogICAgICAgICAnYXV0aCcsXG5cbiAgICAgICAgICAgIHJlc2V0UGFzc3dvcmRQYXRoOiAgICAgICAgICAnYXV0aC9wYXNzd29yZCcsXG4gICAgICAgICAgICByZXNldFBhc3N3b3JkQ2FsbGJhY2s6ICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYsXG5cbiAgICAgICAgICAgIHVzZXJUeXBlczogICAgICAgICAgICAgICAgICBudWxsLFxuXG4gICAgICAgICAgICBvQXV0aEJhc2U6ICAgICAgICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLm9yaWdpbixcbiAgICAgICAgICAgIG9BdXRoUGF0aHM6IHtcbiAgICAgICAgICAgICAgICBnaXRodWI6ICAgICAgICAgICAgICAgICAnYXV0aC9naXRodWInXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgb0F1dGhDYWxsYmFja1BhdGg6ICAgICAgICAgICdvYXV0aF9jYWxsYmFjaycsXG4gICAgICAgICAgICBvQXV0aFdpbmRvd1R5cGU6ICAgICAgICAgICAgJ25ld1dpbmRvdycsXG4gICAgICAgICAgICBvQXV0aFdpbmRvd09wdGlvbnM6ICAgICAgICAgbnVsbCxcblxuICAgICAgICAgICAgZ2xvYmFsT3B0aW9uczoge1xuICAgICAgICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgICAgICAgICAgICAgJ0FjY2VwdCc6ICAgICAgICdhcHBsaWNhdGlvbi9qc29uJ1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICB0aGlzLmF0T3B0aW9ucyA9ICg8YW55Pk9iamVjdCkuYXNzaWduKGRlZmF1bHRPcHRpb25zLCBvcHRpb25zKTtcblxuICAgICAgICB0aGlzLnRyeUxvYWRBdXRoRGF0YSgpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqXG4gICAgICogQWN0aW9uc1xuICAgICAqXG4gICAgICovXG5cbiAgICAvLyBSZWdpc3RlciByZXF1ZXN0XG4gICAgcmVnaXN0ZXJBY2NvdW50KHJlZ2lzdGVyRGF0YTogUmVnaXN0ZXJEYXRhKTogT2JzZXJ2YWJsZTxSZXNwb25zZT4ge1xuXG4gICAgICAgIGlmIChyZWdpc3RlckRhdGEudXNlclR5cGUgPT0gbnVsbClcbiAgICAgICAgICAgIHRoaXMuYXRDdXJyZW50VXNlclR5cGUgPSBudWxsO1xuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuYXRDdXJyZW50VXNlclR5cGUgPSB0aGlzLmdldFVzZXJUeXBlQnlOYW1lKHJlZ2lzdGVyRGF0YS51c2VyVHlwZSk7XG4gICAgICAgICAgICBkZWxldGUgcmVnaXN0ZXJEYXRhLnVzZXJUeXBlO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKFxuICAgICAgICAgICAgcmVnaXN0ZXJEYXRhLnBhc3N3b3JkX2NvbmZpcm1hdGlvbiA9PSBudWxsICYmIFxuICAgICAgICAgICAgcmVnaXN0ZXJEYXRhLnBhc3N3b3JkQ29uZmlybWF0aW9uICE9IG51bGxcbiAgICAgICAgKSB7XG4gICAgICAgICAgICByZWdpc3RlckRhdGEucGFzc3dvcmRfY29uZmlybWF0aW9uICA9IHJlZ2lzdGVyRGF0YS5wYXNzd29yZENvbmZpcm1hdGlvbjtcbiAgICAgICAgICAgIGRlbGV0ZSByZWdpc3RlckRhdGEucGFzc3dvcmRDb25maXJtYXRpb247XG4gICAgICAgIH1cblxuICAgICAgICByZWdpc3RlckRhdGEuY29uZmlybV9zdWNjZXNzX3VybCAgICA9IHRoaXMuYXRPcHRpb25zLnJlZ2lzdGVyQWNjb3VudENhbGxiYWNrO1xuXG4gICAgICAgIHJldHVybiB0aGlzLnBvc3QodGhpcy5nZXRVc2VyUGF0aCgpICsgdGhpcy5hdE9wdGlvbnMucmVnaXN0ZXJBY2NvdW50UGF0aCwgSlNPTi5zdHJpbmdpZnkocmVnaXN0ZXJEYXRhKSk7XG4gICAgfVxuXG4gICAgLy8gRGVsZXRlIEFjY291bnRcbiAgICBkZWxldGVBY2NvdW50KCk6IE9ic2VydmFibGU8UmVzcG9uc2U+IHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZGVsZXRlKHRoaXMuZ2V0VXNlclBhdGgoKSArIHRoaXMuYXRPcHRpb25zLmRlbGV0ZUFjY291bnRQYXRoKTtcbiAgICB9XG5cbiAgICAvLyBTaWduIGluIHJlcXVlc3QgYW5kIHNldCBzdG9yYWdlXG4gICAgc2lnbkluKHNpZ25JbkRhdGE6IFNpZ25JbkRhdGEpOiBPYnNlcnZhYmxlPFJlc3BvbnNlPiB7XG5cbiAgICAgICAgaWYgKHNpZ25JbkRhdGEudXNlclR5cGUgPT0gbnVsbClcbiAgICAgICAgICAgIHRoaXMuYXRDdXJyZW50VXNlclR5cGUgPSBudWxsO1xuICAgICAgICBlbHNlXG4gICAgICAgICAgICB0aGlzLmF0Q3VycmVudFVzZXJUeXBlID0gdGhpcy5nZXRVc2VyVHlwZUJ5TmFtZShzaWduSW5EYXRhLnVzZXJUeXBlKTtcblxuICAgICAgICBsZXQgYm9keSA9IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICAgIGVtYWlsOiAgICAgIHNpZ25JbkRhdGEuZW1haWwsXG4gICAgICAgICAgICBwYXNzd29yZDogICBzaWduSW5EYXRhLnBhc3N3b3JkXG4gICAgICAgIH0pO1xuXG4gICAgICAgIGxldCBvYnNlcnYgPSB0aGlzLnBvc3QodGhpcy5nZXRVc2VyUGF0aCgpICsgdGhpcy5hdE9wdGlvbnMuc2lnbkluUGF0aCwgYm9keSk7XG5cbiAgICAgICAgb2JzZXJ2LnN1YnNjcmliZShyZXMgPT4gdGhpcy5hdEN1cnJlbnRVc2VyRGF0YSA9IHJlcy5qc29uKCkuZGF0YSwgX2Vycm9yID0+IG51bGwpO1xuXG4gICAgICAgIHJldHVybiBvYnNlcnY7XG4gICAgfVxuXG4gICAgc2lnbkluT0F1dGgob0F1dGhUeXBlOiBzdHJpbmcpIHtcblxuICAgICAgICBsZXQgb0F1dGhQYXRoOiBzdHJpbmcgPSB0aGlzLmdldE9BdXRoUGF0aChvQXV0aFR5cGUpO1xuICAgICAgICBsZXQgY2FsbGJhY2tVcmw6IHN0cmluZyA9IGAke3dpbmRvdy5sb2NhdGlvbi5vcmlnaW59LyR7dGhpcy5hdE9wdGlvbnMub0F1dGhDYWxsYmFja1BhdGh9YDtcbiAgICAgICAgbGV0IG9BdXRoV2luZG93VHlwZTogc3RyaW5nID0gdGhpcy5hdE9wdGlvbnMub0F1dGhXaW5kb3dUeXBlO1xuICAgICAgICBsZXQgYXV0aFVybDogc3RyaW5nID0gdGhpcy5nZXRPQXV0aFVybChvQXV0aFBhdGgsIGNhbGxiYWNrVXJsLCBvQXV0aFdpbmRvd1R5cGUpO1xuXG4gICAgICAgIGlmIChvQXV0aFdpbmRvd1R5cGUgPT0gJ25ld1dpbmRvdycpIHtcbiAgICAgICAgICAgIGxldCBvQXV0aFdpbmRvd09wdGlvbnMgPSB0aGlzLmF0T3B0aW9ucy5vQXV0aFdpbmRvd09wdGlvbnM7XG4gICAgICAgICAgICBsZXQgd2luZG93T3B0aW9ucyA9ICcnO1xuXG4gICAgICAgICAgICBpZiAob0F1dGhXaW5kb3dPcHRpb25zKSB7XG4gICAgICAgICAgICAgICAgZm9yIChsZXQga2V5IGluIG9BdXRoV2luZG93T3B0aW9ucykge1xuICAgICAgICAgICAgICAgICAgICB3aW5kb3dPcHRpb25zICs9IGAsJHtrZXl9PSR7b0F1dGhXaW5kb3dPcHRpb25zW2tleV19YDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGxldCBwb3B1cCA9IHdpbmRvdy5vcGVuKFxuICAgICAgICAgICAgICAgIGF1dGhVcmwsXG4gICAgICAgICAgICAgICAgJ19ibGFuaycsXG4gICAgICAgICAgICAgICAgYGNsb3NlYnV0dG9uY2FwdGlvbj1DYW5jZWwke3dpbmRvd09wdGlvbnN9YFxuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnJlcXVlc3RDcmVkZW50aWFsc1ZpYVBvc3RNZXNzYWdlKHBvcHVwKTtcbiAgICAgICAgfSBlbHNlIGlmIChvQXV0aFdpbmRvd1R5cGUgPT0gJ3NhbWVXaW5kb3cnKSB7XG4gICAgICAgICAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9IGF1dGhVcmw7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aHJvdyBgVW5zdXBwb3J0ZWQgb0F1dGhXaW5kb3dUeXBlIFwiJHtvQXV0aFdpbmRvd1R5cGV9XCJgO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJvY2Vzc09BdXRoQ2FsbGJhY2soKTogdm9pZCB7XG4gICAgICAgIHRoaXMuZ2V0QXV0aERhdGFGcm9tUGFyYW1zKCk7XG4gICAgfVxuXG4gICAgLy8gU2lnbiBvdXQgcmVxdWVzdCBhbmQgZGVsZXRlIHN0b3JhZ2VcbiAgICBzaWduT3V0KCk6IE9ic2VydmFibGU8UmVzcG9uc2U+IHtcbiAgICAgICAgbGV0IG9ic2VydiA9IHRoaXMuZGVsZXRlKHRoaXMuZ2V0VXNlclBhdGgoKSArIHRoaXMuYXRPcHRpb25zLnNpZ25PdXRQYXRoKTtcblxuICAgICAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSgnYWNjZXNzVG9rZW4nKTtcbiAgICAgICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oJ2NsaWVudCcpO1xuICAgICAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSgnZXhwaXJ5Jyk7XG4gICAgICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKCd0b2tlblR5cGUnKTtcbiAgICAgICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oJ3VpZCcpO1xuXG4gICAgICAgIHRoaXMuYXRDdXJyZW50QXV0aERhdGEgPSBudWxsO1xuICAgICAgICB0aGlzLmF0Q3VycmVudFVzZXJUeXBlID0gbnVsbDtcbiAgICAgICAgdGhpcy5hdEN1cnJlbnRVc2VyRGF0YSA9IG51bGw7XG5cbiAgICAgICAgcmV0dXJuIG9ic2VydjtcbiAgICB9XG5cbiAgICAvLyBWYWxpZGF0ZSB0b2tlbiByZXF1ZXN0XG4gICAgdmFsaWRhdGVUb2tlbigpOiBPYnNlcnZhYmxlPFJlc3BvbnNlPiB7XG4gICAgICAgIGxldCBvYnNlcnYgPSB0aGlzLmdldCh0aGlzLmdldFVzZXJQYXRoKCkgKyB0aGlzLmF0T3B0aW9ucy52YWxpZGF0ZVRva2VuUGF0aCk7XG5cbiAgICAgICAgb2JzZXJ2LnN1YnNjcmliZShcbiAgICAgICAgICAgIHJlcyA9PiB0aGlzLmF0Q3VycmVudFVzZXJEYXRhID0gcmVzLmpzb24oKS5kYXRhLFxuICAgICAgICAgICAgZXJyb3IgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChlcnJvci5zdGF0dXMgPT09IDQwMSAmJiB0aGlzLmF0T3B0aW9ucy5zaWduT3V0RmFpbGVkVmFsaWRhdGUpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zaWduT3V0KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgcmV0dXJuIG9ic2VydjtcbiAgICB9XG5cbiAgICAvLyBVcGRhdGUgcGFzc3dvcmQgcmVxdWVzdFxuICAgIHVwZGF0ZVBhc3N3b3JkKHVwZGF0ZVBhc3N3b3JkRGF0YTogVXBkYXRlUGFzc3dvcmREYXRhKTogT2JzZXJ2YWJsZTxSZXNwb25zZT4ge1xuXG4gICAgICAgIGlmICh1cGRhdGVQYXNzd29yZERhdGEudXNlclR5cGUgIT0gbnVsbClcbiAgICAgICAgICAgIHRoaXMuYXRDdXJyZW50VXNlclR5cGUgPSB0aGlzLmdldFVzZXJUeXBlQnlOYW1lKHVwZGF0ZVBhc3N3b3JkRGF0YS51c2VyVHlwZSk7XG5cbiAgICAgICAgbGV0IGFyZ3M6IGFueTtcblxuICAgICAgICBpZiAodXBkYXRlUGFzc3dvcmREYXRhLnBhc3N3b3JkQ3VycmVudCA9PSBudWxsKSB7XG4gICAgICAgICAgICBhcmdzID0ge1xuICAgICAgICAgICAgICAgIHBhc3N3b3JkOiAgICAgICAgICAgICAgIHVwZGF0ZVBhc3N3b3JkRGF0YS5wYXNzd29yZCxcbiAgICAgICAgICAgICAgICBwYXNzd29yZF9jb25maXJtYXRpb246ICB1cGRhdGVQYXNzd29yZERhdGEucGFzc3dvcmRDb25maXJtYXRpb25cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGFyZ3MgPSB7XG4gICAgICAgICAgICAgICAgY3VycmVudF9wYXNzd29yZDogICAgICAgdXBkYXRlUGFzc3dvcmREYXRhLnBhc3N3b3JkQ3VycmVudCxcbiAgICAgICAgICAgICAgICBwYXNzd29yZDogICAgICAgICAgICAgICB1cGRhdGVQYXNzd29yZERhdGEucGFzc3dvcmQsXG4gICAgICAgICAgICAgICAgcGFzc3dvcmRfY29uZmlybWF0aW9uOiAgdXBkYXRlUGFzc3dvcmREYXRhLnBhc3N3b3JkQ29uZmlybWF0aW9uXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHVwZGF0ZVBhc3N3b3JkRGF0YS5yZXNldFBhc3N3b3JkVG9rZW4pIHtcbiAgICAgICAgICAgIGFyZ3MucmVzZXRfcGFzc3dvcmRfdG9rZW4gPSB1cGRhdGVQYXNzd29yZERhdGEucmVzZXRQYXNzd29yZFRva2VuO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGJvZHkgPSBKU09OLnN0cmluZ2lmeShhcmdzKTtcbiAgICAgICAgcmV0dXJuIHRoaXMucHV0KHRoaXMuZ2V0VXNlclBhdGgoKSArIHRoaXMuYXRPcHRpb25zLnVwZGF0ZVBhc3N3b3JkUGF0aCwgYm9keSk7XG4gICAgfVxuXG4gICAgLy8gUmVzZXQgcGFzc3dvcmQgcmVxdWVzdFxuICAgIHJlc2V0UGFzc3dvcmQocmVzZXRQYXNzd29yZERhdGE6IFJlc2V0UGFzc3dvcmREYXRhKTogT2JzZXJ2YWJsZTxSZXNwb25zZT4ge1xuXG4gICAgICAgIGlmIChyZXNldFBhc3N3b3JkRGF0YS51c2VyVHlwZSA9PSBudWxsKVxuICAgICAgICAgICAgdGhpcy5hdEN1cnJlbnRVc2VyVHlwZSA9IG51bGw7XG4gICAgICAgIGVsc2VcbiAgICAgICAgICAgIHRoaXMuYXRDdXJyZW50VXNlclR5cGUgPSB0aGlzLmdldFVzZXJUeXBlQnlOYW1lKHJlc2V0UGFzc3dvcmREYXRhLnVzZXJUeXBlKTtcblxuICAgICAgICBsZXQgYm9keSA9IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICAgIGVtYWlsOiAgICAgICAgICByZXNldFBhc3N3b3JkRGF0YS5lbWFpbCxcbiAgICAgICAgICAgIHJlZGlyZWN0X3VybDogICB0aGlzLmF0T3B0aW9ucy5yZXNldFBhc3N3b3JkQ2FsbGJhY2tcbiAgICAgICAgfSk7XG5cbiAgICAgICAgcmV0dXJuIHRoaXMucG9zdCh0aGlzLmdldFVzZXJQYXRoKCkgKyB0aGlzLmF0T3B0aW9ucy5yZXNldFBhc3N3b3JkUGF0aCwgYm9keSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICpcbiAgICAgKiBIVFRQIFdyYXBwZXJzXG4gICAgICpcbiAgICAgKi9cblxuICAgIGdldCh1cmw6IHN0cmluZywgb3B0aW9ucz86IFJlcXVlc3RPcHRpb25zQXJncyk6IE9ic2VydmFibGU8UmVzcG9uc2U+IHtcbiAgICAgICAgcmV0dXJuIHRoaXMucmVxdWVzdCh0aGlzLm1lcmdlUmVxdWVzdE9wdGlvbnNBcmdzKHtcbiAgICAgICAgICAgIHVybDogICAgdGhpcy5nZXRBcGlQYXRoKCkgKyB1cmwsXG4gICAgICAgICAgICBtZXRob2Q6IFJlcXVlc3RNZXRob2QuR2V0XG4gICAgICAgIH0sIG9wdGlvbnMpKTtcbiAgICB9XG5cbiAgICBwb3N0KHVybDogc3RyaW5nLCBib2R5OiBhbnksIG9wdGlvbnM/OiBSZXF1ZXN0T3B0aW9uc0FyZ3MpOiBPYnNlcnZhYmxlPFJlc3BvbnNlPiB7XG4gICAgICAgIHJldHVybiB0aGlzLnJlcXVlc3QodGhpcy5tZXJnZVJlcXVlc3RPcHRpb25zQXJncyh7XG4gICAgICAgICAgICB1cmw6ICAgIHRoaXMuZ2V0QXBpUGF0aCgpICsgdXJsLFxuICAgICAgICAgICAgbWV0aG9kOiBSZXF1ZXN0TWV0aG9kLlBvc3QsXG4gICAgICAgICAgICBib2R5OiAgIGJvZHlcbiAgICAgICAgfSwgb3B0aW9ucykpO1xuICAgIH1cblxuICAgIHB1dCh1cmw6IHN0cmluZywgYm9keTogYW55LCBvcHRpb25zPzogUmVxdWVzdE9wdGlvbnNBcmdzKTogT2JzZXJ2YWJsZTxSZXNwb25zZT4ge1xuICAgICAgICByZXR1cm4gdGhpcy5yZXF1ZXN0KHRoaXMubWVyZ2VSZXF1ZXN0T3B0aW9uc0FyZ3Moe1xuICAgICAgICAgICAgdXJsOiAgICB0aGlzLmdldEFwaVBhdGgoKSArIHVybCxcbiAgICAgICAgICAgIG1ldGhvZDogUmVxdWVzdE1ldGhvZC5QdXQsXG4gICAgICAgICAgICBib2R5OiAgIGJvZHlcbiAgICAgICAgfSwgb3B0aW9ucykpO1xuICAgIH1cblxuICAgIGRlbGV0ZSh1cmw6IHN0cmluZywgb3B0aW9ucz86IFJlcXVlc3RPcHRpb25zQXJncyk6IE9ic2VydmFibGU8UmVzcG9uc2U+IHtcbiAgICAgICAgcmV0dXJuIHRoaXMucmVxdWVzdCh0aGlzLm1lcmdlUmVxdWVzdE9wdGlvbnNBcmdzKHtcbiAgICAgICAgICAgIHVybDogICAgdGhpcy5nZXRBcGlQYXRoKCkgKyB1cmwsXG4gICAgICAgICAgICBtZXRob2Q6IFJlcXVlc3RNZXRob2QuRGVsZXRlXG4gICAgICAgIH0sIG9wdGlvbnMpKTtcbiAgICB9XG5cbiAgICBwYXRjaCh1cmw6IHN0cmluZywgYm9keTogYW55LCBvcHRpb25zPzogUmVxdWVzdE9wdGlvbnNBcmdzKTogT2JzZXJ2YWJsZTxSZXNwb25zZT4ge1xuICAgICAgICByZXR1cm4gdGhpcy5yZXF1ZXN0KHRoaXMubWVyZ2VSZXF1ZXN0T3B0aW9uc0FyZ3Moe1xuICAgICAgICAgICAgdXJsOiAgICB0aGlzLmdldEFwaVBhdGgoKSArIHVybCxcbiAgICAgICAgICAgIG1ldGhvZDogUmVxdWVzdE1ldGhvZC5QYXRjaCxcbiAgICAgICAgICAgIGJvZHk6ICAgYm9keVxuICAgICAgICB9LCBvcHRpb25zKSk7XG4gICAgfVxuXG4gICAgaGVhZChwYXRoOiBzdHJpbmcsIG9wdGlvbnM/OiBSZXF1ZXN0T3B0aW9uc0FyZ3MpOiBPYnNlcnZhYmxlPFJlc3BvbnNlPiB7XG4gICAgICAgIHJldHVybiB0aGlzLnJlcXVlc3Qoe1xuICAgICAgICAgICAgbWV0aG9kOiBSZXF1ZXN0TWV0aG9kLkhlYWQsXG4gICAgICAgICAgICB1cmw6ICAgIHRoaXMuZ2V0QXBpUGF0aCgpICsgcGF0aFxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBvcHRpb25zKHVybDogc3RyaW5nLCBvcHRpb25zPzogUmVxdWVzdE9wdGlvbnNBcmdzKTogT2JzZXJ2YWJsZTxSZXNwb25zZT4ge1xuICAgICAgICByZXR1cm4gdGhpcy5yZXF1ZXN0KHRoaXMubWVyZ2VSZXF1ZXN0T3B0aW9uc0FyZ3Moe1xuICAgICAgICAgICAgdXJsOiAgICB0aGlzLmdldEFwaVBhdGgoKSArIHVybCxcbiAgICAgICAgICAgIG1ldGhvZDogUmVxdWVzdE1ldGhvZC5PcHRpb25zXG4gICAgICAgIH0sIG9wdGlvbnMpKTtcbiAgICB9XG5cbiAgICAvLyBDb25zdHJ1Y3QgYW5kIHNlbmQgSHR0cCByZXF1ZXN0XG4gICAgcmVxdWVzdChvcHRpb25zOiBSZXF1ZXN0T3B0aW9uc0FyZ3MpOiBPYnNlcnZhYmxlPFJlc3BvbnNlPiB7XG5cbiAgICAgICAgbGV0IGJhc2VSZXF1ZXN0T3B0aW9uczogUmVxdWVzdE9wdGlvbnM7XG4gICAgICAgIGxldCBiYXNlSGVhZGVyczogICAgICAgIHsgW2tleTpzdHJpbmddOiBzdHJpbmc7IH0gPSB0aGlzLmF0T3B0aW9ucy5nbG9iYWxPcHRpb25zLmhlYWRlcnM7XG5cbiAgICAgICAgLy8gR2V0IGF1dGggZGF0YSBmcm9tIGxvY2FsIHN0b3JhZ2VcbiAgICAgICAgdGhpcy5nZXRBdXRoRGF0YUZyb21TdG9yYWdlKCk7XG4gICAgICAgIFxuICAgICAgICAvLyBNZXJnZSBhdXRoIGhlYWRlcnMgdG8gcmVxdWVzdCBpZiBzZXRcbiAgICAgICAgaWYgKHRoaXMuYXRDdXJyZW50QXV0aERhdGEgIT0gbnVsbCkge1xuICAgICAgICAgICAgKDxhbnk+T2JqZWN0KS5hc3NpZ24oYmFzZUhlYWRlcnMsIHtcbiAgICAgICAgICAgICAgICAnYWNjZXNzLXRva2VuJzogdGhpcy5hdEN1cnJlbnRBdXRoRGF0YS5hY2Nlc3NUb2tlbixcbiAgICAgICAgICAgICAgICAnY2xpZW50JzogICAgICAgdGhpcy5hdEN1cnJlbnRBdXRoRGF0YS5jbGllbnQsXG4gICAgICAgICAgICAgICAgJ2V4cGlyeSc6ICAgICAgIHRoaXMuYXRDdXJyZW50QXV0aERhdGEuZXhwaXJ5LFxuICAgICAgICAgICAgICAgICd0b2tlbi10eXBlJzogICB0aGlzLmF0Q3VycmVudEF1dGhEYXRhLnRva2VuVHlwZSxcbiAgICAgICAgICAgICAgICAndWlkJzogICAgICAgICAgdGhpcy5hdEN1cnJlbnRBdXRoRGF0YS51aWRcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgYmFzZVJlcXVlc3RPcHRpb25zID0gbmV3IFJlcXVlc3RPcHRpb25zKHtcbiAgICAgICAgICAgIGhlYWRlcnM6IG5ldyBIZWFkZXJzKGJhc2VIZWFkZXJzKVxuICAgICAgICB9KTtcblxuICAgICAgICAvLyBNZXJnZSBzdGFuZGFyZCBhbmQgY3VzdG9tIFJlcXVlc3RPcHRpb25zXG4gICAgICAgIGJhc2VSZXF1ZXN0T3B0aW9ucyA9IGJhc2VSZXF1ZXN0T3B0aW9ucy5tZXJnZShvcHRpb25zKTtcblxuICAgICAgICBsZXQgcmVzcG9uc2UgPSB0aGlzLmh0dHAucmVxdWVzdChuZXcgUmVxdWVzdChiYXNlUmVxdWVzdE9wdGlvbnMpKS5waXBlKHNoYXJlKCkpO1xuICAgICAgICB0aGlzLmhhbmRsZVJlc3BvbnNlKHJlc3BvbnNlKTtcblxuICAgICAgICByZXR1cm4gcmVzcG9uc2U7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBtZXJnZVJlcXVlc3RPcHRpb25zQXJncyhvcHRpb25zOiBSZXF1ZXN0T3B0aW9uc0FyZ3MsIGFkZE9wdGlvbnM/OiBSZXF1ZXN0T3B0aW9uc0FyZ3MpOiBSZXF1ZXN0T3B0aW9uc0FyZ3Mge1xuXG4gICAgICAgIGxldCByZXR1cm5PcHRpb25zOiBSZXF1ZXN0T3B0aW9uc0FyZ3MgPSBvcHRpb25zO1xuXG4gICAgICAgIGlmIChvcHRpb25zKVxuICAgICAgICAgICAgKDxhbnk+T2JqZWN0KS5hc3NpZ24ocmV0dXJuT3B0aW9ucywgYWRkT3B0aW9ucyk7XG5cbiAgICAgICAgcmV0dXJuIHJldHVybk9wdGlvbnM7XG4gICAgfVxuXG4gICAgLy8gQ2hlY2sgaWYgcmVzcG9uc2UgaXMgY29tcGxldGUgYW5kIG5ld2VyLCB0aGVuIHVwZGF0ZSBzdG9yYWdlXG4gICAgcHJpdmF0ZSBoYW5kbGVSZXNwb25zZShyZXNwb25zZTogT2JzZXJ2YWJsZTxSZXNwb25zZT4pOiB2b2lkIHtcbiAgICAgICAgcmVzcG9uc2Uuc3Vic2NyaWJlKHJlcyA9PiB7XG4gICAgICAgICAgICB0aGlzLmdldEF1dGhIZWFkZXJzRnJvbVJlc3BvbnNlKDxhbnk+cmVzKTtcbiAgICAgICAgfSwgZXJyb3IgPT4ge1xuICAgICAgICAgICAgdGhpcy5nZXRBdXRoSGVhZGVyc0Zyb21SZXNwb25zZSg8YW55PmVycm9yKTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICpcbiAgICAgKiBHZXQgQXV0aCBEYXRhXG4gICAgICpcbiAgICAgKi9cblxuICAgIC8vIFRyeSB0byBsb2FkIGF1dGggZGF0YVxuICAgIHByaXZhdGUgdHJ5TG9hZEF1dGhEYXRhKCk6IHZvaWQge1xuXG4gICAgICAgIGxldCB1c2VyVHlwZSA9IHRoaXMuZ2V0VXNlclR5cGVCeU5hbWUobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3VzZXJUeXBlJykpO1xuXG4gICAgICAgIGlmICh1c2VyVHlwZSlcbiAgICAgICAgICAgIHRoaXMuYXRDdXJyZW50VXNlclR5cGUgPSB1c2VyVHlwZTtcblxuICAgICAgICB0aGlzLmdldEF1dGhEYXRhRnJvbVN0b3JhZ2UoKTtcblxuICAgICAgICBpZih0aGlzLmFjdGl2YXRlZFJvdXRlKVxuICAgICAgICAgICAgdGhpcy5nZXRBdXRoRGF0YUZyb21QYXJhbXMoKTtcblxuICAgICAgICBpZiAodGhpcy5hdEN1cnJlbnRBdXRoRGF0YSlcbiAgICAgICAgICAgIHRoaXMudmFsaWRhdGVUb2tlbigpO1xuICAgIH1cblxuICAgIC8vIFBhcnNlIEF1dGggZGF0YSBmcm9tIHJlc3BvbnNlXG4gICAgcHJpdmF0ZSBnZXRBdXRoSGVhZGVyc0Zyb21SZXNwb25zZShkYXRhOiBhbnkpOiB2b2lkIHtcbiAgICAgICAgbGV0IGhlYWRlcnMgPSBkYXRhLmhlYWRlcnM7XG5cbiAgICAgICAgbGV0IGF1dGhEYXRhOiBBdXRoRGF0YSA9IHtcbiAgICAgICAgICAgIGFjY2Vzc1Rva2VuOiAgICBoZWFkZXJzLmdldCgnYWNjZXNzLXRva2VuJyksXG4gICAgICAgICAgICBjbGllbnQ6ICAgICAgICAgaGVhZGVycy5nZXQoJ2NsaWVudCcpLFxuICAgICAgICAgICAgZXhwaXJ5OiAgICAgICAgIGhlYWRlcnMuZ2V0KCdleHBpcnknKSxcbiAgICAgICAgICAgIHRva2VuVHlwZTogICAgICBoZWFkZXJzLmdldCgndG9rZW4tdHlwZScpLFxuICAgICAgICAgICAgdWlkOiAgICAgICAgICAgIGhlYWRlcnMuZ2V0KCd1aWQnKVxuICAgICAgICB9O1xuXG4gICAgICAgIHRoaXMuc2V0QXV0aERhdGEoYXV0aERhdGEpO1xuICAgIH1cblxuICAgIC8vIFBhcnNlIEF1dGggZGF0YSBmcm9tIHBvc3QgbWVzc2FnZVxuICAgIHByaXZhdGUgZ2V0QXV0aERhdGFGcm9tUG9zdE1lc3NhZ2UoZGF0YTogYW55KTogdm9pZCB7XG4gICAgICAgIGxldCBhdXRoRGF0YTogQXV0aERhdGEgPSB7XG4gICAgICAgICAgICBhY2Nlc3NUb2tlbjogICAgZGF0YVsnYXV0aF90b2tlbiddLFxuICAgICAgICAgICAgY2xpZW50OiAgICAgICAgIGRhdGFbJ2NsaWVudF9pZCddLFxuICAgICAgICAgICAgZXhwaXJ5OiAgICAgICAgIGRhdGFbJ2V4cGlyeSddLFxuICAgICAgICAgICAgdG9rZW5UeXBlOiAgICAgICdCZWFyZXInLFxuICAgICAgICAgICAgdWlkOiAgICAgICAgICAgIGRhdGFbJ3VpZCddXG4gICAgICAgIH07XG5cbiAgICAgICAgdGhpcy5zZXRBdXRoRGF0YShhdXRoRGF0YSk7XG4gICAgfVxuXG4gICAgLy8gVHJ5IHRvIGdldCBhdXRoIGRhdGEgZnJvbSBzdG9yYWdlLlxuICAgIHByaXZhdGUgZ2V0QXV0aERhdGFGcm9tU3RvcmFnZSgpOiB2b2lkIHtcblxuICAgICAgICBsZXQgYXV0aERhdGE6IEF1dGhEYXRhID0ge1xuICAgICAgICAgICAgYWNjZXNzVG9rZW46ICAgIGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdhY2Nlc3NUb2tlbicpLFxuICAgICAgICAgICAgY2xpZW50OiAgICAgICAgIGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdjbGllbnQnKSxcbiAgICAgICAgICAgIGV4cGlyeTogICAgICAgICBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnZXhwaXJ5JyksXG4gICAgICAgICAgICB0b2tlblR5cGU6ICAgICAgbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3Rva2VuVHlwZScpLFxuICAgICAgICAgICAgdWlkOiAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5nZXRJdGVtKCd1aWQnKVxuICAgICAgICB9O1xuXG4gICAgICAgIGlmICh0aGlzLmNoZWNrQXV0aERhdGEoYXV0aERhdGEpKVxuICAgICAgICAgICAgdGhpcy5hdEN1cnJlbnRBdXRoRGF0YSA9IGF1dGhEYXRhO1xuICAgIH1cblxuICAgIC8vIFRyeSB0byBnZXQgYXV0aCBkYXRhIGZyb20gdXJsIHBhcmFtZXRlcnMuXG4gICAgcHJpdmF0ZSBnZXRBdXRoRGF0YUZyb21QYXJhbXMoKTogdm9pZCB7XG4gICAgICAgIGlmKHRoaXMuYWN0aXZhdGVkUm91dGUucXVlcnlQYXJhbXMpIC8vIEZpeCBmb3IgVGVzdGluZywgbmVlZHMgdG8gYmUgcmVtb3ZlZCBsYXRlclxuICAgICAgICAgICAgdGhpcy5hY3RpdmF0ZWRSb3V0ZS5xdWVyeVBhcmFtcy5zdWJzY3JpYmUocXVlcnlQYXJhbXMgPT4ge1xuICAgICAgICAgICAgICAgIGxldCBhdXRoRGF0YTogQXV0aERhdGEgPSB7XG4gICAgICAgICAgICAgICAgICAgIGFjY2Vzc1Rva2VuOiAgICBxdWVyeVBhcmFtc1sndG9rZW4nXSB8fCBxdWVyeVBhcmFtc1snYXV0aF90b2tlbiddLFxuICAgICAgICAgICAgICAgICAgICBjbGllbnQ6ICAgICAgICAgcXVlcnlQYXJhbXNbJ2NsaWVudF9pZCddLFxuICAgICAgICAgICAgICAgICAgICBleHBpcnk6ICAgICAgICAgcXVlcnlQYXJhbXNbJ2V4cGlyeSddLFxuICAgICAgICAgICAgICAgICAgICB0b2tlblR5cGU6ICAgICAgJ0JlYXJlcicsXG4gICAgICAgICAgICAgICAgICAgIHVpZDogICAgICAgICAgICBxdWVyeVBhcmFtc1sndWlkJ11cbiAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuY2hlY2tBdXRoRGF0YShhdXRoRGF0YSkpXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYXRDdXJyZW50QXV0aERhdGEgPSBhdXRoRGF0YTtcbiAgICAgICAgICAgIH0pO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqXG4gICAgICogU2V0IEF1dGggRGF0YVxuICAgICAqXG4gICAgICovXG5cbiAgICAvLyBXcml0ZSBhdXRoIGRhdGEgdG8gc3RvcmFnZVxuICAgIHByaXZhdGUgc2V0QXV0aERhdGEoYXV0aERhdGE6IEF1dGhEYXRhKTogdm9pZCB7XG5cbiAgICAgICAgaWYgKHRoaXMuY2hlY2tBdXRoRGF0YShhdXRoRGF0YSkpIHtcblxuICAgICAgICAgICAgdGhpcy5hdEN1cnJlbnRBdXRoRGF0YSA9IGF1dGhEYXRhO1xuXG4gICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnYWNjZXNzVG9rZW4nLCBhdXRoRGF0YS5hY2Nlc3NUb2tlbik7XG4gICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnY2xpZW50JywgYXV0aERhdGEuY2xpZW50KTtcbiAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdleHBpcnknLCBhdXRoRGF0YS5leHBpcnkpO1xuICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ3Rva2VuVHlwZScsIGF1dGhEYXRhLnRva2VuVHlwZSk7XG4gICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgndWlkJywgYXV0aERhdGEudWlkKTtcblxuICAgICAgICAgICAgaWYgKHRoaXMuYXRDdXJyZW50VXNlclR5cGUgIT0gbnVsbClcbiAgICAgICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgndXNlclR5cGUnLCB0aGlzLmF0Q3VycmVudFVzZXJUeXBlLm5hbWUpO1xuXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKlxuICAgICAqIFZhbGlkYXRlIEF1dGggRGF0YVxuICAgICAqXG4gICAgICovXG5cbiAgICAvLyBDaGVjayBpZiBhdXRoIGRhdGEgY29tcGxldGUgYW5kIGlmIHJlc3BvbnNlIHRva2VuIGlzIG5ld2VyXG4gICAgcHJpdmF0ZSBjaGVja0F1dGhEYXRhKGF1dGhEYXRhOiBBdXRoRGF0YSk6IGJvb2xlYW4ge1xuXG4gICAgICAgIGlmIChcbiAgICAgICAgICAgIGF1dGhEYXRhLmFjY2Vzc1Rva2VuICE9IG51bGwgJiZcbiAgICAgICAgICAgIGF1dGhEYXRhLmNsaWVudCAhPSBudWxsICYmXG4gICAgICAgICAgICBhdXRoRGF0YS5leHBpcnkgIT0gbnVsbCAmJlxuICAgICAgICAgICAgYXV0aERhdGEudG9rZW5UeXBlICE9IG51bGwgJiZcbiAgICAgICAgICAgIGF1dGhEYXRhLnVpZCAhPSBudWxsXG4gICAgICAgICkge1xuICAgICAgICAgICAgaWYgKHRoaXMuYXRDdXJyZW50QXV0aERhdGEgIT0gbnVsbClcbiAgICAgICAgICAgICAgICByZXR1cm4gYXV0aERhdGEuZXhwaXJ5ID49IHRoaXMuYXRDdXJyZW50QXV0aERhdGEuZXhwaXJ5O1xuICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICpcbiAgICAgKiBDb25zdHJ1Y3QgUGF0aHMgLyBVcmxzXG4gICAgICpcbiAgICAgKi9cblxuICAgIHByaXZhdGUgZ2V0VXNlclBhdGgoKTogc3RyaW5nIHtcbiAgICAgICAgaWYgKHRoaXMuYXRDdXJyZW50VXNlclR5cGUgPT0gbnVsbClcbiAgICAgICAgICAgIHJldHVybiAnJztcbiAgICAgICAgZWxzZVxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuYXRDdXJyZW50VXNlclR5cGUucGF0aCArICcvJztcbiAgICB9XG5cbiAgICBwcml2YXRlIGdldEFwaVBhdGgoKTogc3RyaW5nIHtcbiAgICAgICAgbGV0IGNvbnN0cnVjdGVkUGF0aCA9ICcnO1xuXG4gICAgICAgIGlmICh0aGlzLmF0T3B0aW9ucy5hcGlCYXNlICE9IG51bGwpXG4gICAgICAgICAgICBjb25zdHJ1Y3RlZFBhdGggKz0gdGhpcy5hdE9wdGlvbnMuYXBpQmFzZSArICcvJztcblxuICAgICAgICBpZiAodGhpcy5hdE9wdGlvbnMuYXBpUGF0aCAhPSBudWxsKVxuICAgICAgICAgICAgY29uc3RydWN0ZWRQYXRoICs9IHRoaXMuYXRPcHRpb25zLmFwaVBhdGggKyAnLyc7XG5cbiAgICAgICAgcmV0dXJuIGNvbnN0cnVjdGVkUGF0aDtcbiAgICB9XG5cbiAgICBwcml2YXRlIGdldE9BdXRoUGF0aChvQXV0aFR5cGU6IHN0cmluZyk6IHN0cmluZyB7XG4gICAgICAgIGxldCBvQXV0aFBhdGg6IHN0cmluZztcblxuICAgICAgICBvQXV0aFBhdGggPSB0aGlzLmF0T3B0aW9ucy5vQXV0aFBhdGhzW29BdXRoVHlwZV07XG5cbiAgICAgICAgaWYgKG9BdXRoUGF0aCA9PSBudWxsKVxuICAgICAgICAgICAgb0F1dGhQYXRoID0gYC9hdXRoLyR7b0F1dGhUeXBlfWA7XG5cbiAgICAgICAgcmV0dXJuIG9BdXRoUGF0aDtcbiAgICB9XG5cbiAgICBwcml2YXRlIGdldE9BdXRoVXJsKG9BdXRoUGF0aDogc3RyaW5nLCBjYWxsYmFja1VybDogc3RyaW5nLCB3aW5kb3dUeXBlOiBzdHJpbmcpOiBzdHJpbmcge1xuICAgICAgICBsZXQgdXJsOiBzdHJpbmc7XG5cbiAgICAgICAgdXJsID0gICBgJHt0aGlzLmF0T3B0aW9ucy5vQXV0aEJhc2V9LyR7b0F1dGhQYXRofWA7XG4gICAgICAgIHVybCArPSAgYD9vbW5pYXV0aF93aW5kb3dfdHlwZT0ke3dpbmRvd1R5cGV9YDtcbiAgICAgICAgdXJsICs9ICBgJmF1dGhfb3JpZ2luX3VybD0ke2VuY29kZVVSSUNvbXBvbmVudChjYWxsYmFja1VybCl9YDtcblxuICAgICAgICBpZiAodGhpcy5hdEN1cnJlbnRVc2VyVHlwZSAhPSBudWxsKVxuICAgICAgICAgICAgdXJsICs9IGAmcmVzb3VyY2VfY2xhc3M9JHt0aGlzLmF0Q3VycmVudFVzZXJUeXBlLm5hbWV9YDtcblxuICAgICAgICByZXR1cm4gdXJsO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqXG4gICAgICogT0F1dGhcbiAgICAgKlxuICAgICAqL1xuXG4gICAgcHJpdmF0ZSByZXF1ZXN0Q3JlZGVudGlhbHNWaWFQb3N0TWVzc2FnZShhdXRoV2luZG93OiBhbnkpOiBPYnNlcnZhYmxlPGFueT4ge1xuICAgICAgICBsZXQgcG9sbGVyT2JzZXJ2ID0gaW50ZXJ2YWwoNTAwKTtcblxuICAgICAgICBsZXQgcmVzcG9uc2VPYnNlcnYgPSBmcm9tRXZlbnQod2luZG93LCAnbWVzc2FnZScpLnBpcGUoXG4gICAgICAgICAgICBwbHVjaygnZGF0YScpLFxuICAgICAgICAgICAgZmlsdGVyKHRoaXMub0F1dGhXaW5kb3dSZXNwb25zZUZpbHRlcilcbiAgICAgICAgKTtcblxuICAgICAgICBsZXQgcmVzcG9uc2VTdWJzY3JpcHRpb24gPSByZXNwb25zZU9ic2Vydi5zdWJzY3JpYmUoXG4gICAgICAgICAgICB0aGlzLmdldEF1dGhEYXRhRnJvbVBvc3RNZXNzYWdlLmJpbmQodGhpcylcbiAgICAgICAgKTtcblxuICAgICAgICBsZXQgcG9sbGVyU3Vic2NyaXB0aW9uID0gcG9sbGVyT2JzZXJ2LnN1YnNjcmliZSgoKSA9PiB7XG4gICAgICAgICAgICBpZiAoYXV0aFdpbmRvdy5jbG9zZWQpXG4gICAgICAgICAgICAgICAgcG9sbGVyU3Vic2NyaXB0aW9uLnVuc3Vic2NyaWJlKCk7XG4gICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgYXV0aFdpbmRvdy5wb3N0TWVzc2FnZSgncmVxdWVzdENyZWRlbnRpYWxzJywgJyonKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgcmV0dXJuIHJlc3BvbnNlT2JzZXJ2O1xuICAgIH1cblxuICAgIHByaXZhdGUgb0F1dGhXaW5kb3dSZXNwb25zZUZpbHRlcihkYXRhOiBhbnkpOiBhbnkge1xuICAgICAgICBpZihkYXRhLm1lc3NhZ2UgPT0gJ2RlbGl2ZXJDcmVkZW50aWFscycgfHwgZGF0YS5tZXNzYWdlID09ICdhdXRoRmFpbHVyZScpXG4gICAgICAgICAgICByZXR1cm4gZGF0YTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKlxuICAgICAqIFV0aWxpdGllc1xuICAgICAqXG4gICAgICovXG5cbiAgICAvLyBNYXRjaCB1c2VyIGNvbmZpZyBieSB1c2VyIGNvbmZpZyBuYW1lXG4gICAgcHJpdmF0ZSBnZXRVc2VyVHlwZUJ5TmFtZShuYW1lOiBzdHJpbmcpOiBVc2VyVHlwZSB7XG4gICAgICAgIGlmIChuYW1lID09IG51bGwgfHwgdGhpcy5hdE9wdGlvbnMudXNlclR5cGVzID09IG51bGwpXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcblxuICAgICAgICByZXR1cm4gdGhpcy5hdE9wdGlvbnMudXNlclR5cGVzLmZpbmQoXG4gICAgICAgICAgICB1c2VyVHlwZSA9PiB1c2VyVHlwZS5uYW1lID09PSBuYW1lXG4gICAgICAgICk7XG4gICAgfVxufVxuIiwiaW1wb3J0IHsgQ29tcG9uZW50LCBJbnB1dCB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgQW5ndWxhcjJUb2tlblNlcnZpY2UgfSBmcm9tICcuLi9hbmd1bGFyMi10b2tlbi5zZXJ2aWNlJztcblxuQENvbXBvbmVudCh7XG4gICAgc2VsZWN0b3I6ICAgJ2EydC11aScsXG4gICAgdGVtcGxhdGU6IGBcbiAgICAgICAgPGRpdiBjbGFzcz1cImEydC13cmFwcGVyXCI+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwiYTJ0LWNvbnRhaW5lclwiPlxuICAgICAgICAgICAgICAgIDxyb3V0ZXItb3V0bGV0Pjwvcm91dGVyLW91dGxldD5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2Rpdj5cbiAgICBgLFxuICAgIHN0eWxlczogW2BcbiAgICAgICAgLmEydC13cmFwcGVyIHtcbiAgICAgICAgICAgIHdpZHRoOiAxMDAlO1xuICAgICAgICAgICAgaGVpZ2h0OiAxMDB2aDtcbiAgICAgICAgICAgIG1pbi1oZWlnaHQ6IDUwMHB4O1xuXG4gICAgICAgICAgICBwYWRkaW5nLXRvcDogMTAwcHg7XG5cbiAgICAgICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgICAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcblxuICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogIzMyNzBhMDtcbiAgICAgICAgfVxuXG4gICAgICAgIC5hMnQtbG9nbyB7XG4gICAgICAgICAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XG4gICAgICAgICAgICBjb2xvcjogd2hpdGU7XG4gICAgICAgICAgICBmb250LXNpemU6IDMwcHg7XG4gICAgICAgIH1cblxuICAgICAgICAuYTJ0LWNvbnRhaW5lciB7XG4gICAgICAgICAgICB3aWR0aDogNDAwcHg7XG4gICAgICAgIH1cbiAgICBgXVxufSlcbmV4cG9ydCBjbGFzcyBBMnRVaUNvbXBvbmVudCB7XG4gICAgY29uc3RydWN0b3IoKSB7IH1cbn1cbiIsImltcG9ydCB7IENvbXBvbmVudCwgSW5wdXQgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7IFJvdXRlciB9IGZyb20gJ0Bhbmd1bGFyL3JvdXRlcic7XG5pbXBvcnQgeyBBbmd1bGFyMlRva2VuU2VydmljZSB9IGZyb20gJy4uLy4uL2FuZ3VsYXIyLXRva2VuLnNlcnZpY2UnO1xuXG5pbXBvcnQgeyBTaWduSW5EYXRhIH0gZnJvbSAnLi4vLi4vYW5ndWxhcjItdG9rZW4ubW9kZWwnO1xuaW1wb3J0IHsgQTJ0Rm9ybVNlcnZpY2UgfSBmcm9tICcuLi9hMnQtc2hhcmVkL2EydC1mb3JtL2EydC1mb3JtLnNlcnZpY2UnO1xuaW1wb3J0IHsgU0lHTl9JTl9GT1JNIH0gZnJvbSAnLi4vYTJ0LXVpLmZvcm1zJztcblxuQENvbXBvbmVudCh7XG4gICAgc2VsZWN0b3I6ICAgJ2EydC1zaWduLWluJyxcbiAgICBwcm92aWRlcnM6ICBbQTJ0Rm9ybVNlcnZpY2VdLFxuICAgIHRlbXBsYXRlOiBgXG4gICAgICAgIDxhMnQtaGVhZGxpbmU+U2lnbiBJbjwvYTJ0LWhlYWRsaW5lPlxuICAgICAgICA8YTJ0LWVycm9yIFtlcnJvcnNdPVwiX2Vycm9yc1wiPjwvYTJ0LWVycm9yPlxuICAgICAgICA8YTJ0LWZvcm0+U2lnbiBJbjwvYTJ0LWZvcm0+XG4gICAgICAgIDxhMnQtbGlua3MgY2FzZT1cInNpZ24taW5cIj48L2EydC1saW5rcz5cbiAgICBgXG59KVxuZXhwb3J0IGNsYXNzIEEydFNpZ25JbkNvbXBvbmVudCB7XG5cbiAgICBfZXJyb3JzOiBzdHJpbmdbXTtcblxuICAgIGNvbnN0cnVjdG9yKFxuICAgICAgICBwdWJsaWMgX2Zvcm1TZXJ2aWNlOiBBMnRGb3JtU2VydmljZSxcbiAgICAgICAgcHVibGljIF9zZXNzaW9uU2VydmljZTogQW5ndWxhcjJUb2tlblNlcnZpY2UsXG4gICAgICAgIHB1YmxpYyBfcm91dGVyOiBSb3V0ZXJcbiAgICApIHtcbiAgICAgICAgdGhpcy5fZm9ybVNlcnZpY2UuaW5pdEZvcm0oU0lHTl9JTl9GT1JNKTtcbiAgICAgICAgdGhpcy5fZm9ybVNlcnZpY2Uuc3VibWl0JC5zdWJzY3JpYmUoXG4gICAgICAgICAgICAoZGF0YTogU2lnbkluRGF0YSkgPT4gdGhpcy5fc2Vzc2lvblNlcnZpY2Uuc2lnbkluKGRhdGEpLnN1YnNjcmliZShcbiAgICAgICAgICAgICAgICAocmVzOiBhbnkpID0+ICAgdGhpcy5faGFuZGxlU3VjY2VzcyhyZXMpLFxuICAgICAgICAgICAgICAgIChlcnJvcjogYW55KSA9PiB0aGlzLl9oYW5kbGVFcnJvcihlcnJvcilcbiAgICAgICAgICAgIClcbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIF9oYW5kbGVTdWNjZXNzKGRhdGE6IGFueSkge1xuICAgICAgICB0aGlzLl9lcnJvcnMgPSBudWxsO1xuICAgICAgICB0aGlzLl9mb3JtU2VydmljZS51bmxvY2tTdWJtaXQoKTtcbiAgICAgICAgdGhpcy5fcm91dGVyLm5hdmlnYXRlKFsncmVzdHJpY3RlZCddKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIF9oYW5kbGVFcnJvcihlcnJvcjogYW55KSB7XG4gICAgICAgIHRoaXMuX2Vycm9ycyA9IGVycm9yLmpzb24oKS5lcnJvcnM7XG4gICAgICAgIHRoaXMuX2Zvcm1TZXJ2aWNlLnVubG9ja1N1Ym1pdCgpO1xuICAgIH1cbn1cbiIsImltcG9ydCB7IENvbXBvbmVudCwgSW5wdXQgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7IFJvdXRlciB9IGZyb20gJ0Bhbmd1bGFyL3JvdXRlcic7XG5pbXBvcnQgeyBBbmd1bGFyMlRva2VuU2VydmljZSB9IGZyb20gJy4uLy4uL2FuZ3VsYXIyLXRva2VuLnNlcnZpY2UnO1xuXG5pbXBvcnQgeyBSZWdpc3RlckRhdGEgfSBmcm9tICcuLi8uLi9hbmd1bGFyMi10b2tlbi5tb2RlbCc7XG5pbXBvcnQgeyBBMnRGb3JtU2VydmljZSB9IGZyb20gJy4uL2EydC1zaGFyZWQvYTJ0LWZvcm0vYTJ0LWZvcm0uc2VydmljZSc7XG5pbXBvcnQgeyBTSUdOX1VQX0ZPUk0gfSBmcm9tICcuLi9hMnQtdWkuZm9ybXMnO1xuXG5AQ29tcG9uZW50KHtcbiAgICBzZWxlY3RvcjogICAgICAgJ2EydC1zaWduLXVwJyxcbiAgICBwcm92aWRlcnM6ICAgICAgW0EydEZvcm1TZXJ2aWNlXSxcbiAgICB0ZW1wbGF0ZTogYFxuICAgICAgICA8YTJ0LWhlYWRsaW5lPlNpZ24gVXA8L2EydC1oZWFkbGluZT5cbiAgICAgICAgPGEydC1lcnJvciBbZXJyb3JzXT1cIl9lcnJvcnNcIj48L2EydC1lcnJvcj5cbiAgICAgICAgPGEydC1mb3JtPlNpZ24gVXA8L2EydC1mb3JtPlxuICAgICAgICA8YTJ0LWxpbmtzIGNhc2U9XCJzaWduLXVwXCI+PC9hMnQtbGlua3M+XG4gICAgYFxufSlcbmV4cG9ydCBjbGFzcyBBMnRTaWduVXBDb21wb25lbnQge1xuXG4gICAgX2Vycm9yczogc3RyaW5nW107XG5cbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgcHVibGljIF9mb3JtU2VydmljZTogQTJ0Rm9ybVNlcnZpY2UsXG4gICAgICAgIHB1YmxpYyBfc2Vzc2lvblNlcnZpY2U6IEFuZ3VsYXIyVG9rZW5TZXJ2aWNlLFxuICAgICAgICBwdWJsaWMgX3JvdXRlcjogUm91dGVyXG4gICAgKSB7XG4gICAgICAgIHRoaXMuX2Zvcm1TZXJ2aWNlLmluaXRGb3JtKFNJR05fVVBfRk9STSk7XG4gICAgICAgIHRoaXMuX2Zvcm1TZXJ2aWNlLnN1Ym1pdCQuc3Vic2NyaWJlKFxuICAgICAgICAgICAgKGRhdGE6IFJlZ2lzdGVyRGF0YSkgPT4gdGhpcy5fc2Vzc2lvblNlcnZpY2UucmVnaXN0ZXJBY2NvdW50KGRhdGEpLnN1YnNjcmliZShcbiAgICAgICAgICAgICAgICByZXMgPT4gICAgICB0aGlzLl9oYW5kbGVTdWNjZXNzKHJlcyksXG4gICAgICAgICAgICAgICAgZXJyb3IgPT4gICAgdGhpcy5faGFuZGxlRXJyb3IoZXJyb3IpXG4gICAgICAgICAgICApXG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBfaGFuZGxlU3VjY2VzcyhkYXRhOiBhbnkpIHtcbiAgICAgICAgdGhpcy5fZXJyb3JzID0gbnVsbDtcbiAgICAgICAgdGhpcy5fZm9ybVNlcnZpY2UudW5sb2NrU3VibWl0KCk7XG4gICAgICAgIHRoaXMuX3JvdXRlci5uYXZpZ2F0ZShbJ3Jlc3RyaWN0ZWQnXSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBfaGFuZGxlRXJyb3IoZXJyb3I6IGFueSkge1xuICAgICAgICB0aGlzLl9lcnJvcnMgPSBlcnJvci5qc29uKCkuZXJyb3JzLmZ1bGxfbWVzc2FnZXM7XG4gICAgICAgIHRoaXMuX2Zvcm1TZXJ2aWNlLnVubG9ja1N1Ym1pdCgpO1xuICAgIH1cbn1cbiIsImltcG9ydCB7IENvbXBvbmVudCwgSW5wdXQgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7IEFuZ3VsYXIyVG9rZW5TZXJ2aWNlIH0gZnJvbSAnLi4vLi4vYW5ndWxhcjItdG9rZW4uc2VydmljZSc7XG5cbmltcG9ydCB7IFJlc2V0UGFzc3dvcmREYXRhIH0gZnJvbSAnLi4vLi4vYW5ndWxhcjItdG9rZW4ubW9kZWwnO1xuaW1wb3J0IHsgQTJ0Rm9ybVNlcnZpY2UgfSBmcm9tICcuLi9hMnQtc2hhcmVkL2EydC1mb3JtL2EydC1mb3JtLnNlcnZpY2UnO1xuaW1wb3J0IHsgUkVTRVRfUEFTU1dPUkRfRk9STSB9IGZyb20gJy4uL2EydC11aS5mb3Jtcyc7XG5cbkBDb21wb25lbnQoe1xuICAgIHNlbGVjdG9yOiAgICAgICAnYTJ0LXJlc2V0LXBhc3N3b3JkJyxcbiAgICBwcm92aWRlcnM6ICAgICAgW0EydEZvcm1TZXJ2aWNlXSxcbiAgICB0ZW1wbGF0ZTogYFxuICAgICAgICA8YTJ0LWhlYWRsaW5lICpuZ0lmPVwiIV9lbWFpbFNlbmRcIj5SZXNldCB5b3VyIFBhc3N3b3JkPC9hMnQtaGVhZGxpbmU+XG4gICAgICAgIDxhMnQtZm9ybSAqbmdJZj1cIiFfZW1haWxTZW5kXCI+UmVzZXQgUGFzc3dvcmQ8L2EydC1mb3JtPlxuICAgICAgICA8cCBjbGFzcz1cImVtYWlsLXNlbmQtdGV4dFwiICpuZ0lmPVwiX2VtYWlsU2VuZFwiPlxuICAgICAgICAgICAgSWYgdGhlIGVudGVyZWQgZW1haWwgaXMgcmVnaXN0ZXJlZCB3ZSB3aWxsIHNlbmQgaW5zdHJ1Y3Rpb24gb24gaG93IHRvIHJlc2V0IHlvdXIgcGFzc3dvcmQuXG4gICAgICAgIDwvcD5cbiAgICAgICAgPGEydC1saW5rcyAqbmdJZj1cIiFfZW1haWxTZW5kXCIgY2FzZT1cInJlc2V0LXBhc3N3b3JkXCI+PC9hMnQtbGlua3M+XG4gICAgYCxcbiAgICBzdHlsZXM6IFtgXG4gICAgICAgIC5lbWFpbC1zZW5kLXRleHQge1xuICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogIzcyYzM4MDtcbiAgICAgICAgICAgIGNvbG9yOiB3aGl0ZTtcbiAgICAgICAgICAgIGZvbnQtc2l6ZTogMTZwdDtcbiAgICAgICAgICAgIHRleHQtYWxpZ246IGNlbnRlcjtcbiAgICAgICAgICAgIHBhZGRpbmc6IDIwcHg7XG4gICAgICAgICAgICBib3JkZXItcmFkaXVzOiAzcHg7XG4gICAgICAgIH1cbiAgICBgXVxufSlcbmV4cG9ydCBjbGFzcyBBMnRSZXNldFBhc3N3b3JkQ29tcG9uZW50IHtcblxuICAgIF9lbWFpbFNlbmQ6IGJvb2xlYW4gPSBmYWxzZTtcblxuICAgIGNvbnN0cnVjdG9yKFxuICAgICAgICBwcml2YXRlIF9mb3JtU2VydmljZTogQTJ0Rm9ybVNlcnZpY2UsXG4gICAgICAgIHByaXZhdGUgX3Nlc3Npb25TZXJ2aWNlOiBBbmd1bGFyMlRva2VuU2VydmljZVxuICAgICkge1xuICAgICAgICB0aGlzLl9mb3JtU2VydmljZS5pbml0Rm9ybShSRVNFVF9QQVNTV09SRF9GT1JNKTtcbiAgICAgICAgdGhpcy5fZm9ybVNlcnZpY2Uuc3VibWl0JC5zdWJzY3JpYmUoXG4gICAgICAgICAgICAoZGF0YTogUmVzZXRQYXNzd29yZERhdGEpID0+IHRoaXMuX3Nlc3Npb25TZXJ2aWNlLnJlc2V0UGFzc3dvcmQoZGF0YSkuc3Vic2NyaWJlKFxuICAgICAgICAgICAgICAgIHJlcyA9PiAgICAgIHRoaXMuX2hhbmRsZVN1Y2Nlc3MoKSxcbiAgICAgICAgICAgICAgICBlcnJvciA9PiAgICB0aGlzLl9oYW5kbGVFcnJvcigpXG4gICAgICAgICAgICApXG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBfaGFuZGxlU3VjY2VzcygpIHtcbiAgICAgICAgdGhpcy5fZW1haWxTZW5kID0gdHJ1ZTtcbiAgICB9XG5cbiAgICBwcml2YXRlIF9oYW5kbGVFcnJvcigpIHtcbiAgICAgICAgdGhpcy5fZW1haWxTZW5kID0gdHJ1ZTtcbiAgICB9XG59XG4iLCJpbXBvcnQgeyBDb21wb25lbnQsIElucHV0IH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQgeyBSb3V0ZXIgfSBmcm9tICdAYW5ndWxhci9yb3V0ZXInO1xuaW1wb3J0IHsgQW5ndWxhcjJUb2tlblNlcnZpY2UgfSBmcm9tICcuLi8uLi9hbmd1bGFyMi10b2tlbi5zZXJ2aWNlJztcblxuaW1wb3J0IHsgVXBkYXRlUGFzc3dvcmREYXRhIH0gZnJvbSAnLi4vLi4vYW5ndWxhcjItdG9rZW4ubW9kZWwnO1xuaW1wb3J0IHsgQTJ0Rm9ybVNlcnZpY2UgfSBmcm9tICcuLi9hMnQtc2hhcmVkL2EydC1mb3JtL2EydC1mb3JtLnNlcnZpY2UnO1xuaW1wb3J0IHsgVVBEQVRFX1BBU1NXT1JEX0ZPUk0gfSBmcm9tICcuLi9hMnQtdWkuZm9ybXMnO1xuXG5AQ29tcG9uZW50KHtcbiAgICBzZWxlY3RvcjogICAnYTJ0LXVwZGF0ZS1wYXNzd29yZCcsXG4gICAgcHJvdmlkZXJzOiAgW0EydEZvcm1TZXJ2aWNlXSxcbiAgICB0ZW1wbGF0ZTogYFxuICAgICAgICA8YTJ0LWhlYWRsaW5lPlVwZGF0ZSB5b3VyIFBhc3N3b3JkPC9hMnQtaGVhZGxpbmU+XG4gICAgICAgIDxhMnQtZXJyb3IgW2Vycm9yc109XCJfZXJyb3JzXCI+PC9hMnQtZXJyb3I+XG4gICAgICAgIDxhMnQtZm9ybT5VcGRhdGUgUGFzc3dvcmQ8L2EydC1mb3JtPlxuICAgIGBcbn0pXG5leHBvcnQgY2xhc3MgQTJ0VXBkYXRlUGFzc3dvcmRDb21wb25lbnQge1xuXG4gICAgX2Vycm9yczogc3RyaW5nW107XG5cbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgcHVibGljIF9mb3JtU2VydmljZTogQTJ0Rm9ybVNlcnZpY2UsXG4gICAgICAgIHB1YmxpYyBfc2Vzc2lvblNlcnZpY2U6IEFuZ3VsYXIyVG9rZW5TZXJ2aWNlLFxuICAgICAgICBwdWJsaWMgX3JvdXRlcjogUm91dGVyXG4gICAgKSB7XG4gICAgICAgIHRoaXMuX2Zvcm1TZXJ2aWNlLmluaXRGb3JtKFVQREFURV9QQVNTV09SRF9GT1JNKTtcbiAgICAgICAgdGhpcy5fZm9ybVNlcnZpY2Uuc3VibWl0JC5zdWJzY3JpYmUoXG4gICAgICAgICAgICAoZGF0YTogVXBkYXRlUGFzc3dvcmREYXRhKSA9PiB0aGlzLl9zZXNzaW9uU2VydmljZS51cGRhdGVQYXNzd29yZChkYXRhKS5zdWJzY3JpYmUoXG4gICAgICAgICAgICAgICAgcmVzID0+ICAgICAgdGhpcy5faGFuZGxlU3VjY2VzcyhyZXMpLFxuICAgICAgICAgICAgICAgIGVycm9yID0+ICAgIHRoaXMuX2hhbmRsZUVycm9yKGVycm9yKVxuICAgICAgICAgICAgKVxuICAgICAgICApO1xuICAgIH1cblxuICAgIHByaXZhdGUgX2hhbmRsZVN1Y2Nlc3MoZGF0YTogYW55KSB7XG4gICAgICAgIHRoaXMuX3JvdXRlci5uYXZpZ2F0ZShbJ3Nlc3Npb24vc2lnbi1pbiddKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIF9oYW5kbGVFcnJvcihlcnJvcjogYW55KSB7XG4gICAgICAgIHRoaXMuX2Vycm9ycyA9IGVycm9yLmpzb24oKS5lcnJvcnM7XG4gICAgICAgIHRoaXMuX2Zvcm1TZXJ2aWNlLnVubG9ja1N1Ym1pdCgpO1xuICAgIH1cbn1cbiIsImltcG9ydCB7IE1vZHVsZVdpdGhQcm92aWRlcnMgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7IFJvdXRlcywgUm91dGVyTW9kdWxlIH0gZnJvbSAnQGFuZ3VsYXIvcm91dGVyJztcblxuaW1wb3J0IHsgQW5ndWxhcjJUb2tlblNlcnZpY2UgfSBmcm9tICcuLi9hbmd1bGFyMi10b2tlbi5zZXJ2aWNlJztcblxuaW1wb3J0IHsgQTJ0VWlDb21wb25lbnQgfSBmcm9tICcuL2EydC11aS5jb21wb25lbnQnO1xuaW1wb3J0IHsgQTJ0U2lnbkluQ29tcG9uZW50IH0gZnJvbSAnLi9hMnQtc2lnbi1pbi9hMnQtc2lnbi1pbi5jb21wb25lbnQnO1xuaW1wb3J0IHsgQTJ0U2lnblVwQ29tcG9uZW50IH0gZnJvbSAnLi9hMnQtc2lnbi11cC9hMnQtc2lnbi11cC5jb21wb25lbnQnO1xuaW1wb3J0IHsgQTJ0UmVzZXRQYXNzd29yZENvbXBvbmVudCB9IGZyb20gJy4vYTJ0LXJlc2V0LXBhc3N3b3JkL2EydC1yZXNldC1wYXNzd29yZC5jb21wb25lbnQnO1xuaW1wb3J0IHsgQTJ0VXBkYXRlUGFzc3dvcmRDb21wb25lbnQgfSBmcm9tICcuL2EydC11cGRhdGUtcGFzc3dvcmQvYTJ0LXVwZGF0ZS1wYXNzd29yZC5jb21wb25lbnQnO1xuXG5jb25zdCByb3V0ZXM6IFJvdXRlcyA9IFt7XG4gICAgICAgIHBhdGg6ICdzZXNzaW9uJyxcbiAgICAgICAgY29tcG9uZW50OiBBMnRVaUNvbXBvbmVudCxcbiAgICAgICAgY2hpbGRyZW46IFtcbiAgICAgICAgICAgIHsgcGF0aDogJ3NpZ24taW4nLCBjb21wb25lbnQ6IEEydFNpZ25JbkNvbXBvbmVudCB9LFxuICAgICAgICAgICAgeyBwYXRoOiAnc2lnbi11cCcsIGNvbXBvbmVudDogQTJ0U2lnblVwQ29tcG9uZW50IH0sXG4gICAgICAgICAgICB7IHBhdGg6ICdyZXNldC1wYXNzd29yZCcsIGNvbXBvbmVudDogQTJ0UmVzZXRQYXNzd29yZENvbXBvbmVudCB9LFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHBhdGg6ICd1cGRhdGUtcGFzc3dvcmQnLFxuICAgICAgICAgICAgICAgIGNvbXBvbmVudDogQTJ0VXBkYXRlUGFzc3dvcmRDb21wb25lbnQsXG4gICAgICAgICAgICAgICAgY2FuQWN0aXZhdGU6IFtBbmd1bGFyMlRva2VuU2VydmljZV1cbiAgICAgICAgICAgIH1cbiAgICAgICAgXVxufV07XG5cbmV4cG9ydCBjb25zdCBhMnRSb3V0ZXMgPSBSb3V0ZXJNb2R1bGUuZm9yQ2hpbGQocm91dGVzKTtcbiIsImltcG9ydCB7IE5nTW9kdWxlIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSdcbmltcG9ydCB7IENvbW1vbk1vZHVsZSB9IGZyb20gJ0Bhbmd1bGFyL2NvbW1vbic7XG5pbXBvcnQgeyBSb3V0ZXJNb2R1bGUgfSBmcm9tICdAYW5ndWxhci9yb3V0ZXInO1xuXG5pbXBvcnQgeyBBbmd1bGFyMlRva2VuU2VydmljZSB9IGZyb20gJy4uL2FuZ3VsYXIyLXRva2VuLnNlcnZpY2UnO1xuXG5pbXBvcnQgeyBBMnRTaGFyZWRNb2R1bGUgfSBmcm9tICcuL2EydC1zaGFyZWQvYTJ0LXNoYXJlZC5tb2R1bGUnO1xuaW1wb3J0IHsgYTJ0Um91dGVzIH0gZnJvbSAnLi9hMnQtdWkucm91dGVzJztcbmltcG9ydCB7IEEydFVpQ29tcG9uZW50IH0gZnJvbSAnLi9hMnQtdWkuY29tcG9uZW50JztcbmltcG9ydCB7IEEydFNpZ25JbkNvbXBvbmVudCB9IGZyb20gJy4vYTJ0LXNpZ24taW4vYTJ0LXNpZ24taW4uY29tcG9uZW50JztcbmltcG9ydCB7IEEydFNpZ25VcENvbXBvbmVudCB9IGZyb20gJy4vYTJ0LXNpZ24tdXAvYTJ0LXNpZ24tdXAuY29tcG9uZW50JztcbmltcG9ydCB7IEEydFJlc2V0UGFzc3dvcmRDb21wb25lbnQgfSBmcm9tICcuL2EydC1yZXNldC1wYXNzd29yZC9hMnQtcmVzZXQtcGFzc3dvcmQuY29tcG9uZW50JztcbmltcG9ydCB7IEEydFVwZGF0ZVBhc3N3b3JkQ29tcG9uZW50IH0gZnJvbSAnLi9hMnQtdXBkYXRlLXBhc3N3b3JkL2EydC11cGRhdGUtcGFzc3dvcmQuY29tcG9uZW50JztcblxuQE5nTW9kdWxlKHtcbiAgICBpbXBvcnRzOiBbXG4gICAgICAgIENvbW1vbk1vZHVsZSxcbiAgICAgICAgUm91dGVyTW9kdWxlLFxuICAgICAgICBBMnRTaGFyZWRNb2R1bGUsXG4gICAgICAgIGEydFJvdXRlc1xuICAgIF0sXG4gICAgZGVjbGFyYXRpb25zOiBbXG4gICAgICAgIEEydFVpQ29tcG9uZW50LFxuICAgICAgICBBMnRTaWduSW5Db21wb25lbnQsXG4gICAgICAgIEEydFNpZ25VcENvbXBvbmVudCxcbiAgICAgICAgQTJ0UmVzZXRQYXNzd29yZENvbXBvbmVudCxcbiAgICAgICAgQTJ0VXBkYXRlUGFzc3dvcmRDb21wb25lbnRcbiAgICBdXG59KVxuZXhwb3J0IGNsYXNzIEEydFVpTW9kdWxlIHsgfSJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7QUFBQTtJQWtCSTt1QkFQaUIsSUFBSSxZQUFZLEVBQU87MEJBQ1gsS0FBSztLQU1qQjs7Ozs7SUFFVixRQUFRLENBQUMsTUFBbUI7UUFDL0IsSUFBSSxDQUFDLE1BQU0sR0FBRyxNQUFNLENBQUM7UUFDckIsSUFBSSxDQUFDLGdCQUFnQixFQUFFLENBQUM7Ozs7O0lBR3JCLE1BQU07UUFD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