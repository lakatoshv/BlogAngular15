(function (global, factory) {
    typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports, require('@angular/core'), require('@angular/forms'), require('@angular/common'), require('@angular/router'), require('@angular/http'), require('rxjs'), require('rxjs/operators')) :
    typeof define === 'function' && define.amd ? define('angular2-token', ['exports', '@angular/core', '@angular/forms', '@angular/common', '@angular/router', '@angular/http', 'rxjs', 'rxjs/operators'], factory) :
    (factory((global['angular2-token'] = {}),global.ng.core,global.ng.forms,global.ng.common,global.ng.router,global.ng.http,global.rxjs,global.rxjs.operators));
}(this, (function (exports,core,forms,common,router,http,rxjs,operators) { 'use strict';

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes} checked by tsc
     */
    var A2tFormService = (function () {
        function A2tFormService() {
            this.submit$ = new core.EventEmitter();
            this.submitLock = false;
        }
        /**
         * @param {?} fields
         * @return {?}
         */
        A2tFormService.prototype.initForm = /**
         * @param {?} fields
         * @return {?}
         */
            function (fields) {
                this.fields = fields;
                this._createFormGroup();
            };
        /**
         * @return {?}
         */
        A2tFormService.prototype.submit = /**
         * @return {?}
         */
            function () {
                this.submitLock = true;
                this.submit$.emit(this.formGroup.value);
            };
        /**
         * @return {?}
         */
        A2tFormService.prototype.unlockSubmit = /**
         * @return {?}
         */
            function () {
                this.formGroup.reset();
                this.submitLock = false;
            };
        /**
         * @return {?}
         */
        A2tFormService.prototype._createFormGroup = /**
         * @return {?}
         */
            function () {
                var /** @type {?} */ group = {};
                this.fields.forEach(function (question) {
                    group[question.key] = new forms.FormControl(null, question.validators);
                });
                this.formGroup = new forms.FormGroup(group);
            };
        A2tFormService.decorators = [
            { type: core.Injectable },
        ];
        /** @nocollapse */
        A2tFormService.ctorParameters = function () { return []; };
        return A2tFormService;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes} checked by tsc
     */
    var A2tFormComponent = (function () {
        function A2tFormComponent(_formService) {
            this._formService = _formService;
        }
        A2tFormComponent.decorators = [
            { type: core.Component, args: [{
                        selector: 'a2t-form',
                        template: "\n        <form class=\"a2t-form\"\n            (ngSubmit)=\"_formService.submit()\"\n            [formGroup]=\"_formService.formGroup\">\n\n            <a2t-form-field\n                *ngFor=\"let field of this._formService.fields\"\n                [question]=\"field\"\n                [form]=\"_formService.formGroup\">\n            </a2t-form-field>\n\n            <button type=\"submit\" [disabled]=\"!_formService.formGroup.valid || _formService.formGroup.pristine || _formService.submitLock\">\n                <ng-content *ngIf=\"!_formService.submitLock\"></ng-content>\n                <span *ngIf=\"_formService.submitLock\">Submitting ...</span>\n            </button>\n        </form>\n    ",
                        styles: ["\n        .a2t-form {\n            background-color: white;\n            border-radius: 3px;\n            box-shadow: 0px 1px 5px 0 rgba(0,0,0,0.3);\n            padding-top: 20px;\n            font-family: \"Segoe UI\", \"Helvetica Neue\", Arial, sans-serif;\n        }\n\n        .a2t-form button {\n            width: 100%;\n\n            transition: .3s;\n            background-color: #72c380;\n\n            border-bottom-right-radius: 3px;\n            border-bottom-left-radius: 3px;\n\n            outline: none;\n            text-align: center;\n            font-weight: 400;\n            border: none;\n            font-size: 16px;\n            line-height: 30px;\n\n            text-shadow: 0 1px 2px rgba(0, 0, 0, 0.25);\n            color: white;\n            border-bottom: 3px solid transparent;\n        }\n\n        .a2t-form button:disabled {\n            background-color: #eee !important;\n            cursor: not-allowed;\n            color: #999;\n            text-shadow: none;\n        }\n\n        .a2t-form button:hover {\n            background-color: #a6d9ae;\n        }\n    "]
                    },] },
        ];
        /** @nocollapse */
        A2tFormComponent.ctorParameters = function () {
            return [
                { type: A2tFormService }
            ];
        };
        return A2tFormComponent;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes} checked by tsc
     */
    var A2tFormFieldComponent = (function () {
        function A2tFormFieldComponent() {
        }
        /**
         * @return {?}
         */
        A2tFormFieldComponent.prototype.ngOnInit = /**
         * @return {?}
         */
            function () {
                this._control = this.form.controls[this.question.key];
            };
        Object.defineProperty(A2tFormFieldComponent.prototype, "isValid", {
            get: /**
             * @return {?}
             */ function () {
                return this._control.valid;
            },
            enumerable: true,
            configurable: true
        });
        A2tFormFieldComponent.decorators = [
            { type: core.Component, args: [{
                        selector: 'a2t-form-field',
                        template: "\n        <div class=\"a2t-input-group\"\n            [formGroup]=\"form\">\n\n            <label\n                [attr.for]=\"question.key\"\n                *ngIf=\"_control.pristine\">\n                {{question.label}}\n            </label>\n\n            <label class=\"a2t-error\"\n                [attr.for]=\"question.key\"\n                *ngIf=\"_control.hasError('required') && !_control.pristine\">\n                {{question.label}} is required\n            </label>\n\n            <label class=\"a2t-error\"\n                [attr.for]=\"question.key\"\n                *ngIf=\"_control.hasError('minlength')\">\n                {{question.label}} is too short\n            </label>\n\n            <label class=\"a2t-error\"\n                [attr.for]=\"question.key\"\n                *ngIf=\"_control.hasError('maxlength')\">\n                {{question.label}} is too long\n            </label>\n\n            <label class=\"a2t-valid\"\n                [attr.for]=\"question.key\"\n                *ngIf=\"_control.valid && !_control.pristine\">\n                {{question.label}}\n            </label>\n\n            <input\n                [formControlName]=\"question.key\"\n                [id]=\"question.key\"\n                [type]=\"question.type\">\n        </div>\n    ",
                        styles: ["\n        .a2t-input-group {\n            padding-bottom: 40px;\n            padding-right: 20px;\n            padding-left: 20px;\n            font-family: \"Segoe UI\", \"Helvetica Neue\", Arial, sans-serif;\n        }\n\n        .a2t-input-group input {\n            width: 100%;\n            outline: none;\n            border: none;\n            background-color: #eee;\n            line-height: 40px;\n\n            padding-left: 10px;\n            padding-right: 10px;\n        }\n\n        .a2t-input-group label {\n            color: #666;\n            font-weight: 600;\n            font-size: 13px;\n            margin-bottom: 0;\n        }\n\n        .a2t-error {\n            color: #df6564 !important;\n        }\n\n        .a2t-valid {\n            color: #72c380 !important;\n        }\n    "]
                    },] },
        ];
        A2tFormFieldComponent.propDecorators = {
            question: [{ type: core.Input }],
            form: [{ type: core.Input }]
        };
        return A2tFormFieldComponent;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes} checked by tsc
     */
    var A2tLinksComponent = (function () {
        function A2tLinksComponent() {
        }
        A2tLinksComponent.decorators = [
            { type: core.Component, args: [{
                        selector: 'a2t-links',
                        template: "\n        <div class=\"a2t-wrapper\">\n            <p><a routerLink=\"/session/reset-password\" *ngIf=\"case != 'reset-password'\">Forgot Password?</a></p>\n            <p><a routerLink=\"/session/sign-up\" *ngIf=\"case != 'sign-up'\">Sign Up</a></p>\n            <p><a routerLink=\"/session/sign-in\" *ngIf=\"case != 'sign-in'\">Sign In</a></p>\n        </div>\n    ",
                        styles: ["\n        .a2t-wrapper {\n            margin-top: 20px;\n        }\n\n        p {\n            margin-bottom: 0;\n        }\n\n        a {\n            color: #eee !important;\n            transition: .3s;\n            text-decoration: none;\n            font-size: 15px;\n            font-weight: 300;\n            font-family: \"Segoe UI\", \"Helvetica Neue\", Arial, sans-serif;\n        }\n\n        a:hover {\n            color: white;\n        }\n    "]
                    },] },
        ];
        /** @nocollapse */
        A2tLinksComponent.ctorParameters = function () { return []; };
        A2tLinksComponent.propDecorators = {
            case: [{ type: core.Input }]
        };
        return A2tLinksComponent;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes} checked by tsc
     */
    var A2tErrorComponent = (function () {
        function A2tErrorComponent() {
        }
        A2tErrorComponent.decorators = [
            { type: core.Component, args: [{
                        selector: 'a2t-error',
                        template: '<div *ngFor="let error of errors"><p>{{error}}</p></div>',
                        styles: ["\n        div {\n            width: 100%;\n            background-color: #df6564;\n            color: white;\n            font-weight: 300;\n            font-size: 15px;\n            padding: 10px 20px;\n            border-radius: 3px;\n            margin-bottom: 15px;\n        }\n\n        div > p {\n            margin-bottom: 0;\n        }\n    "]
                    },] },
        ];
        /** @nocollapse */
        A2tErrorComponent.ctorParameters = function () { return []; };
        A2tErrorComponent.propDecorators = {
            errors: [{ type: core.Input }]
        };
        return A2tErrorComponent;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes} checked by tsc
     */
    var A2tHeadlineComponent = (function () {
        function A2tHeadlineComponent() {
        }
        A2tHeadlineComponent.decorators = [
            { type: core.Component, args: [{
                        selector: 'a2t-headline',
                        template: '<p><ng-content></ng-content></p>',
                        styles: ["\n        p {\n            text-align: center;\n            color: white;\n            font-size: 30px;\n        }\n    "]
                    },] },
        ];
        /** @nocollapse */
        A2tHeadlineComponent.ctorParameters = function () { return []; };
        return A2tHeadlineComponent;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes} checked by tsc
     */
    var A2tSharedModule = (function () {
        function A2tSharedModule() {
        }
        A2tSharedModule.decorators = [
            { type: core.NgModule, args: [{
                        imports: [
                            common.CommonModule,
                            forms.ReactiveFormsModule,
                            router.RouterModule
                        ],
                        declarations: [
                            A2tFormFieldComponent,
                            A2tFormComponent,
                            A2tLinksComponent,
                            A2tErrorComponent,
                            A2tHeadlineComponent
                        ],
                        exports: [
                            A2tFormComponent,
                            A2tLinksComponent,
                            A2tErrorComponent,
                            A2tHeadlineComponent
                        ]
                    },] },
        ];
        return A2tSharedModule;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes} checked by tsc
     */
    var Angular2TokenService = (function () {
        function Angular2TokenService(http$$1, activatedRoute, router$$1) {
            this.http = http$$1;
            this.activatedRoute = activatedRoute;
            this.router = router$$1;
        }
        Object.defineProperty(Angular2TokenService.prototype, "currentUserType", {
            get: /**
             * @return {?}
             */ function () {
                if (this.atCurrentUserType != null)
                    return this.atCurrentUserType.name;
                else
                    return null;
            },
            enumerable: true,
            configurable: true
        });
        Object.defineProperty(Angular2TokenService.prototype, "currentUserData", {
            get: /**
             * @return {?}
             */ function () {
                return this.atCurrentUserData;
            },
            enumerable: true,
            configurable: true
        });
        Object.defineProperty(Angular2TokenService.prototype, "currentAuthData", {
            get: /**
             * @return {?}
             */ function () {
                return this.atCurrentAuthData;
            },
            enumerable: true,
            configurable: true
        });
        Object.defineProperty(Angular2TokenService.prototype, "currentAuthHeaders", {
            get: /**
             * @return {?}
             */ function () {
                if (this.atCurrentAuthData != null) {
                    return new http.Headers({
                        'access-token': this.atCurrentAuthData.accessToken,
                        'client': this.atCurrentAuthData.client,
                        'expiry': this.atCurrentAuthData.expiry,
                        'token-type': this.atCurrentAuthData.tokenType,
                        'uid': this.atCurrentAuthData.uid
                    });
                }
                return new http.Headers;
            },
            enumerable: true,
            configurable: true
        });
        /**
         * @return {?}
         */
        Angular2TokenService.prototype.userSignedIn = /**
         * @return {?}
         */
            function () {
                return !!this.atCurrentAuthData;
            };
        /**
         * @return {?}
         */
        Angular2TokenService.prototype.canActivate = /**
         * @return {?}
         */
            function () {
                if (this.userSignedIn())
                    return true;
                else {
                    // Store current location in storage (usefull for redirection after signing in)
                    if (this.atOptions.signInStoredUrlStorageKey) {
                        localStorage.setItem(this.atOptions.signInStoredUrlStorageKey, window.location.pathname + window.location.search);
                    }
                    // Redirect user to sign in if signInRedirect is set
                    if (this.router && this.atOptions.signInRedirect)
                        this.router.navigate([this.atOptions.signInRedirect]);
                    return false;
                }
            };
        // Inital configuration
        /**
         * @param {?=} options
         * @return {?}
         */
        Angular2TokenService.prototype.init = /**
         * @param {?=} options
         * @return {?}
         */
            function (options) {
                var /** @type {?} */ defaultOptions = {
                    apiPath: null,
                    apiBase: null,
                    signInPath: 'auth/sign_in',
                    signInRedirect: null,
                    signInStoredUrlStorageKey: null,
                    signOutPath: 'auth/sign_out',
                    validateTokenPath: 'auth/validate_token',
                    signOutFailedValidate: false,
                    registerAccountPath: 'auth',
                    deleteAccountPath: 'auth',
                    registerAccountCallback: window.location.href,
                    updatePasswordPath: 'auth',
                    resetPasswordPath: 'auth/password',
                    resetPasswordCallback: window.location.href,
                    userTypes: null,
                    oAuthBase: window.location.origin,
                    oAuthPaths: {
                        github: 'auth/github'
                    },
                    oAuthCallbackPath: 'oauth_callback',
                    oAuthWindowType: 'newWindow',
                    oAuthWindowOptions: null,
                    globalOptions: {
                        headers: {
                            'Content-Type': 'application/json',
                            'Accept': 'application/json'
                        }
                    }
                };
                this.atOptions = ((Object)).assign(defaultOptions, options);
                this.tryLoadAuthData();
            };
        /**
         *
         * Actions
         *
         */
        // Register request
        /**
         *
         * Actions
         *
         * @param {?} registerData
         * @return {?}
         */
        Angular2TokenService.prototype.registerAccount = /**
         *
         * Actions
         *
         * @param {?} registerData
         * @return {?}
         */
            function (registerData) {
                if (registerData.userType == null)
                    this.atCurrentUserType = null;
                else {
                    this.atCurrentUserType = this.getUserTypeByName(registerData.userType);
                    delete registerData.userType;
                }
                if (registerData["password_confirmation"] == null &&
                    registerData.passwordConfirmation != null) {
                    registerData["password_confirmation"] = registerData.passwordConfirmation;
                    delete registerData.passwordConfirmation;
                }
                registerData["confirm_success_url"] = this.atOptions.registerAccountCallback;
                return this.post(this.getUserPath() + this.atOptions.registerAccountPath, JSON.stringify(registerData));
            };
        // Delete Account
        /**
         * @return {?}
         */
        Angular2TokenService.prototype.deleteAccount = /**
         * @return {?}
         */
            function () {
                return this.delete(this.getUserPath() + this.atOptions.deleteAccountPath);
            };
        // Sign in request and set storage
        /**
         * @param {?} signInData
         * @return {?}
         */
        Angular2TokenService.prototype.signIn = /**
         * @param {?} signInData
         * @return {?}
         */
            function (signInData) {
                var _this = this;
                if (signInData.userType == null)
                    this.atCurrentUserType = null;
                else
                    this.atCurrentUserType = this.getUserTypeByName(signInData.userType);
                var /** @type {?} */ body = JSON.stringify({
                    email: signInData.email,
                    password: signInData.password
                });
                var /** @type {?} */ observ = this.post(this.getUserPath() + this.atOptions.signInPath, body);
                observ.subscribe(function (res) { return _this.atCurrentUserData = res.json().data; }, function (_error) { return null; });
                return observ;
            };
        /**
         * @param {?} oAuthType
         * @return {?}
         */
        Angular2TokenService.prototype.signInOAuth = /**
         * @param {?} oAuthType
         * @return {?}
         */
            function (oAuthType) {
                var /** @type {?} */ oAuthPath = this.getOAuthPath(oAuthType);
                var /** @type {?} */ callbackUrl = window.location.origin + "/" + this.atOptions.oAuthCallbackPath;
                var /** @type {?} */ oAuthWindowType = this.atOptions.oAuthWindowType;
                var /** @type {?} */ authUrl = this.getOAuthUrl(oAuthPath, callbackUrl, oAuthWindowType);
                if (oAuthWindowType == 'newWindow') {
                    var /** @type {?} */ oAuthWindowOptions = this.atOptions.oAuthWindowOptions;
                    var /** @type {?} */ windowOptions = '';
                    if (oAuthWindowOptions) {
                        for (var /** @type {?} */ key in oAuthWindowOptions) {
                            windowOptions += "," + key + "=" + oAuthWindowOptions[key];
                        }
                    }
                    var /** @type {?} */ popup = window.open(authUrl, '_blank', "closebuttoncaption=Cancel" + windowOptions);
                    return this.requestCredentialsViaPostMessage(popup);
                }
                else if (oAuthWindowType == 'sameWindow') {
                    window.location.href = authUrl;
                }
                else {
                    throw "Unsupported oAuthWindowType \"" + oAuthWindowType + "\"";
                }
            };
        /**
         * @return {?}
         */
        Angular2TokenService.prototype.processOAuthCallback = /**
         * @return {?}
         */
            function () {
                this.getAuthDataFromParams();
            };
        // Sign out request and delete storage
        /**
         * @return {?}
         */
        Angular2TokenService.prototype.signOut = /**
         * @return {?}
         */
            function () {
                var /** @type {?} */ observ = this.delete(this.getUserPath() + this.atOptions.signOutPath);
                localStorage.removeItem('accessToken');
                localStorage.removeItem('client');
                localStorage.removeItem('expiry');
                localStorage.removeItem('tokenType');
                localStorage.removeItem('uid');
                this.atCurrentAuthData = null;
                this.atCurrentUserType = null;
                this.atCurrentUserData = null;
                return observ;
            };
        // Validate token request
        /**
         * @return {?}
         */
        Angular2TokenService.prototype.validateToken = /**
         * @return {?}
         */
            function () {
                var _this = this;
                var /** @type {?} */ observ = this.get(this.getUserPath() + this.atOptions.validateTokenPath);
                observ.subscribe(function (res) { return _this.atCurrentUserData = res.json().data; }, function (error) {
                    if (error.status === 401 && _this.atOptions.signOutFailedValidate) {
                        _this.signOut();
                    }
                });
                return observ;
            };
        // Update password request
        /**
         * @param {?} updatePasswordData
         * @return {?}
         */
        Angular2TokenService.prototype.updatePassword = /**
         * @param {?} updatePasswordData
         * @return {?}
         */
            function (updatePasswordData) {
                if (updatePasswordData.userType != null)
                    this.atCurrentUserType = this.getUserTypeByName(updatePasswordData.userType);
                var /** @type {?} */ args;
                if (updatePasswordData.passwordCurrent == null) {
                    args = {
                        password: updatePasswordData.password,
                        password_confirmation: updatePasswordData.passwordConfirmation
                    };
                }
                else {
                    args = {
                        current_password: updatePasswordData.passwordCurrent,
                        password: updatePasswordData.password,
                        password_confirmation: updatePasswordData.passwordConfirmation
                    };
                }
                if (updatePasswordData.resetPasswordToken) {
                    args.reset_password_token = updatePasswordData.resetPasswordToken;
                }
                var /** @type {?} */ body = JSON.stringify(args);
                return this.put(this.getUserPath() + this.atOptions.updatePasswordPath, body);
            };
        // Reset password request
        /**
         * @param {?} resetPasswordData
         * @return {?}
         */
        Angular2TokenService.prototype.resetPassword = /**
         * @param {?} resetPasswordData
         * @return {?}
         */
            function (resetPasswordData) {
                if (resetPasswordData.userType == null)
                    this.atCurrentUserType = null;
                else
                    this.atCurrentUserType = this.getUserTypeByName(resetPasswordData.userType);
                var /** @type {?} */ body = JSON.stringify({
                    email: resetPasswordData.email,
                    redirect_url: this.atOptions.resetPasswordCallback
                });
                return this.post(this.getUserPath() + this.atOptions.resetPasswordPath, body);
            };
        /**
         *
         * HTTP Wrappers
         *
         */
        /**
         *
         * HTTP Wrappers
         *
         * @param {?} url
         * @param {?=} options
         * @return {?}
         */
        Angular2TokenService.prototype.get = /**
         *
         * HTTP Wrappers
         *
         * @param {?} url
         * @param {?=} options
         * @return {?}
         */
            function (url, options) {
                return this.request(this.mergeRequestOptionsArgs({
                    url: this.getApiPath() + url,
                    method: http.RequestMethod.Get
                }, options));
            };
        /**
         * @param {?} url
         * @param {?} body
         * @param {?=} options
         * @return {?}
         */
        Angular2TokenService.prototype.post = /**
         * @param {?} url
         * @param {?} body
         * @param {?=} options
         * @return {?}
         */
            function (url, body, options) {
                return this.request(this.mergeRequestOptionsArgs({
                    url: this.getApiPath() + url,
                    method: http.RequestMethod.Post,
                    body: body
                }, options));
            };
        /**
         * @param {?} url
         * @param {?} body
         * @param {?=} options
         * @return {?}
         */
        Angular2TokenService.prototype.put = /**
         * @param {?} url
         * @param {?} body
         * @param {?=} options
         * @return {?}
         */
            function (url, body, options) {
                return this.request(this.mergeRequestOptionsArgs({
                    url: this.getApiPath() + url,
                    method: http.RequestMethod.Put,
                    body: body
                }, options));
            };
        /**
         * @param {?} url
         * @param {?=} options
         * @return {?}
         */
        Angular2TokenService.prototype.delete = /**
         * @param {?} url
         * @param {?=} options
         * @return {?}
         */
            function (url, options) {
                return this.request(this.mergeRequestOptionsArgs({
                    url: this.getApiPath() + url,
                    method: http.RequestMethod.Delete
                }, options));
            };
        /**
         * @param {?} url
         * @param {?} body
         * @param {?=} options
         * @return {?}
         */
        Angular2TokenService.prototype.patch = /**
         * @param {?} url
         * @param {?} body
         * @param {?=} options
         * @return {?}
         */
            function (url, body, options) {
                return this.request(this.mergeRequestOptionsArgs({
                    url: this.getApiPath() + url,
                    method: http.RequestMethod.Patch,
                    body: body
                }, options));
            };
        /**
         * @param {?} path
         * @param {?=} options
         * @return {?}
         */
        Angular2TokenService.prototype.head = /**
         * @param {?} path
         * @param {?=} options
         * @return {?}
         */
            function (path, options) {
                return this.request({
                    method: http.RequestMethod.Head,
                    url: this.getApiPath() + path
                });
            };
        /**
         * @param {?} url
         * @param {?=} options
         * @return {?}
         */
        Angular2TokenService.prototype.options = /**
         * @param {?} url
         * @param {?=} options
         * @return {?}
         */
            function (url, options) {
                return this.request(this.mergeRequestOptionsArgs({
                    url: this.getApiPath() + url,
                    method: http.RequestMethod.Options
                }, options));
            };
        // Construct and send Http request
        /**
         * @param {?} options
         * @return {?}
         */
        Angular2TokenService.prototype.request = /**
         * @param {?} options
         * @return {?}
         */
            function (options) {
                var /** @type {?} */ baseRequestOptions;
                var /** @type {?} */ baseHeaders = this.atOptions.globalOptions.headers;
                // Get auth data from local storage
                this.getAuthDataFromStorage();
                // Merge auth headers to request if set
                if (this.atCurrentAuthData != null) {
                    ((Object)).assign(baseHeaders, {
                        'access-token': this.atCurrentAuthData.accessToken,
                        'client': this.atCurrentAuthData.client,
                        'expiry': this.atCurrentAuthData.expiry,
                        'token-type': this.atCurrentAuthData.tokenType,
                        'uid': this.atCurrentAuthData.uid
                    });
                }
                baseRequestOptions = new http.RequestOptions({
                    headers: new http.Headers(baseHeaders)
                });
                // Merge standard and custom RequestOptions
                baseRequestOptions = baseRequestOptions.merge(options);
                var /** @type {?} */ response = this.http.request(new http.Request(baseRequestOptions)).pipe(operators.share());
                this.handleResponse(response);
                return response;
            };
        /**
         * @param {?} options
         * @param {?=} addOptions
         * @return {?}
         */
        Angular2TokenService.prototype.mergeRequestOptionsArgs = /**
         * @param {?} options
         * @param {?=} addOptions
         * @return {?}
         */
            function (options, addOptions) {
                var /** @type {?} */ returnOptions = options;
                if (options)
                    ((Object)).assign(returnOptions, addOptions);
                return returnOptions;
            };
        /**
         * @param {?} response
         * @return {?}
         */
        Angular2TokenService.prototype.handleResponse = /**
         * @param {?} response
         * @return {?}
         */
            function (response) {
                var _this = this;
                response.subscribe(function (res) {
                    _this.getAuthHeadersFromResponse(/** @type {?} */ (res));
                }, function (error) {
                    _this.getAuthHeadersFromResponse(/** @type {?} */ (error));
                });
            };
        /**
         *
         * Get Auth Data
         *
         * @return {?}
         */
        Angular2TokenService.prototype.tryLoadAuthData = /**
         *
         * Get Auth Data
         *
         * @return {?}
         */
            function () {
                var /** @type {?} */ userType = this.getUserTypeByName(localStorage.getItem('userType'));
                if (userType)
                    this.atCurrentUserType = userType;
                this.getAuthDataFromStorage();
                if (this.activatedRoute)
                    this.getAuthDataFromParams();
                if (this.atCurrentAuthData)
                    this.validateToken();
            };
        /**
         * @param {?} data
         * @return {?}
         */
        Angular2TokenService.prototype.getAuthHeadersFromResponse = /**
         * @param {?} data
         * @return {?}
         */
            function (data) {
                var /** @type {?} */ headers = data.headers;
                var /** @type {?} */ authData = {
                    accessToken: headers.get('access-token'),
                    client: headers.get('client'),
                    expiry: headers.get('expiry'),
                    tokenType: headers.get('token-type'),
                    uid: headers.get('uid')
                };
                this.setAuthData(authData);
            };
        /**
         * @param {?} data
         * @return {?}
         */
        Angular2TokenService.prototype.getAuthDataFromPostMessage = /**
         * @param {?} data
         * @return {?}
         */
            function (data) {
                var /** @type {?} */ authData = {
                    accessToken: data['auth_token'],
                    client: data['client_id'],
                    expiry: data['expiry'],
                    tokenType: 'Bearer',
                    uid: data['uid']
                };
                this.setAuthData(authData);
            };
        /**
         * @return {?}
         */
        Angular2TokenService.prototype.getAuthDataFromStorage = /**
         * @return {?}
         */
            function () {
                var /** @type {?} */ authData = {
                    accessToken: localStorage.getItem('accessToken'),
                    client: localStorage.getItem('client'),
                    expiry: localStorage.getItem('expiry'),
                    tokenType: localStorage.getItem('tokenType'),
                    uid: localStorage.getItem('uid')
                };
                if (this.checkAuthData(authData))
                    this.atCurrentAuthData = authData;
            };
        /**
         * @return {?}
         */
        Angular2TokenService.prototype.getAuthDataFromParams = /**
         * @return {?}
         */
            function () {
                var _this = this;
                if (this.activatedRoute.queryParams)
                    // Fix for Testing, needs to be removed later
                    this.activatedRoute.queryParams.subscribe(function (queryParams) {
                        var /** @type {?} */ authData = {
                            accessToken: queryParams['token'] || queryParams['auth_token'],
                            client: queryParams['client_id'],
                            expiry: queryParams['expiry'],
                            tokenType: 'Bearer',
                            uid: queryParams['uid']
                        };
                        if (_this.checkAuthData(authData))
                            _this.atCurrentAuthData = authData;
                    });
            };
        /**
         *
         * Set Auth Data
         *
         * @param {?} authData
         * @return {?}
         */
        Angular2TokenService.prototype.setAuthData = /**
         *
         * Set Auth Data
         *
         * @param {?} authData
         * @return {?}
         */
            function (authData) {
                if (this.checkAuthData(authData)) {
                    this.atCurrentAuthData = authData;
                    localStorage.setItem('accessToken', authData.accessToken);
                    localStorage.setItem('client', authData.client);
                    localStorage.setItem('expiry', authData.expiry);
                    localStorage.setItem('tokenType', authData.tokenType);
                    localStorage.setItem('uid', authData.uid);
                    if (this.atCurrentUserType != null)
                        localStorage.setItem('userType', this.atCurrentUserType.name);
                }
            };
        /**
         *
         * Validate Auth Data
         *
         * @param {?} authData
         * @return {?}
         */
        Angular2TokenService.prototype.checkAuthData = /**
         *
         * Validate Auth Data
         *
         * @param {?} authData
         * @return {?}
         */
            function (authData) {
                if (authData.accessToken != null &&
                    authData.client != null &&
                    authData.expiry != null &&
                    authData.tokenType != null &&
                    authData.uid != null) {
                    if (this.atCurrentAuthData != null)
                        return authData.expiry >= this.atCurrentAuthData.expiry;
                    else
                        return true;
                }
                else {
                    return false;
                }
            };
        /**
         *
         * Construct Paths / Urls
         *
         * @return {?}
         */
        Angular2TokenService.prototype.getUserPath = /**
         *
         * Construct Paths / Urls
         *
         * @return {?}
         */
            function () {
                if (this.atCurrentUserType == null)
                    return '';
                else
                    return this.atCurrentUserType.path + '/';
            };
        /**
         * @return {?}
         */
        Angular2TokenService.prototype.getApiPath = /**
         * @return {?}
         */
            function () {
                var /** @type {?} */ constructedPath = '';
                if (this.atOptions.apiBase != null)
                    constructedPath += this.atOptions.apiBase + '/';
                if (this.atOptions.apiPath != null)
                    constructedPath += this.atOptions.apiPath + '/';
                return constructedPath;
            };
        /**
         * @param {?} oAuthType
         * @return {?}
         */
        Angular2TokenService.prototype.getOAuthPath = /**
         * @param {?} oAuthType
         * @return {?}
         */
            function (oAuthType) {
                var /** @type {?} */ oAuthPath;
                oAuthPath = this.atOptions.oAuthPaths[oAuthType];
                if (oAuthPath == null)
                    oAuthPath = "/auth/" + oAuthType;
                return oAuthPath;
            };
        /**
         * @param {?} oAuthPath
         * @param {?} callbackUrl
         * @param {?} windowType
         * @return {?}
         */
        Angular2TokenService.prototype.getOAuthUrl = /**
         * @param {?} oAuthPath
         * @param {?} callbackUrl
         * @param {?} windowType
         * @return {?}
         */
            function (oAuthPath, callbackUrl, windowType) {
                var /** @type {?} */ url;
                url = this.atOptions.oAuthBase + "/" + oAuthPath;
                url += "?omniauth_window_type=" + windowType;
                url += "&auth_origin_url=" + encodeURIComponent(callbackUrl);
                if (this.atCurrentUserType != null)
                    url += "&resource_class=" + this.atCurrentUserType.name;
                return url;
            };
        /**
         *
         * OAuth
         *
         * @param {?} authWindow
         * @return {?}
         */
        Angular2TokenService.prototype.requestCredentialsViaPostMessage = /**
         *
         * OAuth
         *
         * @param {?} authWindow
         * @return {?}
         */
            function (authWindow) {
                var /** @type {?} */ pollerObserv = rxjs.interval(500);
                var /** @type {?} */ responseObserv = rxjs.fromEvent(window, 'message').pipe(operators.pluck('data'), operators.filter(this.oAuthWindowResponseFilter));
                var /** @type {?} */ responseSubscription = responseObserv.subscribe(this.getAuthDataFromPostMessage.bind(this));
                var /** @type {?} */ pollerSubscription = pollerObserv.subscribe(function () {
                    if (authWindow.closed)
                        pollerSubscription.unsubscribe();
                    else
                        authWindow.postMessage('requestCredentials', '*');
                });
                return responseObserv;
            };
        /**
         * @param {?} data
         * @return {?}
         */
        Angular2TokenService.prototype.oAuthWindowResponseFilter = /**
         * @param {?} data
         * @return {?}
         */
            function (data) {
                if (data.message == 'deliverCredentials' || data.message == 'authFailure')
                    return data;
            };
        /**
         *
         * Utilities
         *
         * @param {?} name
         * @return {?}
         */
        Angular2TokenService.prototype.getUserTypeByName = /**
         *
         * Utilities
         *
         * @param {?} name
         * @return {?}
         */
            function (name) {
                if (name == null || this.atOptions.userTypes == null)
                    return null;
                return this.atOptions.userTypes.find(function (userType) { return userType.name === name; });
            };
        Angular2TokenService.decorators = [
            { type: core.Injectable },
        ];
        /** @nocollapse */
        Angular2TokenService.ctorParameters = function () {
            return [
                { type: http.Http },
                { type: router.ActivatedRoute, decorators: [{ type: core.Optional }] },
                { type: router.Router, decorators: [{ type: core.Optional }] }
            ];
        };
        return Angular2TokenService;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes} checked by tsc
     */
    var A2tUiComponent = (function () {
        function A2tUiComponent() {
        }
        A2tUiComponent.decorators = [
            { type: core.Component, args: [{
                        selector: 'a2t-ui',
                        template: "\n        <div class=\"a2t-wrapper\">\n            <div class=\"a2t-container\">\n                <router-outlet></router-outlet>\n            </div>\n        </div>\n    ",
                        styles: ["\n        .a2t-wrapper {\n            width: 100%;\n            height: 100vh;\n            min-height: 500px;\n\n            padding-top: 100px;\n\n            display: flex;\n            justify-content: center;\n\n            background-color: #3270a0;\n        }\n\n        .a2t-logo {\n            text-align: center;\n            color: white;\n            font-size: 30px;\n        }\n\n        .a2t-container {\n            width: 400px;\n        }\n    "]
                    },] },
        ];
        /** @nocollapse */
        A2tUiComponent.ctorParameters = function () { return []; };
        return A2tUiComponent;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes} checked by tsc
     */
    var BaseField = (function () {
        function BaseField(options) {
            if (options === void 0) {
                options = {};
            }
            this.value = options.value;
            this.key = options.key || '';
            this.label = options.label || '';
            this.validators = options.validators === undefined ? [] : options.validators;
            this.type = options.type || '';
        }
        return BaseField;
    }());
    var /** @type {?} */ SIGN_IN_FORM = [
        new BaseField({
            key: 'email',
            label: 'Email',
            type: 'text',
            validators: [
                forms.Validators.required,
                forms.Validators.minLength(8)
            ]
        }),
        new BaseField({
            key: 'password',
            label: 'Password',
            type: 'password',
            validators: [
                forms.Validators.required,
                forms.Validators.minLength(8)
            ]
        })
    ];
    var /** @type {?} */ SIGN_UP_FORM = [
        new BaseField({
            key: 'email',
            label: 'Email',
            type: 'text',
            validators: [
                forms.Validators.required,
                forms.Validators.minLength(8)
            ]
        }),
        new BaseField({
            key: 'password',
            label: 'Password',
            type: 'password',
            validators: [
                forms.Validators.required,
                forms.Validators.minLength(8)
            ]
        }),
        new BaseField({
            key: 'passwordConfirmation',
            label: 'Password Confirmation',
            type: 'password',
            validators: [
                forms.Validators.required,
                forms.Validators.minLength(8)
            ]
        })
    ];
    var /** @type {?} */ RESET_PASSWORD_FORM = [
        new BaseField({
            key: 'email',
            label: 'Email',
            type: 'text',
            validators: [
                forms.Validators.required,
                forms.Validators.minLength(8)
            ]
        })
    ];
    var /** @type {?} */ UPDATE_PASSWORD_FORM = [
        new BaseField({
            key: 'password',
            label: 'Password',
            type: 'password',
            validators: [
                forms.Validators.required,
                forms.Validators.minLength(8)
            ]
        }),
        new BaseField({
            key: 'passwordConfirmation',
            label: 'Password Confirmation',
            type: 'password',
            validators: [
                forms.Validators.required,
                forms.Validators.minLength(8)
            ]
        }),
        new BaseField({
            key: 'passwordCurrent',
            label: 'Old Password',
            type: 'password',
            validators: [
                forms.Validators.required,
                forms.Validators.minLength(8)
            ]
        })
    ];

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes} checked by tsc
     */
    var A2tSignInComponent = (function () {
        function A2tSignInComponent(_formService, _sessionService, _router) {
            var _this = this;
            this._formService = _formService;
            this._sessionService = _sessionService;
            this._router = _router;
            this._formService.initForm(SIGN_IN_FORM);
            this._formService.submit$.subscribe(function (data) { return _this._sessionService.signIn(data).subscribe(function (res) { return _this._handleSuccess(res); }, function (error) { return _this._handleError(error); }); });
        }
        /**
         * @param {?} data
         * @return {?}
         */
        A2tSignInComponent.prototype._handleSuccess = /**
         * @param {?} data
         * @return {?}
         */
            function (data) {
                this._errors = null;
                this._formService.unlockSubmit();
                this._router.navigate(['restricted']);
            };
        /**
         * @param {?} error
         * @return {?}
         */
        A2tSignInComponent.prototype._handleError = /**
         * @param {?} error
         * @return {?}
         */
            function (error) {
                this._errors = error.json().errors;
                this._formService.unlockSubmit();
            };
        A2tSignInComponent.decorators = [
            { type: core.Component, args: [{
                        selector: 'a2t-sign-in',
                        providers: [A2tFormService],
                        template: "\n        <a2t-headline>Sign In</a2t-headline>\n        <a2t-error [errors]=\"_errors\"></a2t-error>\n        <a2t-form>Sign In</a2t-form>\n        <a2t-links case=\"sign-in\"></a2t-links>\n    "
                    },] },
        ];
        /** @nocollapse */
        A2tSignInComponent.ctorParameters = function () {
            return [
                { type: A2tFormService },
                { type: Angular2TokenService },
                { type: router.Router }
            ];
        };
        return A2tSignInComponent;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes} checked by tsc
     */
    var A2tSignUpComponent = (function () {
        function A2tSignUpComponent(_formService, _sessionService, _router) {
            var _this = this;
            this._formService = _formService;
            this._sessionService = _sessionService;
            this._router = _router;
            this._formService.initForm(SIGN_UP_FORM);
            this._formService.submit$.subscribe(function (data) { return _this._sessionService.registerAccount(data).subscribe(function (res) { return _this._handleSuccess(res); }, function (error) { return _this._handleError(error); }); });
        }
        /**
         * @param {?} data
         * @return {?}
         */
        A2tSignUpComponent.prototype._handleSuccess = /**
         * @param {?} data
         * @return {?}
         */
            function (data) {
                this._errors = null;
                this._formService.unlockSubmit();
                this._router.navigate(['restricted']);
            };
        /**
         * @param {?} error
         * @return {?}
         */
        A2tSignUpComponent.prototype._handleError = /**
         * @param {?} error
         * @return {?}
         */
            function (error) {
                this._errors = error.json().errors.full_messages;
                this._formService.unlockSubmit();
            };
        A2tSignUpComponent.decorators = [
            { type: core.Component, args: [{
                        selector: 'a2t-sign-up',
                        providers: [A2tFormService],
                        template: "\n        <a2t-headline>Sign Up</a2t-headline>\n        <a2t-error [errors]=\"_errors\"></a2t-error>\n        <a2t-form>Sign Up</a2t-form>\n        <a2t-links case=\"sign-up\"></a2t-links>\n    "
                    },] },
        ];
        /** @nocollapse */
        A2tSignUpComponent.ctorParameters = function () {
            return [
                { type: A2tFormService },
                { type: Angular2TokenService },
                { type: router.Router }
            ];
        };
        return A2tSignUpComponent;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes} checked by tsc
     */
    var A2tResetPasswordComponent = (function () {
        function A2tResetPasswordComponent(_formService, _sessionService) {
            var _this = this;
            this._formService = _formService;
            this._sessionService = _sessionService;
            this._emailSend = false;
            this._formService.initForm(RESET_PASSWORD_FORM);
            this._formService.submit$.subscribe(function (data) { return _this._sessionService.resetPassword(data).subscribe(function (res) { return _this._handleSuccess(); }, function (error) { return _this._handleError(); }); });
        }
        /**
         * @return {?}
         */
        A2tResetPasswordComponent.prototype._handleSuccess = /**
         * @return {?}
         */
            function () {
                this._emailSend = true;
            };
        /**
         * @return {?}
         */
        A2tResetPasswordComponent.prototype._handleError = /**
         * @return {?}
         */
            function () {
                this._emailSend = true;
            };
        A2tResetPasswordComponent.decorators = [
            { type: core.Component, args: [{
                        selector: 'a2t-reset-password',
                        providers: [A2tFormService],
                        template: "\n        <a2t-headline *ngIf=\"!_emailSend\">Reset your Password</a2t-headline>\n        <a2t-form *ngIf=\"!_emailSend\">Reset Password</a2t-form>\n        <p class=\"email-send-text\" *ngIf=\"_emailSend\">\n            If the entered email is registered we will send instruction on how to reset your password.\n        </p>\n        <a2t-links *ngIf=\"!_emailSend\" case=\"reset-password\"></a2t-links>\n    ",
                        styles: ["\n        .email-send-text {\n            background-color: #72c380;\n            color: white;\n            font-size: 16pt;\n            text-align: center;\n            padding: 20px;\n            border-radius: 3px;\n        }\n    "]
                    },] },
        ];
        /** @nocollapse */
        A2tResetPasswordComponent.ctorParameters = function () {
            return [
                { type: A2tFormService },
                { type: Angular2TokenService }
            ];
        };
        return A2tResetPasswordComponent;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes} checked by tsc
     */
    var A2tUpdatePasswordComponent = (function () {
        function A2tUpdatePasswordComponent(_formService, _sessionService, _router) {
            var _this = this;
            this._formService = _formService;
            this._sessionService = _sessionService;
            this._router = _router;
            this._formService.initForm(UPDATE_PASSWORD_FORM);
            this._formService.submit$.subscribe(function (data) { return _this._sessionService.updatePassword(data).subscribe(function (res) { return _this._handleSuccess(res); }, function (error) { return _this._handleError(error); }); });
        }
        /**
         * @param {?} data
         * @return {?}
         */
        A2tUpdatePasswordComponent.prototype._handleSuccess = /**
         * @param {?} data
         * @return {?}
         */
            function (data) {
                this._router.navigate(['session/sign-in']);
            };
        /**
         * @param {?} error
         * @return {?}
         */
        A2tUpdatePasswordComponent.prototype._handleError = /**
         * @param {?} error
         * @return {?}
         */
            function (error) {
                this._errors = error.json().errors;
                this._formService.unlockSubmit();
            };
        A2tUpdatePasswordComponent.decorators = [
            { type: core.Component, args: [{
                        selector: 'a2t-update-password',
                        providers: [A2tFormService],
                        template: "\n        <a2t-headline>Update your Password</a2t-headline>\n        <a2t-error [errors]=\"_errors\"></a2t-error>\n        <a2t-form>Update Password</a2t-form>\n    "
                    },] },
        ];
        /** @nocollapse */
        A2tUpdatePasswordComponent.ctorParameters = function () {
            return [
                { type: A2tFormService },
                { type: Angular2TokenService },
                { type: router.Router }
            ];
        };
        return A2tUpdatePasswordComponent;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes} checked by tsc
     */
    var /** @type {?} */ routes = [{
            path: 'session',
            component: A2tUiComponent,
            children: [
                { path: 'sign-in', component: A2tSignInComponent },
                { path: 'sign-up', component: A2tSignUpComponent },
                { path: 'reset-password', component: A2tResetPasswordComponent },
                {
                    path: 'update-password',
                    component: A2tUpdatePasswordComponent,
                    canActivate: [Angular2TokenService]
                }
            ]
        }];
    var /** @type {?} */ a2tRoutes = router.RouterModule.forChild(routes);

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes} checked by tsc
     */
    var A2tUiModule = (function () {
        function A2tUiModule() {
        }
        A2tUiModule.decorators = [
            { type: core.NgModule, args: [{
                        imports: [
                            common.CommonModule,
                            router.RouterModule,
                            A2tSharedModule,
                            a2tRoutes
                        ],
                        declarations: [
                            A2tUiComponent,
                            A2tSignInComponent,
                            A2tSignUpComponent,
                            A2tResetPasswordComponent,
                            A2tUpdatePasswordComponent
                        ]
                    },] },
        ];
        return A2tUiModule;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes} checked by tsc
     */

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes} checked by tsc
     */

    exports.A2tUiModule = A2tUiModule;
    exports.Angular2TokenService = Angular2TokenService;
    exports.ɵl = A2tResetPasswordComponent;
    exports.ɵf = A2tErrorComponent;
    exports.ɵb = A2tFormFieldComponent;
    exports.ɵc = A2tFormComponent;
    exports.ɵd = A2tFormService;
    exports.ɵg = A2tHeadlineComponent;
    exports.ɵe = A2tLinksComponent;
    exports.ɵa = A2tSharedModule;
    exports.ɵj = A2tSignInComponent;
    exports.ɵk = A2tSignUpComponent;
    exports.ɵi = A2tUiComponent;
    exports.ɵh = a2tRoutes;
    exports.ɵm = A2tUpdatePasswordComponent;

    Object.defineProperty(exports, '__esModule', { value: true });

})));

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYW5ndWxhcjItdG9rZW4udW1kLmpzLm1hcCIsInNvdXJjZXMiOlsibmc6Ly9hbmd1bGFyMi10b2tlbi9hMnQtdWkvYTJ0LXNoYXJlZC9hMnQtZm9ybS9hMnQtZm9ybS5zZXJ2aWNlLnRzIiwibmc6Ly9hbmd1bGFyMi10b2tlbi9hMnQtdWkvYTJ0LXNoYXJlZC9hMnQtZm9ybS9hMnQtZm9ybS5jb21wb25lbnQudHMiLCJuZzovL2FuZ3VsYXIyLXRva2VuL2EydC11aS9hMnQtc2hhcmVkL2EydC1mb3JtL2EydC1mb3JtLWZpZWxkL2EydC1mb3JtLWZpZWxkLmNvbXBvbmVudC50cyIsIm5nOi8vYW5ndWxhcjItdG9rZW4vYTJ0LXVpL2EydC1zaGFyZWQvYTJ0LWxpbmtzL2EydC1saW5rcy5jb21wb25lbnQudHMiLCJuZzovL2FuZ3VsYXIyLXRva2VuL2EydC11aS9hMnQtc2hhcmVkL2EydC1lcnJvci9hMnQtZXJyb3IuY29tcG9uZW50LnRzIiwibmc6Ly9hbmd1bGFyMi10b2tlbi9hMnQtdWkvYTJ0LXNoYXJlZC9hMnQtaGVhZGxpbmUvYTJ0LWhlYWRsaW5lLmNvbXBvbmVudC50cyIsIm5nOi8vYW5ndWxhcjItdG9rZW4vYTJ0LXVpL2EydC1zaGFyZWQvYTJ0LXNoYXJlZC5tb2R1bGUudHMiLCJuZzovL2FuZ3VsYXIyLXRva2VuL2FuZ3VsYXIyLXRva2VuLnNlcnZpY2UudHMiLCJuZzovL2FuZ3VsYXIyLXRva2VuL2EydC11aS9hMnQtdWkuY29tcG9uZW50LnRzIiwibmc6Ly9hbmd1bGFyMi10b2tlbi9hMnQtdWkvYTJ0LXVpLmZvcm1zLnRzIiwibmc6Ly9hbmd1bGFyMi10b2tlbi9hMnQtdWkvYTJ0LXNpZ24taW4vYTJ0LXNpZ24taW4uY29tcG9uZW50LnRzIiwibmc6Ly9hbmd1bGFyMi10b2tlbi9hMnQtdWkvYTJ0LXNpZ24tdXAvYTJ0LXNpZ24tdXAuY29tcG9uZW50LnRzIiwibmc6Ly9hbmd1bGFyMi10b2tlbi9hMnQtdWkvYTJ0LXJlc2V0LXBhc3N3b3JkL2EydC1yZXNldC1wYXNzd29yZC5jb21wb25lbnQudHMiLCJuZzovL2FuZ3VsYXIyLXRva2VuL2EydC11aS9hMnQtdXBkYXRlLXBhc3N3b3JkL2EydC11cGRhdGUtcGFzc3dvcmQuY29tcG9uZW50LnRzIiwibmc6Ly9hbmd1bGFyMi10b2tlbi9hMnQtdWkvYTJ0LXVpLnJvdXRlcy50cyIsIm5nOi8vYW5ndWxhcjItdG9rZW4vYTJ0LXVpL2EydC11aS5tb2R1bGUudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgSW5qZWN0YWJsZSwgRXZlbnRFbWl0dGVyIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQgeyBGb3JtR3JvdXAsIEZvcm1Db250cm9sIH0gZnJvbSAnQGFuZ3VsYXIvZm9ybXMnO1xuaW1wb3J0IHsgU3ViamVjdCB9IGZyb20gJ3J4anMvU3ViamVjdCc7XG5cbmltcG9ydCB7IFNpZ25JbkRhdGEgfSBmcm9tICcuLi8uLi8uLi9hbmd1bGFyMi10b2tlbi5tb2RlbCc7XG5pbXBvcnQgeyBCYXNlRmllbGQgfSBmcm9tICcuLi8uLi9hMnQtdWkuZm9ybXMnO1xuXG5ASW5qZWN0YWJsZSgpXG5leHBvcnQgY2xhc3MgQTJ0Rm9ybVNlcnZpY2Uge1xuXG4gICAgLy8gU3VibWl0IEV2ZW50XG4gICAgcHVibGljIHN1Ym1pdCQgPSBuZXcgRXZlbnRFbWl0dGVyPGFueT4oKTtcbiAgICBwdWJsaWMgc3VibWl0TG9jazogYm9vbGVhbiA9IGZhbHNlO1xuXG4gICAgLy8gRm9ybSBCdWlsZGluZ1xuICAgIHB1YmxpYyBmb3JtR3JvdXA6IEZvcm1Hcm91cDtcbiAgICBwdWJsaWMgZmllbGRzOiBCYXNlRmllbGRbXTtcblxuICAgIGNvbnN0cnVjdG9yKCkgeyB9XG5cbiAgICBwdWJsaWMgaW5pdEZvcm0oZmllbGRzOiBCYXNlRmllbGRbXSkge1xuICAgICAgICB0aGlzLmZpZWxkcyA9IGZpZWxkcztcbiAgICAgICAgdGhpcy5fY3JlYXRlRm9ybUdyb3VwKCk7XG4gICAgfVxuXG4gICAgcHVibGljIHN1Ym1pdCgpIHtcbiAgICAgICAgdGhpcy5zdWJtaXRMb2NrID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5zdWJtaXQkLmVtaXQodGhpcy5mb3JtR3JvdXAudmFsdWUpO1xuICAgIH1cblxuICAgIHB1YmxpYyB1bmxvY2tTdWJtaXQoKSB7XG4gICAgICAgIHRoaXMuZm9ybUdyb3VwLnJlc2V0KCk7XG4gICAgICAgIHRoaXMuc3VibWl0TG9jayA9IGZhbHNlO1xuICAgIH07XG5cbiAgICBwcml2YXRlIF9jcmVhdGVGb3JtR3JvdXAoKSB7XG5cbiAgICAgICAgbGV0IGdyb3VwOiBhbnkgPSB7fTtcblxuICAgICAgICB0aGlzLmZpZWxkcy5mb3JFYWNoKHF1ZXN0aW9uID0+IHtcbiAgICAgICAgICAgIGdyb3VwW3F1ZXN0aW9uLmtleV0gPSBuZXcgRm9ybUNvbnRyb2wobnVsbCwgcXVlc3Rpb24udmFsaWRhdG9ycyk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHRoaXMuZm9ybUdyb3VwID0gbmV3IEZvcm1Hcm91cChncm91cCk7XG4gICAgfVxufVxuIiwiaW1wb3J0IHsgQ29tcG9uZW50IH0gIGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuXG5pbXBvcnQgeyBBMnRGb3JtU2VydmljZSB9IGZyb20gJy4vYTJ0LWZvcm0uc2VydmljZSc7XG5pbXBvcnQgeyBBMnRGb3JtRmllbGRDb21wb25lbnQgfSBmcm9tICcuL2EydC1mb3JtLWZpZWxkL2EydC1mb3JtLWZpZWxkLmNvbXBvbmVudCc7XG5cbkBDb21wb25lbnQoe1xuICAgIHNlbGVjdG9yOiAnYTJ0LWZvcm0nLFxuICAgIHRlbXBsYXRlOiBgXG4gICAgICAgIDxmb3JtIGNsYXNzPVwiYTJ0LWZvcm1cIlxuICAgICAgICAgICAgKG5nU3VibWl0KT1cIl9mb3JtU2VydmljZS5zdWJtaXQoKVwiXG4gICAgICAgICAgICBbZm9ybUdyb3VwXT1cIl9mb3JtU2VydmljZS5mb3JtR3JvdXBcIj5cblxuICAgICAgICAgICAgPGEydC1mb3JtLWZpZWxkXG4gICAgICAgICAgICAgICAgKm5nRm9yPVwibGV0IGZpZWxkIG9mIHRoaXMuX2Zvcm1TZXJ2aWNlLmZpZWxkc1wiXG4gICAgICAgICAgICAgICAgW3F1ZXN0aW9uXT1cImZpZWxkXCJcbiAgICAgICAgICAgICAgICBbZm9ybV09XCJfZm9ybVNlcnZpY2UuZm9ybUdyb3VwXCI+XG4gICAgICAgICAgICA8L2EydC1mb3JtLWZpZWxkPlxuXG4gICAgICAgICAgICA8YnV0dG9uIHR5cGU9XCJzdWJtaXRcIiBbZGlzYWJsZWRdPVwiIV9mb3JtU2VydmljZS5mb3JtR3JvdXAudmFsaWQgfHwgX2Zvcm1TZXJ2aWNlLmZvcm1Hcm91cC5wcmlzdGluZSB8fCBfZm9ybVNlcnZpY2Uuc3VibWl0TG9ja1wiPlxuICAgICAgICAgICAgICAgIDxuZy1jb250ZW50ICpuZ0lmPVwiIV9mb3JtU2VydmljZS5zdWJtaXRMb2NrXCI+PC9uZy1jb250ZW50PlxuICAgICAgICAgICAgICAgIDxzcGFuICpuZ0lmPVwiX2Zvcm1TZXJ2aWNlLnN1Ym1pdExvY2tcIj5TdWJtaXR0aW5nIC4uLjwvc3Bhbj5cbiAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICA8L2Zvcm0+XG4gICAgYCxcbiAgICBzdHlsZXM6IFtgXG4gICAgICAgIC5hMnQtZm9ybSB7XG4gICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiB3aGl0ZTtcbiAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDNweDtcbiAgICAgICAgICAgIGJveC1zaGFkb3c6IDBweCAxcHggNXB4IDAgcmdiYSgwLDAsMCwwLjMpO1xuICAgICAgICAgICAgcGFkZGluZy10b3A6IDIwcHg7XG4gICAgICAgICAgICBmb250LWZhbWlseTogXCJTZWdvZSBVSVwiLCBcIkhlbHZldGljYSBOZXVlXCIsIEFyaWFsLCBzYW5zLXNlcmlmO1xuICAgICAgICB9XG5cbiAgICAgICAgLmEydC1mb3JtIGJ1dHRvbiB7XG4gICAgICAgICAgICB3aWR0aDogMTAwJTtcblxuICAgICAgICAgICAgdHJhbnNpdGlvbjogLjNzO1xuICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogIzcyYzM4MDtcblxuICAgICAgICAgICAgYm9yZGVyLWJvdHRvbS1yaWdodC1yYWRpdXM6IDNweDtcbiAgICAgICAgICAgIGJvcmRlci1ib3R0b20tbGVmdC1yYWRpdXM6IDNweDtcblxuICAgICAgICAgICAgb3V0bGluZTogbm9uZTtcbiAgICAgICAgICAgIHRleHQtYWxpZ246IGNlbnRlcjtcbiAgICAgICAgICAgIGZvbnQtd2VpZ2h0OiA0MDA7XG4gICAgICAgICAgICBib3JkZXI6IG5vbmU7XG4gICAgICAgICAgICBmb250LXNpemU6IDE2cHg7XG4gICAgICAgICAgICBsaW5lLWhlaWdodDogMzBweDtcblxuICAgICAgICAgICAgdGV4dC1zaGFkb3c6IDAgMXB4IDJweCByZ2JhKDAsIDAsIDAsIDAuMjUpO1xuICAgICAgICAgICAgY29sb3I6IHdoaXRlO1xuICAgICAgICAgICAgYm9yZGVyLWJvdHRvbTogM3B4IHNvbGlkIHRyYW5zcGFyZW50O1xuICAgICAgICB9XG5cbiAgICAgICAgLmEydC1mb3JtIGJ1dHRvbjpkaXNhYmxlZCB7XG4gICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZWVlICFpbXBvcnRhbnQ7XG4gICAgICAgICAgICBjdXJzb3I6IG5vdC1hbGxvd2VkO1xuICAgICAgICAgICAgY29sb3I6ICM5OTk7XG4gICAgICAgICAgICB0ZXh0LXNoYWRvdzogbm9uZTtcbiAgICAgICAgfVxuXG4gICAgICAgIC5hMnQtZm9ybSBidXR0b246aG92ZXIge1xuICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogI2E2ZDlhZTtcbiAgICAgICAgfVxuICAgIGBdXG59KVxuXG5leHBvcnQgY2xhc3MgQTJ0Rm9ybUNvbXBvbmVudCB7XG4gICAgY29uc3RydWN0b3IocHVibGljIF9mb3JtU2VydmljZTogQTJ0Rm9ybVNlcnZpY2UpIHsgfVxufVxuIiwiaW1wb3J0IHsgQ29tcG9uZW50LCBJbnB1dCwgT25Jbml0IH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQgeyBGb3JtR3JvdXAsIEFic3RyYWN0Q29udHJvbCB9IGZyb20gJ0Bhbmd1bGFyL2Zvcm1zJztcblxuaW1wb3J0IHsgQmFzZUZpZWxkIH0gZnJvbSAnLi4vLi4vLi4vYTJ0LXVpLmZvcm1zJztcblxuQENvbXBvbmVudCh7XG4gICAgc2VsZWN0b3I6ICAgJ2EydC1mb3JtLWZpZWxkJyxcbiAgICB0ZW1wbGF0ZTogYFxuICAgICAgICA8ZGl2IGNsYXNzPVwiYTJ0LWlucHV0LWdyb3VwXCJcbiAgICAgICAgICAgIFtmb3JtR3JvdXBdPVwiZm9ybVwiPlxuXG4gICAgICAgICAgICA8bGFiZWxcbiAgICAgICAgICAgICAgICBbYXR0ci5mb3JdPVwicXVlc3Rpb24ua2V5XCJcbiAgICAgICAgICAgICAgICAqbmdJZj1cIl9jb250cm9sLnByaXN0aW5lXCI+XG4gICAgICAgICAgICAgICAge3txdWVzdGlvbi5sYWJlbH19XG4gICAgICAgICAgICA8L2xhYmVsPlxuXG4gICAgICAgICAgICA8bGFiZWwgY2xhc3M9XCJhMnQtZXJyb3JcIlxuICAgICAgICAgICAgICAgIFthdHRyLmZvcl09XCJxdWVzdGlvbi5rZXlcIlxuICAgICAgICAgICAgICAgICpuZ0lmPVwiX2NvbnRyb2wuaGFzRXJyb3IoJ3JlcXVpcmVkJykgJiYgIV9jb250cm9sLnByaXN0aW5lXCI+XG4gICAgICAgICAgICAgICAge3txdWVzdGlvbi5sYWJlbH19IGlzIHJlcXVpcmVkXG4gICAgICAgICAgICA8L2xhYmVsPlxuXG4gICAgICAgICAgICA8bGFiZWwgY2xhc3M9XCJhMnQtZXJyb3JcIlxuICAgICAgICAgICAgICAgIFthdHRyLmZvcl09XCJxdWVzdGlvbi5rZXlcIlxuICAgICAgICAgICAgICAgICpuZ0lmPVwiX2NvbnRyb2wuaGFzRXJyb3IoJ21pbmxlbmd0aCcpXCI+XG4gICAgICAgICAgICAgICAge3txdWVzdGlvbi5sYWJlbH19IGlzIHRvbyBzaG9ydFxuICAgICAgICAgICAgPC9sYWJlbD5cblxuICAgICAgICAgICAgPGxhYmVsIGNsYXNzPVwiYTJ0LWVycm9yXCJcbiAgICAgICAgICAgICAgICBbYXR0ci5mb3JdPVwicXVlc3Rpb24ua2V5XCJcbiAgICAgICAgICAgICAgICAqbmdJZj1cIl9jb250cm9sLmhhc0Vycm9yKCdtYXhsZW5ndGgnKVwiPlxuICAgICAgICAgICAgICAgIHt7cXVlc3Rpb24ubGFiZWx9fSBpcyB0b28gbG9uZ1xuICAgICAgICAgICAgPC9sYWJlbD5cblxuICAgICAgICAgICAgPGxhYmVsIGNsYXNzPVwiYTJ0LXZhbGlkXCJcbiAgICAgICAgICAgICAgICBbYXR0ci5mb3JdPVwicXVlc3Rpb24ua2V5XCJcbiAgICAgICAgICAgICAgICAqbmdJZj1cIl9jb250cm9sLnZhbGlkICYmICFfY29udHJvbC5wcmlzdGluZVwiPlxuICAgICAgICAgICAgICAgIHt7cXVlc3Rpb24ubGFiZWx9fVxuICAgICAgICAgICAgPC9sYWJlbD5cblxuICAgICAgICAgICAgPGlucHV0XG4gICAgICAgICAgICAgICAgW2Zvcm1Db250cm9sTmFtZV09XCJxdWVzdGlvbi5rZXlcIlxuICAgICAgICAgICAgICAgIFtpZF09XCJxdWVzdGlvbi5rZXlcIlxuICAgICAgICAgICAgICAgIFt0eXBlXT1cInF1ZXN0aW9uLnR5cGVcIj5cbiAgICAgICAgPC9kaXY+XG4gICAgYCxcbiAgICBzdHlsZXM6IFtgXG4gICAgICAgIC5hMnQtaW5wdXQtZ3JvdXAge1xuICAgICAgICAgICAgcGFkZGluZy1ib3R0b206IDQwcHg7XG4gICAgICAgICAgICBwYWRkaW5nLXJpZ2h0OiAyMHB4O1xuICAgICAgICAgICAgcGFkZGluZy1sZWZ0OiAyMHB4O1xuICAgICAgICAgICAgZm9udC1mYW1pbHk6IFwiU2Vnb2UgVUlcIiwgXCJIZWx2ZXRpY2EgTmV1ZVwiLCBBcmlhbCwgc2Fucy1zZXJpZjtcbiAgICAgICAgfVxuXG4gICAgICAgIC5hMnQtaW5wdXQtZ3JvdXAgaW5wdXQge1xuICAgICAgICAgICAgd2lkdGg6IDEwMCU7XG4gICAgICAgICAgICBvdXRsaW5lOiBub25lO1xuICAgICAgICAgICAgYm9yZGVyOiBub25lO1xuICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogI2VlZTtcbiAgICAgICAgICAgIGxpbmUtaGVpZ2h0OiA0MHB4O1xuXG4gICAgICAgICAgICBwYWRkaW5nLWxlZnQ6IDEwcHg7XG4gICAgICAgICAgICBwYWRkaW5nLXJpZ2h0OiAxMHB4O1xuICAgICAgICB9XG5cbiAgICAgICAgLmEydC1pbnB1dC1ncm91cCBsYWJlbCB7XG4gICAgICAgICAgICBjb2xvcjogIzY2NjtcbiAgICAgICAgICAgIGZvbnQtd2VpZ2h0OiA2MDA7XG4gICAgICAgICAgICBmb250LXNpemU6IDEzcHg7XG4gICAgICAgICAgICBtYXJnaW4tYm90dG9tOiAwO1xuICAgICAgICB9XG5cbiAgICAgICAgLmEydC1lcnJvciB7XG4gICAgICAgICAgICBjb2xvcjogI2RmNjU2NCAhaW1wb3J0YW50O1xuICAgICAgICB9XG5cbiAgICAgICAgLmEydC12YWxpZCB7XG4gICAgICAgICAgICBjb2xvcjogIzcyYzM4MCAhaW1wb3J0YW50O1xuICAgICAgICB9XG4gICAgYF1cbn0pXG5cbmV4cG9ydCBjbGFzcyBBMnRGb3JtRmllbGRDb21wb25lbnQgaW1wbGVtZW50cyBPbkluaXQge1xuXG4gICAgQElucHV0KCkgcXVlc3Rpb246ICBCYXNlRmllbGQ7XG4gICAgQElucHV0KCkgZm9ybTogICAgICBGb3JtR3JvdXA7XG5cbiAgICBfY29udHJvbDogICBBYnN0cmFjdENvbnRyb2w7XG5cbiAgICBuZ09uSW5pdCgpIHtcbiAgICAgICAgdGhpcy5fY29udHJvbCA9IHRoaXMuZm9ybS5jb250cm9sc1t0aGlzLnF1ZXN0aW9uLmtleV07XG4gICAgfVxuXG4gICAgZ2V0IGlzVmFsaWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9jb250cm9sLnZhbGlkO1xuICAgIH1cbn1cbiIsImltcG9ydCB7IENvbXBvbmVudCwgSW5wdXQgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcblxuQENvbXBvbmVudCh7XG4gICAgc2VsZWN0b3I6ICAgJ2EydC1saW5rcycsXG4gICAgdGVtcGxhdGU6IGBcbiAgICAgICAgPGRpdiBjbGFzcz1cImEydC13cmFwcGVyXCI+XG4gICAgICAgICAgICA8cD48YSByb3V0ZXJMaW5rPVwiL3Nlc3Npb24vcmVzZXQtcGFzc3dvcmRcIiAqbmdJZj1cImNhc2UgIT0gJ3Jlc2V0LXBhc3N3b3JkJ1wiPkZvcmdvdCBQYXNzd29yZD88L2E+PC9wPlxuICAgICAgICAgICAgPHA+PGEgcm91dGVyTGluaz1cIi9zZXNzaW9uL3NpZ24tdXBcIiAqbmdJZj1cImNhc2UgIT0gJ3NpZ24tdXAnXCI+U2lnbiBVcDwvYT48L3A+XG4gICAgICAgICAgICA8cD48YSByb3V0ZXJMaW5rPVwiL3Nlc3Npb24vc2lnbi1pblwiICpuZ0lmPVwiY2FzZSAhPSAnc2lnbi1pbidcIj5TaWduIEluPC9hPjwvcD5cbiAgICAgICAgPC9kaXY+XG4gICAgYCxcbiAgICBzdHlsZXM6IFtgXG4gICAgICAgIC5hMnQtd3JhcHBlciB7XG4gICAgICAgICAgICBtYXJnaW4tdG9wOiAyMHB4O1xuICAgICAgICB9XG5cbiAgICAgICAgcCB7XG4gICAgICAgICAgICBtYXJnaW4tYm90dG9tOiAwO1xuICAgICAgICB9XG5cbiAgICAgICAgYSB7XG4gICAgICAgICAgICBjb2xvcjogI2VlZSAhaW1wb3J0YW50O1xuICAgICAgICAgICAgdHJhbnNpdGlvbjogLjNzO1xuICAgICAgICAgICAgdGV4dC1kZWNvcmF0aW9uOiBub25lO1xuICAgICAgICAgICAgZm9udC1zaXplOiAxNXB4O1xuICAgICAgICAgICAgZm9udC13ZWlnaHQ6IDMwMDtcbiAgICAgICAgICAgIGZvbnQtZmFtaWx5OiBcIlNlZ29lIFVJXCIsIFwiSGVsdmV0aWNhIE5ldWVcIiwgQXJpYWwsIHNhbnMtc2VyaWY7XG4gICAgICAgIH1cblxuICAgICAgICBhOmhvdmVyIHtcbiAgICAgICAgICAgIGNvbG9yOiB3aGl0ZTtcbiAgICAgICAgfVxuICAgIGBdXG59KVxuZXhwb3J0IGNsYXNzIEEydExpbmtzQ29tcG9uZW50IHtcblxuICAgIEBJbnB1dCgpIGNhc2U6IHN0cmluZztcblxuICAgIGNvbnN0cnVjdG9yKCkgeyB9XG59IiwiaW1wb3J0IHsgQ29tcG9uZW50LCBJbnB1dCB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuXG5AQ29tcG9uZW50KHtcbiAgICBzZWxlY3RvcjogICAnYTJ0LWVycm9yJyxcbiAgICB0ZW1wbGF0ZTogICAnPGRpdiAqbmdGb3I9XCJsZXQgZXJyb3Igb2YgZXJyb3JzXCI+PHA+e3tlcnJvcn19PC9wPjwvZGl2PicsXG4gICAgc3R5bGVzOiBbYFxuICAgICAgICBkaXYge1xuICAgICAgICAgICAgd2lkdGg6IDEwMCU7XG4gICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZGY2NTY0O1xuICAgICAgICAgICAgY29sb3I6IHdoaXRlO1xuICAgICAgICAgICAgZm9udC13ZWlnaHQ6IDMwMDtcbiAgICAgICAgICAgIGZvbnQtc2l6ZTogMTVweDtcbiAgICAgICAgICAgIHBhZGRpbmc6IDEwcHggMjBweDtcbiAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDNweDtcbiAgICAgICAgICAgIG1hcmdpbi1ib3R0b206IDE1cHg7XG4gICAgICAgIH1cblxuICAgICAgICBkaXYgPiBwIHtcbiAgICAgICAgICAgIG1hcmdpbi1ib3R0b206IDA7XG4gICAgICAgIH1cbiAgICBgXVxufSlcbmV4cG9ydCBjbGFzcyBBMnRFcnJvckNvbXBvbmVudCB7XG5cbiAgICBASW5wdXQoKSBlcnJvcnM6IHN0cmluZ1tdO1xuXG4gICAgY29uc3RydWN0b3IoKSB7IH1cbn0iLCJpbXBvcnQgeyBDb21wb25lbnQgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcblxuQENvbXBvbmVudCh7XG4gICAgc2VsZWN0b3I6ICAgJ2EydC1oZWFkbGluZScsXG4gICAgdGVtcGxhdGU6ICAgJzxwPjxuZy1jb250ZW50PjwvbmctY29udGVudD48L3A+JyxcbiAgICBzdHlsZXM6ICBbYFxuICAgICAgICBwIHtcbiAgICAgICAgICAgIHRleHQtYWxpZ246IGNlbnRlcjtcbiAgICAgICAgICAgIGNvbG9yOiB3aGl0ZTtcbiAgICAgICAgICAgIGZvbnQtc2l6ZTogMzBweDtcbiAgICAgICAgfVxuICAgIGBdXG59KVxuZXhwb3J0IGNsYXNzIEEydEhlYWRsaW5lQ29tcG9uZW50IHtcbiAgICBjb25zdHJ1Y3RvcigpIHsgfVxufSIsImltcG9ydCB7IE5nTW9kdWxlIH0gICAgIGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgUmVhY3RpdmVGb3Jtc01vZHVsZSB9ICBmcm9tICdAYW5ndWxhci9mb3Jtcyc7XG5pbXBvcnQgeyBDb21tb25Nb2R1bGUgfSBmcm9tICdAYW5ndWxhci9jb21tb24nO1xuaW1wb3J0IHsgUm91dGVyTW9kdWxlIH0gZnJvbSAnQGFuZ3VsYXIvcm91dGVyJztcblxuaW1wb3J0IHsgQTJ0Rm9ybUNvbXBvbmVudCB9IGZyb20gJy4vYTJ0LWZvcm0vYTJ0LWZvcm0uY29tcG9uZW50JztcbmltcG9ydCB7IEEydEZvcm1GaWVsZENvbXBvbmVudCB9IGZyb20gJy4vYTJ0LWZvcm0vYTJ0LWZvcm0tZmllbGQvYTJ0LWZvcm0tZmllbGQuY29tcG9uZW50JztcbmltcG9ydCB7IEEydExpbmtzQ29tcG9uZW50IH0gZnJvbSAnLi9hMnQtbGlua3MvYTJ0LWxpbmtzLmNvbXBvbmVudCc7XG5pbXBvcnQgeyBBMnRFcnJvckNvbXBvbmVudCB9IGZyb20gJy4vYTJ0LWVycm9yL2EydC1lcnJvci5jb21wb25lbnQnO1xuaW1wb3J0IHsgQTJ0SGVhZGxpbmVDb21wb25lbnQgfSBmcm9tICcuL2EydC1oZWFkbGluZS9hMnQtaGVhZGxpbmUuY29tcG9uZW50JztcblxuQE5nTW9kdWxlKHtcbiAgICBpbXBvcnRzOiBbXG4gICAgICAgIENvbW1vbk1vZHVsZSxcbiAgICAgICAgUmVhY3RpdmVGb3Jtc01vZHVsZSxcbiAgICAgICAgUm91dGVyTW9kdWxlXG4gICAgXSxcbiAgICBkZWNsYXJhdGlvbnM6IFtcbiAgICAgICAgQTJ0Rm9ybUZpZWxkQ29tcG9uZW50LFxuICAgICAgICBBMnRGb3JtQ29tcG9uZW50LFxuICAgICAgICBBMnRMaW5rc0NvbXBvbmVudCxcbiAgICAgICAgQTJ0RXJyb3JDb21wb25lbnQsXG4gICAgICAgIEEydEhlYWRsaW5lQ29tcG9uZW50XG4gICAgXSxcbiAgICBleHBvcnRzOiBbXG4gICAgICAgIEEydEZvcm1Db21wb25lbnQsXG4gICAgICAgIEEydExpbmtzQ29tcG9uZW50LFxuICAgICAgICBBMnRFcnJvckNvbXBvbmVudCxcbiAgICAgICAgQTJ0SGVhZGxpbmVDb21wb25lbnRcbiAgICBdXG59KVxuZXhwb3J0IGNsYXNzIEEydFNoYXJlZE1vZHVsZSB7IH1cbiIsImltcG9ydCB7IEluamVjdGFibGUsIE9wdGlvbmFsIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQgeyBBY3RpdmF0ZWRSb3V0ZSwgUm91dGVyLCBDYW5BY3RpdmF0ZSB9IGZyb20gJ0Bhbmd1bGFyL3JvdXRlcic7XG5pbXBvcnQge1xuICAgIEh0dHAsXG4gICAgUmVzcG9uc2UsXG4gICAgSGVhZGVycyxcbiAgICBSZXF1ZXN0LFxuICAgIFJlcXVlc3RNZXRob2QsXG4gICAgUmVxdWVzdE9wdGlvbnMsXG4gICAgUmVxdWVzdE9wdGlvbnNBcmdzXG59IGZyb20gJ0Bhbmd1bGFyL2h0dHAnO1xuXG5pbXBvcnQgeyBPYnNlcnZhYmxlLCBpbnRlcnZhbCwgZnJvbUV2ZW50IH0gZnJvbSAncnhqcyc7XG5pbXBvcnQgeyBzaGFyZSwgcGx1Y2ssIGZpbHRlciB9IGZyb20gJ3J4anMvb3BlcmF0b3JzJztcblxuaW1wb3J0IHtcbiAgICBTaWduSW5EYXRhLFxuICAgIFJlZ2lzdGVyRGF0YSxcbiAgICBVcGRhdGVQYXNzd29yZERhdGEsXG4gICAgUmVzZXRQYXNzd29yZERhdGEsXG5cbiAgICBVc2VyVHlwZSxcbiAgICBVc2VyRGF0YSxcbiAgICBBdXRoRGF0YSxcblxuICAgIEFuZ3VsYXIyVG9rZW5PcHRpb25zXG59IGZyb20gJy4vYW5ndWxhcjItdG9rZW4ubW9kZWwnO1xuXG5ASW5qZWN0YWJsZSgpXG5leHBvcnQgY2xhc3MgQW5ndWxhcjJUb2tlblNlcnZpY2UgaW1wbGVtZW50cyBDYW5BY3RpdmF0ZSB7XG5cbiAgICBnZXQgY3VycmVudFVzZXJUeXBlKCk6IHN0cmluZyB7XG4gICAgICAgIGlmICh0aGlzLmF0Q3VycmVudFVzZXJUeXBlICE9IG51bGwpXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5hdEN1cnJlbnRVc2VyVHlwZS5uYW1lO1xuICAgICAgICBlbHNlXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICBnZXQgY3VycmVudFVzZXJEYXRhKCk6IFVzZXJEYXRhIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuYXRDdXJyZW50VXNlckRhdGE7XG4gICAgfVxuXG4gICAgZ2V0IGN1cnJlbnRBdXRoRGF0YSgpOiBBdXRoRGF0YSB7XG4gICAgICAgIHJldHVybiB0aGlzLmF0Q3VycmVudEF1dGhEYXRhO1xuICAgIH1cblxuICAgIGdldCBjdXJyZW50QXV0aEhlYWRlcnMoKTogSGVhZGVycyB7XG4gICAgICAgIGlmICh0aGlzLmF0Q3VycmVudEF1dGhEYXRhICE9IG51bGwpIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgSGVhZGVycyh7XG4gICAgICAgICAgICAgICAgJ2FjY2Vzcy10b2tlbic6IHRoaXMuYXRDdXJyZW50QXV0aERhdGEuYWNjZXNzVG9rZW4sXG4gICAgICAgICAgICAgICAgJ2NsaWVudCc6ICAgICAgIHRoaXMuYXRDdXJyZW50QXV0aERhdGEuY2xpZW50LFxuICAgICAgICAgICAgICAgICdleHBpcnknOiAgICAgICB0aGlzLmF0Q3VycmVudEF1dGhEYXRhLmV4cGlyeSxcbiAgICAgICAgICAgICAgICAndG9rZW4tdHlwZSc6ICAgdGhpcy5hdEN1cnJlbnRBdXRoRGF0YS50b2tlblR5cGUsXG4gICAgICAgICAgICAgICAgJ3VpZCc6ICAgICAgICAgIHRoaXMuYXRDdXJyZW50QXV0aERhdGEudWlkXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBuZXcgSGVhZGVycztcbiAgICB9XG5cbiAgICBwcml2YXRlIGF0T3B0aW9uczogQW5ndWxhcjJUb2tlbk9wdGlvbnM7XG4gICAgcHJpdmF0ZSBhdEN1cnJlbnRVc2VyVHlwZTogVXNlclR5cGU7XG4gICAgcHJpdmF0ZSBhdEN1cnJlbnRBdXRoRGF0YTogQXV0aERhdGE7XG4gICAgcHJpdmF0ZSBhdEN1cnJlbnRVc2VyRGF0YTogVXNlckRhdGE7XG5cbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgcHJpdmF0ZSBodHRwOiBIdHRwLFxuICAgICAgICBAT3B0aW9uYWwoKSBwcml2YXRlIGFjdGl2YXRlZFJvdXRlOiBBY3RpdmF0ZWRSb3V0ZSxcbiAgICAgICAgQE9wdGlvbmFsKCkgcHJpdmF0ZSByb3V0ZXI6IFJvdXRlclxuICAgICkgeyB9XG5cbiAgICB1c2VyU2lnbmVkSW4oKTogYm9vbGVhbiB7XG4gICAgICAgIHJldHVybiAhIXRoaXMuYXRDdXJyZW50QXV0aERhdGE7XG4gICAgfVxuXG4gICAgY2FuQWN0aXZhdGUoKTogYm9vbGVhbiB7XG4gICAgICAgIGlmICh0aGlzLnVzZXJTaWduZWRJbigpKVxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgLy8gU3RvcmUgY3VycmVudCBsb2NhdGlvbiBpbiBzdG9yYWdlICh1c2VmdWxsIGZvciByZWRpcmVjdGlvbiBhZnRlciBzaWduaW5nIGluKVxuICAgICAgICAgICAgaWYgKHRoaXMuYXRPcHRpb25zLnNpZ25JblN0b3JlZFVybFN0b3JhZ2VLZXkpIHtcbiAgICAgICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5hdE9wdGlvbnMuc2lnbkluU3RvcmVkVXJsU3RvcmFnZUtleSxcbiAgICAgICAgICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLnBhdGhuYW1lICsgd2luZG93LmxvY2F0aW9uLnNlYXJjaFxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIFJlZGlyZWN0IHVzZXIgdG8gc2lnbiBpbiBpZiBzaWduSW5SZWRpcmVjdCBpcyBzZXRcbiAgICAgICAgICAgIGlmKHRoaXMucm91dGVyICYmIHRoaXMuYXRPcHRpb25zLnNpZ25JblJlZGlyZWN0KVxuICAgICAgICAgICAgICAgIHRoaXMucm91dGVyLm5hdmlnYXRlKFt0aGlzLmF0T3B0aW9ucy5zaWduSW5SZWRpcmVjdF0pO1xuXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBJbml0YWwgY29uZmlndXJhdGlvblxuICAgIGluaXQob3B0aW9ucz86IEFuZ3VsYXIyVG9rZW5PcHRpb25zKSB7XG5cbiAgICAgICAgbGV0IGRlZmF1bHRPcHRpb25zOiBBbmd1bGFyMlRva2VuT3B0aW9ucyA9IHtcbiAgICAgICAgICAgIGFwaVBhdGg6ICAgICAgICAgICAgICAgICAgICBudWxsLFxuICAgICAgICAgICAgYXBpQmFzZTogICAgICAgICAgICAgICAgICAgIG51bGwsXG5cbiAgICAgICAgICAgIHNpZ25JblBhdGg6ICAgICAgICAgICAgICAgICAnYXV0aC9zaWduX2luJyxcbiAgICAgICAgICAgIHNpZ25JblJlZGlyZWN0OiAgICAgICAgICAgICBudWxsLFxuICAgICAgICAgICAgc2lnbkluU3RvcmVkVXJsU3RvcmFnZUtleTogIG51bGwsXG5cbiAgICAgICAgICAgIHNpZ25PdXRQYXRoOiAgICAgICAgICAgICAgICAnYXV0aC9zaWduX291dCcsXG4gICAgICAgICAgICB2YWxpZGF0ZVRva2VuUGF0aDogICAgICAgICAgJ2F1dGgvdmFsaWRhdGVfdG9rZW4nLFxuICAgICAgICAgICAgc2lnbk91dEZhaWxlZFZhbGlkYXRlOiAgICAgIGZhbHNlLFxuXG4gICAgICAgICAgICByZWdpc3RlckFjY291bnRQYXRoOiAgICAgICAgJ2F1dGgnLFxuICAgICAgICAgICAgZGVsZXRlQWNjb3VudFBhdGg6ICAgICAgICAgICdhdXRoJyxcbiAgICAgICAgICAgIHJlZ2lzdGVyQWNjb3VudENhbGxiYWNrOiAgICB3aW5kb3cubG9jYXRpb24uaHJlZixcblxuICAgICAgICAgICAgdXBkYXRlUGFzc3dvcmRQYXRoOiAgICAgICAgICdhdXRoJyxcblxuICAgICAgICAgICAgcmVzZXRQYXNzd29yZFBhdGg6ICAgICAgICAgICdhdXRoL3Bhc3N3b3JkJyxcbiAgICAgICAgICAgIHJlc2V0UGFzc3dvcmRDYWxsYmFjazogICAgICB3aW5kb3cubG9jYXRpb24uaHJlZixcblxuICAgICAgICAgICAgdXNlclR5cGVzOiAgICAgICAgICAgICAgICAgIG51bGwsXG5cbiAgICAgICAgICAgIG9BdXRoQmFzZTogICAgICAgICAgICAgICAgICB3aW5kb3cubG9jYXRpb24ub3JpZ2luLFxuICAgICAgICAgICAgb0F1dGhQYXRoczoge1xuICAgICAgICAgICAgICAgIGdpdGh1YjogICAgICAgICAgICAgICAgICdhdXRoL2dpdGh1YidcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBvQXV0aENhbGxiYWNrUGF0aDogICAgICAgICAgJ29hdXRoX2NhbGxiYWNrJyxcbiAgICAgICAgICAgIG9BdXRoV2luZG93VHlwZTogICAgICAgICAgICAnbmV3V2luZG93JyxcbiAgICAgICAgICAgIG9BdXRoV2luZG93T3B0aW9uczogICAgICAgICBudWxsLFxuXG4gICAgICAgICAgICBnbG9iYWxPcHRpb25zOiB7XG4gICAgICAgICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICAgICAgICAgICAgICAnQWNjZXB0JzogICAgICAgJ2FwcGxpY2F0aW9uL2pzb24nXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAgIHRoaXMuYXRPcHRpb25zID0gKDxhbnk+T2JqZWN0KS5hc3NpZ24oZGVmYXVsdE9wdGlvbnMsIG9wdGlvbnMpO1xuXG4gICAgICAgIHRoaXMudHJ5TG9hZEF1dGhEYXRhKCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICpcbiAgICAgKiBBY3Rpb25zXG4gICAgICpcbiAgICAgKi9cblxuICAgIC8vIFJlZ2lzdGVyIHJlcXVlc3RcbiAgICByZWdpc3RlckFjY291bnQocmVnaXN0ZXJEYXRhOiBSZWdpc3RlckRhdGEpOiBPYnNlcnZhYmxlPFJlc3BvbnNlPiB7XG5cbiAgICAgICAgaWYgKHJlZ2lzdGVyRGF0YS51c2VyVHlwZSA9PSBudWxsKVxuICAgICAgICAgICAgdGhpcy5hdEN1cnJlbnRVc2VyVHlwZSA9IG51bGw7XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5hdEN1cnJlbnRVc2VyVHlwZSA9IHRoaXMuZ2V0VXNlclR5cGVCeU5hbWUocmVnaXN0ZXJEYXRhLnVzZXJUeXBlKTtcbiAgICAgICAgICAgIGRlbGV0ZSByZWdpc3RlckRhdGEudXNlclR5cGU7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoXG4gICAgICAgICAgICByZWdpc3RlckRhdGEucGFzc3dvcmRfY29uZmlybWF0aW9uID09IG51bGwgJiYgXG4gICAgICAgICAgICByZWdpc3RlckRhdGEucGFzc3dvcmRDb25maXJtYXRpb24gIT0gbnVsbFxuICAgICAgICApIHtcbiAgICAgICAgICAgIHJlZ2lzdGVyRGF0YS5wYXNzd29yZF9jb25maXJtYXRpb24gID0gcmVnaXN0ZXJEYXRhLnBhc3N3b3JkQ29uZmlybWF0aW9uO1xuICAgICAgICAgICAgZGVsZXRlIHJlZ2lzdGVyRGF0YS5wYXNzd29yZENvbmZpcm1hdGlvbjtcbiAgICAgICAgfVxuXG4gICAgICAgIHJlZ2lzdGVyRGF0YS5jb25maXJtX3N1Y2Nlc3NfdXJsICAgID0gdGhpcy5hdE9wdGlvbnMucmVnaXN0ZXJBY2NvdW50Q2FsbGJhY2s7XG5cbiAgICAgICAgcmV0dXJuIHRoaXMucG9zdCh0aGlzLmdldFVzZXJQYXRoKCkgKyB0aGlzLmF0T3B0aW9ucy5yZWdpc3RlckFjY291bnRQYXRoLCBKU09OLnN0cmluZ2lmeShyZWdpc3RlckRhdGEpKTtcbiAgICB9XG5cbiAgICAvLyBEZWxldGUgQWNjb3VudFxuICAgIGRlbGV0ZUFjY291bnQoKTogT2JzZXJ2YWJsZTxSZXNwb25zZT4ge1xuICAgICAgICByZXR1cm4gdGhpcy5kZWxldGUodGhpcy5nZXRVc2VyUGF0aCgpICsgdGhpcy5hdE9wdGlvbnMuZGVsZXRlQWNjb3VudFBhdGgpO1xuICAgIH1cblxuICAgIC8vIFNpZ24gaW4gcmVxdWVzdCBhbmQgc2V0IHN0b3JhZ2VcbiAgICBzaWduSW4oc2lnbkluRGF0YTogU2lnbkluRGF0YSk6IE9ic2VydmFibGU8UmVzcG9uc2U+IHtcblxuICAgICAgICBpZiAoc2lnbkluRGF0YS51c2VyVHlwZSA9PSBudWxsKVxuICAgICAgICAgICAgdGhpcy5hdEN1cnJlbnRVc2VyVHlwZSA9IG51bGw7XG4gICAgICAgIGVsc2VcbiAgICAgICAgICAgIHRoaXMuYXRDdXJyZW50VXNlclR5cGUgPSB0aGlzLmdldFVzZXJUeXBlQnlOYW1lKHNpZ25JbkRhdGEudXNlclR5cGUpO1xuXG4gICAgICAgIGxldCBib2R5ID0gSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICAgICAgZW1haWw6ICAgICAgc2lnbkluRGF0YS5lbWFpbCxcbiAgICAgICAgICAgIHBhc3N3b3JkOiAgIHNpZ25JbkRhdGEucGFzc3dvcmRcbiAgICAgICAgfSk7XG5cbiAgICAgICAgbGV0IG9ic2VydiA9IHRoaXMucG9zdCh0aGlzLmdldFVzZXJQYXRoKCkgKyB0aGlzLmF0T3B0aW9ucy5zaWduSW5QYXRoLCBib2R5KTtcblxuICAgICAgICBvYnNlcnYuc3Vic2NyaWJlKHJlcyA9PiB0aGlzLmF0Q3VycmVudFVzZXJEYXRhID0gcmVzLmpzb24oKS5kYXRhLCBfZXJyb3IgPT4gbnVsbCk7XG5cbiAgICAgICAgcmV0dXJuIG9ic2VydjtcbiAgICB9XG5cbiAgICBzaWduSW5PQXV0aChvQXV0aFR5cGU6IHN0cmluZykge1xuXG4gICAgICAgIGxldCBvQXV0aFBhdGg6IHN0cmluZyA9IHRoaXMuZ2V0T0F1dGhQYXRoKG9BdXRoVHlwZSk7XG4gICAgICAgIGxldCBjYWxsYmFja1VybDogc3RyaW5nID0gYCR7d2luZG93LmxvY2F0aW9uLm9yaWdpbn0vJHt0aGlzLmF0T3B0aW9ucy5vQXV0aENhbGxiYWNrUGF0aH1gO1xuICAgICAgICBsZXQgb0F1dGhXaW5kb3dUeXBlOiBzdHJpbmcgPSB0aGlzLmF0T3B0aW9ucy5vQXV0aFdpbmRvd1R5cGU7XG4gICAgICAgIGxldCBhdXRoVXJsOiBzdHJpbmcgPSB0aGlzLmdldE9BdXRoVXJsKG9BdXRoUGF0aCwgY2FsbGJhY2tVcmwsIG9BdXRoV2luZG93VHlwZSk7XG5cbiAgICAgICAgaWYgKG9BdXRoV2luZG93VHlwZSA9PSAnbmV3V2luZG93Jykge1xuICAgICAgICAgICAgbGV0IG9BdXRoV2luZG93T3B0aW9ucyA9IHRoaXMuYXRPcHRpb25zLm9BdXRoV2luZG93T3B0aW9ucztcbiAgICAgICAgICAgIGxldCB3aW5kb3dPcHRpb25zID0gJyc7XG5cbiAgICAgICAgICAgIGlmIChvQXV0aFdpbmRvd09wdGlvbnMpIHtcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBrZXkgaW4gb0F1dGhXaW5kb3dPcHRpb25zKSB7XG4gICAgICAgICAgICAgICAgICAgIHdpbmRvd09wdGlvbnMgKz0gYCwke2tleX09JHtvQXV0aFdpbmRvd09wdGlvbnNba2V5XX1gO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgbGV0IHBvcHVwID0gd2luZG93Lm9wZW4oXG4gICAgICAgICAgICAgICAgYXV0aFVybCxcbiAgICAgICAgICAgICAgICAnX2JsYW5rJyxcbiAgICAgICAgICAgICAgICBgY2xvc2VidXR0b25jYXB0aW9uPUNhbmNlbCR7d2luZG93T3B0aW9uc31gXG4gICAgICAgICAgICApO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucmVxdWVzdENyZWRlbnRpYWxzVmlhUG9zdE1lc3NhZ2UocG9wdXApO1xuICAgICAgICB9IGVsc2UgaWYgKG9BdXRoV2luZG93VHlwZSA9PSAnc2FtZVdpbmRvdycpIHtcbiAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gYXV0aFVybDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRocm93IGBVbnN1cHBvcnRlZCBvQXV0aFdpbmRvd1R5cGUgXCIke29BdXRoV2luZG93VHlwZX1cImA7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcm9jZXNzT0F1dGhDYWxsYmFjaygpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5nZXRBdXRoRGF0YUZyb21QYXJhbXMoKTtcbiAgICB9XG5cbiAgICAvLyBTaWduIG91dCByZXF1ZXN0IGFuZCBkZWxldGUgc3RvcmFnZVxuICAgIHNpZ25PdXQoKTogT2JzZXJ2YWJsZTxSZXNwb25zZT4ge1xuICAgICAgICBsZXQgb2JzZXJ2ID0gdGhpcy5kZWxldGUodGhpcy5nZXRVc2VyUGF0aCgpICsgdGhpcy5hdE9wdGlvbnMuc2lnbk91dFBhdGgpO1xuXG4gICAgICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKCdhY2Nlc3NUb2tlbicpO1xuICAgICAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSgnY2xpZW50Jyk7XG4gICAgICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKCdleHBpcnknKTtcbiAgICAgICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oJ3Rva2VuVHlwZScpO1xuICAgICAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSgndWlkJyk7XG5cbiAgICAgICAgdGhpcy5hdEN1cnJlbnRBdXRoRGF0YSA9IG51bGw7XG4gICAgICAgIHRoaXMuYXRDdXJyZW50VXNlclR5cGUgPSBudWxsO1xuICAgICAgICB0aGlzLmF0Q3VycmVudFVzZXJEYXRhID0gbnVsbDtcblxuICAgICAgICByZXR1cm4gb2JzZXJ2O1xuICAgIH1cblxuICAgIC8vIFZhbGlkYXRlIHRva2VuIHJlcXVlc3RcbiAgICB2YWxpZGF0ZVRva2VuKCk6IE9ic2VydmFibGU8UmVzcG9uc2U+IHtcbiAgICAgICAgbGV0IG9ic2VydiA9IHRoaXMuZ2V0KHRoaXMuZ2V0VXNlclBhdGgoKSArIHRoaXMuYXRPcHRpb25zLnZhbGlkYXRlVG9rZW5QYXRoKTtcblxuICAgICAgICBvYnNlcnYuc3Vic2NyaWJlKFxuICAgICAgICAgICAgcmVzID0+IHRoaXMuYXRDdXJyZW50VXNlckRhdGEgPSByZXMuanNvbigpLmRhdGEsXG4gICAgICAgICAgICBlcnJvciA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKGVycm9yLnN0YXR1cyA9PT0gNDAxICYmIHRoaXMuYXRPcHRpb25zLnNpZ25PdXRGYWlsZWRWYWxpZGF0ZSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnNpZ25PdXQoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICByZXR1cm4gb2JzZXJ2O1xuICAgIH1cblxuICAgIC8vIFVwZGF0ZSBwYXNzd29yZCByZXF1ZXN0XG4gICAgdXBkYXRlUGFzc3dvcmQodXBkYXRlUGFzc3dvcmREYXRhOiBVcGRhdGVQYXNzd29yZERhdGEpOiBPYnNlcnZhYmxlPFJlc3BvbnNlPiB7XG5cbiAgICAgICAgaWYgKHVwZGF0ZVBhc3N3b3JkRGF0YS51c2VyVHlwZSAhPSBudWxsKVxuICAgICAgICAgICAgdGhpcy5hdEN1cnJlbnRVc2VyVHlwZSA9IHRoaXMuZ2V0VXNlclR5cGVCeU5hbWUodXBkYXRlUGFzc3dvcmREYXRhLnVzZXJUeXBlKTtcblxuICAgICAgICBsZXQgYXJnczogYW55O1xuXG4gICAgICAgIGlmICh1cGRhdGVQYXNzd29yZERhdGEucGFzc3dvcmRDdXJyZW50ID09IG51bGwpIHtcbiAgICAgICAgICAgIGFyZ3MgPSB7XG4gICAgICAgICAgICAgICAgcGFzc3dvcmQ6ICAgICAgICAgICAgICAgdXBkYXRlUGFzc3dvcmREYXRhLnBhc3N3b3JkLFxuICAgICAgICAgICAgICAgIHBhc3N3b3JkX2NvbmZpcm1hdGlvbjogIHVwZGF0ZVBhc3N3b3JkRGF0YS5wYXNzd29yZENvbmZpcm1hdGlvblxuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgYXJncyA9IHtcbiAgICAgICAgICAgICAgICBjdXJyZW50X3Bhc3N3b3JkOiAgICAgICB1cGRhdGVQYXNzd29yZERhdGEucGFzc3dvcmRDdXJyZW50LFxuICAgICAgICAgICAgICAgIHBhc3N3b3JkOiAgICAgICAgICAgICAgIHVwZGF0ZVBhc3N3b3JkRGF0YS5wYXNzd29yZCxcbiAgICAgICAgICAgICAgICBwYXNzd29yZF9jb25maXJtYXRpb246ICB1cGRhdGVQYXNzd29yZERhdGEucGFzc3dvcmRDb25maXJtYXRpb25cbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodXBkYXRlUGFzc3dvcmREYXRhLnJlc2V0UGFzc3dvcmRUb2tlbikge1xuICAgICAgICAgICAgYXJncy5yZXNldF9wYXNzd29yZF90b2tlbiA9IHVwZGF0ZVBhc3N3b3JkRGF0YS5yZXNldFBhc3N3b3JkVG9rZW47XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgYm9keSA9IEpTT04uc3RyaW5naWZ5KGFyZ3MpO1xuICAgICAgICByZXR1cm4gdGhpcy5wdXQodGhpcy5nZXRVc2VyUGF0aCgpICsgdGhpcy5hdE9wdGlvbnMudXBkYXRlUGFzc3dvcmRQYXRoLCBib2R5KTtcbiAgICB9XG5cbiAgICAvLyBSZXNldCBwYXNzd29yZCByZXF1ZXN0XG4gICAgcmVzZXRQYXNzd29yZChyZXNldFBhc3N3b3JkRGF0YTogUmVzZXRQYXNzd29yZERhdGEpOiBPYnNlcnZhYmxlPFJlc3BvbnNlPiB7XG5cbiAgICAgICAgaWYgKHJlc2V0UGFzc3dvcmREYXRhLnVzZXJUeXBlID09IG51bGwpXG4gICAgICAgICAgICB0aGlzLmF0Q3VycmVudFVzZXJUeXBlID0gbnVsbDtcbiAgICAgICAgZWxzZVxuICAgICAgICAgICAgdGhpcy5hdEN1cnJlbnRVc2VyVHlwZSA9IHRoaXMuZ2V0VXNlclR5cGVCeU5hbWUocmVzZXRQYXNzd29yZERhdGEudXNlclR5cGUpO1xuXG4gICAgICAgIGxldCBib2R5ID0gSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICAgICAgZW1haWw6ICAgICAgICAgIHJlc2V0UGFzc3dvcmREYXRhLmVtYWlsLFxuICAgICAgICAgICAgcmVkaXJlY3RfdXJsOiAgIHRoaXMuYXRPcHRpb25zLnJlc2V0UGFzc3dvcmRDYWxsYmFja1xuICAgICAgICB9KTtcblxuICAgICAgICByZXR1cm4gdGhpcy5wb3N0KHRoaXMuZ2V0VXNlclBhdGgoKSArIHRoaXMuYXRPcHRpb25zLnJlc2V0UGFzc3dvcmRQYXRoLCBib2R5KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKlxuICAgICAqIEhUVFAgV3JhcHBlcnNcbiAgICAgKlxuICAgICAqL1xuXG4gICAgZ2V0KHVybDogc3RyaW5nLCBvcHRpb25zPzogUmVxdWVzdE9wdGlvbnNBcmdzKTogT2JzZXJ2YWJsZTxSZXNwb25zZT4ge1xuICAgICAgICByZXR1cm4gdGhpcy5yZXF1ZXN0KHRoaXMubWVyZ2VSZXF1ZXN0T3B0aW9uc0FyZ3Moe1xuICAgICAgICAgICAgdXJsOiAgICB0aGlzLmdldEFwaVBhdGgoKSArIHVybCxcbiAgICAgICAgICAgIG1ldGhvZDogUmVxdWVzdE1ldGhvZC5HZXRcbiAgICAgICAgfSwgb3B0aW9ucykpO1xuICAgIH1cblxuICAgIHBvc3QodXJsOiBzdHJpbmcsIGJvZHk6IGFueSwgb3B0aW9ucz86IFJlcXVlc3RPcHRpb25zQXJncyk6IE9ic2VydmFibGU8UmVzcG9uc2U+IHtcbiAgICAgICAgcmV0dXJuIHRoaXMucmVxdWVzdCh0aGlzLm1lcmdlUmVxdWVzdE9wdGlvbnNBcmdzKHtcbiAgICAgICAgICAgIHVybDogICAgdGhpcy5nZXRBcGlQYXRoKCkgKyB1cmwsXG4gICAgICAgICAgICBtZXRob2Q6IFJlcXVlc3RNZXRob2QuUG9zdCxcbiAgICAgICAgICAgIGJvZHk6ICAgYm9keVxuICAgICAgICB9LCBvcHRpb25zKSk7XG4gICAgfVxuXG4gICAgcHV0KHVybDogc3RyaW5nLCBib2R5OiBhbnksIG9wdGlvbnM/OiBSZXF1ZXN0T3B0aW9uc0FyZ3MpOiBPYnNlcnZhYmxlPFJlc3BvbnNlPiB7XG4gICAgICAgIHJldHVybiB0aGlzLnJlcXVlc3QodGhpcy5tZXJnZVJlcXVlc3RPcHRpb25zQXJncyh7XG4gICAgICAgICAgICB1cmw6ICAgIHRoaXMuZ2V0QXBpUGF0aCgpICsgdXJsLFxuICAgICAgICAgICAgbWV0aG9kOiBSZXF1ZXN0TWV0aG9kLlB1dCxcbiAgICAgICAgICAgIGJvZHk6ICAgYm9keVxuICAgICAgICB9LCBvcHRpb25zKSk7XG4gICAgfVxuXG4gICAgZGVsZXRlKHVybDogc3RyaW5nLCBvcHRpb25zPzogUmVxdWVzdE9wdGlvbnNBcmdzKTogT2JzZXJ2YWJsZTxSZXNwb25zZT4ge1xuICAgICAgICByZXR1cm4gdGhpcy5yZXF1ZXN0KHRoaXMubWVyZ2VSZXF1ZXN0T3B0aW9uc0FyZ3Moe1xuICAgICAgICAgICAgdXJsOiAgICB0aGlzLmdldEFwaVBhdGgoKSArIHVybCxcbiAgICAgICAgICAgIG1ldGhvZDogUmVxdWVzdE1ldGhvZC5EZWxldGVcbiAgICAgICAgfSwgb3B0aW9ucykpO1xuICAgIH1cblxuICAgIHBhdGNoKHVybDogc3RyaW5nLCBib2R5OiBhbnksIG9wdGlvbnM/OiBSZXF1ZXN0T3B0aW9uc0FyZ3MpOiBPYnNlcnZhYmxlPFJlc3BvbnNlPiB7XG4gICAgICAgIHJldHVybiB0aGlzLnJlcXVlc3QodGhpcy5tZXJnZVJlcXVlc3RPcHRpb25zQXJncyh7XG4gICAgICAgICAgICB1cmw6ICAgIHRoaXMuZ2V0QXBpUGF0aCgpICsgdXJsLFxuICAgICAgICAgICAgbWV0aG9kOiBSZXF1ZXN0TWV0aG9kLlBhdGNoLFxuICAgICAgICAgICAgYm9keTogICBib2R5XG4gICAgICAgIH0sIG9wdGlvbnMpKTtcbiAgICB9XG5cbiAgICBoZWFkKHBhdGg6IHN0cmluZywgb3B0aW9ucz86IFJlcXVlc3RPcHRpb25zQXJncyk6IE9ic2VydmFibGU8UmVzcG9uc2U+IHtcbiAgICAgICAgcmV0dXJuIHRoaXMucmVxdWVzdCh7XG4gICAgICAgICAgICBtZXRob2Q6IFJlcXVlc3RNZXRob2QuSGVhZCxcbiAgICAgICAgICAgIHVybDogICAgdGhpcy5nZXRBcGlQYXRoKCkgKyBwYXRoXG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIG9wdGlvbnModXJsOiBzdHJpbmcsIG9wdGlvbnM/OiBSZXF1ZXN0T3B0aW9uc0FyZ3MpOiBPYnNlcnZhYmxlPFJlc3BvbnNlPiB7XG4gICAgICAgIHJldHVybiB0aGlzLnJlcXVlc3QodGhpcy5tZXJnZVJlcXVlc3RPcHRpb25zQXJncyh7XG4gICAgICAgICAgICB1cmw6ICAgIHRoaXMuZ2V0QXBpUGF0aCgpICsgdXJsLFxuICAgICAgICAgICAgbWV0aG9kOiBSZXF1ZXN0TWV0aG9kLk9wdGlvbnNcbiAgICAgICAgfSwgb3B0aW9ucykpO1xuICAgIH1cblxuICAgIC8vIENvbnN0cnVjdCBhbmQgc2VuZCBIdHRwIHJlcXVlc3RcbiAgICByZXF1ZXN0KG9wdGlvbnM6IFJlcXVlc3RPcHRpb25zQXJncyk6IE9ic2VydmFibGU8UmVzcG9uc2U+IHtcblxuICAgICAgICBsZXQgYmFzZVJlcXVlc3RPcHRpb25zOiBSZXF1ZXN0T3B0aW9ucztcbiAgICAgICAgbGV0IGJhc2VIZWFkZXJzOiAgICAgICAgeyBba2V5OnN0cmluZ106IHN0cmluZzsgfSA9IHRoaXMuYXRPcHRpb25zLmdsb2JhbE9wdGlvbnMuaGVhZGVycztcblxuICAgICAgICAvLyBHZXQgYXV0aCBkYXRhIGZyb20gbG9jYWwgc3RvcmFnZVxuICAgICAgICB0aGlzLmdldEF1dGhEYXRhRnJvbVN0b3JhZ2UoKTtcbiAgICAgICAgXG4gICAgICAgIC8vIE1lcmdlIGF1dGggaGVhZGVycyB0byByZXF1ZXN0IGlmIHNldFxuICAgICAgICBpZiAodGhpcy5hdEN1cnJlbnRBdXRoRGF0YSAhPSBudWxsKSB7XG4gICAgICAgICAgICAoPGFueT5PYmplY3QpLmFzc2lnbihiYXNlSGVhZGVycywge1xuICAgICAgICAgICAgICAgICdhY2Nlc3MtdG9rZW4nOiB0aGlzLmF0Q3VycmVudEF1dGhEYXRhLmFjY2Vzc1Rva2VuLFxuICAgICAgICAgICAgICAgICdjbGllbnQnOiAgICAgICB0aGlzLmF0Q3VycmVudEF1dGhEYXRhLmNsaWVudCxcbiAgICAgICAgICAgICAgICAnZXhwaXJ5JzogICAgICAgdGhpcy5hdEN1cnJlbnRBdXRoRGF0YS5leHBpcnksXG4gICAgICAgICAgICAgICAgJ3Rva2VuLXR5cGUnOiAgIHRoaXMuYXRDdXJyZW50QXV0aERhdGEudG9rZW5UeXBlLFxuICAgICAgICAgICAgICAgICd1aWQnOiAgICAgICAgICB0aGlzLmF0Q3VycmVudEF1dGhEYXRhLnVpZFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICBiYXNlUmVxdWVzdE9wdGlvbnMgPSBuZXcgUmVxdWVzdE9wdGlvbnMoe1xuICAgICAgICAgICAgaGVhZGVyczogbmV3IEhlYWRlcnMoYmFzZUhlYWRlcnMpXG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIE1lcmdlIHN0YW5kYXJkIGFuZCBjdXN0b20gUmVxdWVzdE9wdGlvbnNcbiAgICAgICAgYmFzZVJlcXVlc3RPcHRpb25zID0gYmFzZVJlcXVlc3RPcHRpb25zLm1lcmdlKG9wdGlvbnMpO1xuXG4gICAgICAgIGxldCByZXNwb25zZSA9IHRoaXMuaHR0cC5yZXF1ZXN0KG5ldyBSZXF1ZXN0KGJhc2VSZXF1ZXN0T3B0aW9ucykpLnBpcGUoc2hhcmUoKSk7XG4gICAgICAgIHRoaXMuaGFuZGxlUmVzcG9uc2UocmVzcG9uc2UpO1xuXG4gICAgICAgIHJldHVybiByZXNwb25zZTtcbiAgICB9XG5cbiAgICBwcml2YXRlIG1lcmdlUmVxdWVzdE9wdGlvbnNBcmdzKG9wdGlvbnM6IFJlcXVlc3RPcHRpb25zQXJncywgYWRkT3B0aW9ucz86IFJlcXVlc3RPcHRpb25zQXJncyk6IFJlcXVlc3RPcHRpb25zQXJncyB7XG5cbiAgICAgICAgbGV0IHJldHVybk9wdGlvbnM6IFJlcXVlc3RPcHRpb25zQXJncyA9IG9wdGlvbnM7XG5cbiAgICAgICAgaWYgKG9wdGlvbnMpXG4gICAgICAgICAgICAoPGFueT5PYmplY3QpLmFzc2lnbihyZXR1cm5PcHRpb25zLCBhZGRPcHRpb25zKTtcblxuICAgICAgICByZXR1cm4gcmV0dXJuT3B0aW9ucztcbiAgICB9XG5cbiAgICAvLyBDaGVjayBpZiByZXNwb25zZSBpcyBjb21wbGV0ZSBhbmQgbmV3ZXIsIHRoZW4gdXBkYXRlIHN0b3JhZ2VcbiAgICBwcml2YXRlIGhhbmRsZVJlc3BvbnNlKHJlc3BvbnNlOiBPYnNlcnZhYmxlPFJlc3BvbnNlPik6IHZvaWQge1xuICAgICAgICByZXNwb25zZS5zdWJzY3JpYmUocmVzID0+IHtcbiAgICAgICAgICAgIHRoaXMuZ2V0QXV0aEhlYWRlcnNGcm9tUmVzcG9uc2UoPGFueT5yZXMpO1xuICAgICAgICB9LCBlcnJvciA9PiB7XG4gICAgICAgICAgICB0aGlzLmdldEF1dGhIZWFkZXJzRnJvbVJlc3BvbnNlKDxhbnk+ZXJyb3IpO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKlxuICAgICAqIEdldCBBdXRoIERhdGFcbiAgICAgKlxuICAgICAqL1xuXG4gICAgLy8gVHJ5IHRvIGxvYWQgYXV0aCBkYXRhXG4gICAgcHJpdmF0ZSB0cnlMb2FkQXV0aERhdGEoKTogdm9pZCB7XG5cbiAgICAgICAgbGV0IHVzZXJUeXBlID0gdGhpcy5nZXRVc2VyVHlwZUJ5TmFtZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgndXNlclR5cGUnKSk7XG5cbiAgICAgICAgaWYgKHVzZXJUeXBlKVxuICAgICAgICAgICAgdGhpcy5hdEN1cnJlbnRVc2VyVHlwZSA9IHVzZXJUeXBlO1xuXG4gICAgICAgIHRoaXMuZ2V0QXV0aERhdGFGcm9tU3RvcmFnZSgpO1xuXG4gICAgICAgIGlmKHRoaXMuYWN0aXZhdGVkUm91dGUpXG4gICAgICAgICAgICB0aGlzLmdldEF1dGhEYXRhRnJvbVBhcmFtcygpO1xuXG4gICAgICAgIGlmICh0aGlzLmF0Q3VycmVudEF1dGhEYXRhKVxuICAgICAgICAgICAgdGhpcy52YWxpZGF0ZVRva2VuKCk7XG4gICAgfVxuXG4gICAgLy8gUGFyc2UgQXV0aCBkYXRhIGZyb20gcmVzcG9uc2VcbiAgICBwcml2YXRlIGdldEF1dGhIZWFkZXJzRnJvbVJlc3BvbnNlKGRhdGE6IGFueSk6IHZvaWQge1xuICAgICAgICBsZXQgaGVhZGVycyA9IGRhdGEuaGVhZGVycztcblxuICAgICAgICBsZXQgYXV0aERhdGE6IEF1dGhEYXRhID0ge1xuICAgICAgICAgICAgYWNjZXNzVG9rZW46ICAgIGhlYWRlcnMuZ2V0KCdhY2Nlc3MtdG9rZW4nKSxcbiAgICAgICAgICAgIGNsaWVudDogICAgICAgICBoZWFkZXJzLmdldCgnY2xpZW50JyksXG4gICAgICAgICAgICBleHBpcnk6ICAgICAgICAgaGVhZGVycy5nZXQoJ2V4cGlyeScpLFxuICAgICAgICAgICAgdG9rZW5UeXBlOiAgICAgIGhlYWRlcnMuZ2V0KCd0b2tlbi10eXBlJyksXG4gICAgICAgICAgICB1aWQ6ICAgICAgICAgICAgaGVhZGVycy5nZXQoJ3VpZCcpXG4gICAgICAgIH07XG5cbiAgICAgICAgdGhpcy5zZXRBdXRoRGF0YShhdXRoRGF0YSk7XG4gICAgfVxuXG4gICAgLy8gUGFyc2UgQXV0aCBkYXRhIGZyb20gcG9zdCBtZXNzYWdlXG4gICAgcHJpdmF0ZSBnZXRBdXRoRGF0YUZyb21Qb3N0TWVzc2FnZShkYXRhOiBhbnkpOiB2b2lkIHtcbiAgICAgICAgbGV0IGF1dGhEYXRhOiBBdXRoRGF0YSA9IHtcbiAgICAgICAgICAgIGFjY2Vzc1Rva2VuOiAgICBkYXRhWydhdXRoX3Rva2VuJ10sXG4gICAgICAgICAgICBjbGllbnQ6ICAgICAgICAgZGF0YVsnY2xpZW50X2lkJ10sXG4gICAgICAgICAgICBleHBpcnk6ICAgICAgICAgZGF0YVsnZXhwaXJ5J10sXG4gICAgICAgICAgICB0b2tlblR5cGU6ICAgICAgJ0JlYXJlcicsXG4gICAgICAgICAgICB1aWQ6ICAgICAgICAgICAgZGF0YVsndWlkJ11cbiAgICAgICAgfTtcblxuICAgICAgICB0aGlzLnNldEF1dGhEYXRhKGF1dGhEYXRhKTtcbiAgICB9XG5cbiAgICAvLyBUcnkgdG8gZ2V0IGF1dGggZGF0YSBmcm9tIHN0b3JhZ2UuXG4gICAgcHJpdmF0ZSBnZXRBdXRoRGF0YUZyb21TdG9yYWdlKCk6IHZvaWQge1xuXG4gICAgICAgIGxldCBhdXRoRGF0YTogQXV0aERhdGEgPSB7XG4gICAgICAgICAgICBhY2Nlc3NUb2tlbjogICAgbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2FjY2Vzc1Rva2VuJyksXG4gICAgICAgICAgICBjbGllbnQ6ICAgICAgICAgbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2NsaWVudCcpLFxuICAgICAgICAgICAgZXhwaXJ5OiAgICAgICAgIGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdleHBpcnknKSxcbiAgICAgICAgICAgIHRva2VuVHlwZTogICAgICBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgndG9rZW5UeXBlJyksXG4gICAgICAgICAgICB1aWQ6ICAgICAgICAgICAgbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3VpZCcpXG4gICAgICAgIH07XG5cbiAgICAgICAgaWYgKHRoaXMuY2hlY2tBdXRoRGF0YShhdXRoRGF0YSkpXG4gICAgICAgICAgICB0aGlzLmF0Q3VycmVudEF1dGhEYXRhID0gYXV0aERhdGE7XG4gICAgfVxuXG4gICAgLy8gVHJ5IHRvIGdldCBhdXRoIGRhdGEgZnJvbSB1cmwgcGFyYW1ldGVycy5cbiAgICBwcml2YXRlIGdldEF1dGhEYXRhRnJvbVBhcmFtcygpOiB2b2lkIHtcbiAgICAgICAgaWYodGhpcy5hY3RpdmF0ZWRSb3V0ZS5xdWVyeVBhcmFtcykgLy8gRml4IGZvciBUZXN0aW5nLCBuZWVkcyB0byBiZSByZW1vdmVkIGxhdGVyXG4gICAgICAgICAgICB0aGlzLmFjdGl2YXRlZFJvdXRlLnF1ZXJ5UGFyYW1zLnN1YnNjcmliZShxdWVyeVBhcmFtcyA9PiB7XG4gICAgICAgICAgICAgICAgbGV0IGF1dGhEYXRhOiBBdXRoRGF0YSA9IHtcbiAgICAgICAgICAgICAgICAgICAgYWNjZXNzVG9rZW46ICAgIHF1ZXJ5UGFyYW1zWyd0b2tlbiddIHx8IHF1ZXJ5UGFyYW1zWydhdXRoX3Rva2VuJ10sXG4gICAgICAgICAgICAgICAgICAgIGNsaWVudDogICAgICAgICBxdWVyeVBhcmFtc1snY2xpZW50X2lkJ10sXG4gICAgICAgICAgICAgICAgICAgIGV4cGlyeTogICAgICAgICBxdWVyeVBhcmFtc1snZXhwaXJ5J10sXG4gICAgICAgICAgICAgICAgICAgIHRva2VuVHlwZTogICAgICAnQmVhcmVyJyxcbiAgICAgICAgICAgICAgICAgICAgdWlkOiAgICAgICAgICAgIHF1ZXJ5UGFyYW1zWyd1aWQnXVxuICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICBpZiAodGhpcy5jaGVja0F1dGhEYXRhKGF1dGhEYXRhKSlcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5hdEN1cnJlbnRBdXRoRGF0YSA9IGF1dGhEYXRhO1xuICAgICAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICpcbiAgICAgKiBTZXQgQXV0aCBEYXRhXG4gICAgICpcbiAgICAgKi9cblxuICAgIC8vIFdyaXRlIGF1dGggZGF0YSB0byBzdG9yYWdlXG4gICAgcHJpdmF0ZSBzZXRBdXRoRGF0YShhdXRoRGF0YTogQXV0aERhdGEpOiB2b2lkIHtcblxuICAgICAgICBpZiAodGhpcy5jaGVja0F1dGhEYXRhKGF1dGhEYXRhKSkge1xuXG4gICAgICAgICAgICB0aGlzLmF0Q3VycmVudEF1dGhEYXRhID0gYXV0aERhdGE7XG5cbiAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdhY2Nlc3NUb2tlbicsIGF1dGhEYXRhLmFjY2Vzc1Rva2VuKTtcbiAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdjbGllbnQnLCBhdXRoRGF0YS5jbGllbnQpO1xuICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ2V4cGlyeScsIGF1dGhEYXRhLmV4cGlyeSk7XG4gICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgndG9rZW5UeXBlJywgYXV0aERhdGEudG9rZW5UeXBlKTtcbiAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCd1aWQnLCBhdXRoRGF0YS51aWQpO1xuXG4gICAgICAgICAgICBpZiAodGhpcy5hdEN1cnJlbnRVc2VyVHlwZSAhPSBudWxsKVxuICAgICAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCd1c2VyVHlwZScsIHRoaXMuYXRDdXJyZW50VXNlclR5cGUubmFtZSk7XG5cbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqXG4gICAgICogVmFsaWRhdGUgQXV0aCBEYXRhXG4gICAgICpcbiAgICAgKi9cblxuICAgIC8vIENoZWNrIGlmIGF1dGggZGF0YSBjb21wbGV0ZSBhbmQgaWYgcmVzcG9uc2UgdG9rZW4gaXMgbmV3ZXJcbiAgICBwcml2YXRlIGNoZWNrQXV0aERhdGEoYXV0aERhdGE6IEF1dGhEYXRhKTogYm9vbGVhbiB7XG5cbiAgICAgICAgaWYgKFxuICAgICAgICAgICAgYXV0aERhdGEuYWNjZXNzVG9rZW4gIT0gbnVsbCAmJlxuICAgICAgICAgICAgYXV0aERhdGEuY2xpZW50ICE9IG51bGwgJiZcbiAgICAgICAgICAgIGF1dGhEYXRhLmV4cGlyeSAhPSBudWxsICYmXG4gICAgICAgICAgICBhdXRoRGF0YS50b2tlblR5cGUgIT0gbnVsbCAmJlxuICAgICAgICAgICAgYXV0aERhdGEudWlkICE9IG51bGxcbiAgICAgICAgKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5hdEN1cnJlbnRBdXRoRGF0YSAhPSBudWxsKVxuICAgICAgICAgICAgICAgIHJldHVybiBhdXRoRGF0YS5leHBpcnkgPj0gdGhpcy5hdEN1cnJlbnRBdXRoRGF0YS5leHBpcnk7XG4gICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKlxuICAgICAqIENvbnN0cnVjdCBQYXRocyAvIFVybHNcbiAgICAgKlxuICAgICAqL1xuXG4gICAgcHJpdmF0ZSBnZXRVc2VyUGF0aCgpOiBzdHJpbmcge1xuICAgICAgICBpZiAodGhpcy5hdEN1cnJlbnRVc2VyVHlwZSA9PSBudWxsKVxuICAgICAgICAgICAgcmV0dXJuICcnO1xuICAgICAgICBlbHNlXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5hdEN1cnJlbnRVc2VyVHlwZS5wYXRoICsgJy8nO1xuICAgIH1cblxuICAgIHByaXZhdGUgZ2V0QXBpUGF0aCgpOiBzdHJpbmcge1xuICAgICAgICBsZXQgY29uc3RydWN0ZWRQYXRoID0gJyc7XG5cbiAgICAgICAgaWYgKHRoaXMuYXRPcHRpb25zLmFwaUJhc2UgIT0gbnVsbClcbiAgICAgICAgICAgIGNvbnN0cnVjdGVkUGF0aCArPSB0aGlzLmF0T3B0aW9ucy5hcGlCYXNlICsgJy8nO1xuXG4gICAgICAgIGlmICh0aGlzLmF0T3B0aW9ucy5hcGlQYXRoICE9IG51bGwpXG4gICAgICAgICAgICBjb25zdHJ1Y3RlZFBhdGggKz0gdGhpcy5hdE9wdGlvbnMuYXBpUGF0aCArICcvJztcblxuICAgICAgICByZXR1cm4gY29uc3RydWN0ZWRQYXRoO1xuICAgIH1cblxuICAgIHByaXZhdGUgZ2V0T0F1dGhQYXRoKG9BdXRoVHlwZTogc3RyaW5nKTogc3RyaW5nIHtcbiAgICAgICAgbGV0IG9BdXRoUGF0aDogc3RyaW5nO1xuXG4gICAgICAgIG9BdXRoUGF0aCA9IHRoaXMuYXRPcHRpb25zLm9BdXRoUGF0aHNbb0F1dGhUeXBlXTtcblxuICAgICAgICBpZiAob0F1dGhQYXRoID09IG51bGwpXG4gICAgICAgICAgICBvQXV0aFBhdGggPSBgL2F1dGgvJHtvQXV0aFR5cGV9YDtcblxuICAgICAgICByZXR1cm4gb0F1dGhQYXRoO1xuICAgIH1cblxuICAgIHByaXZhdGUgZ2V0T0F1dGhVcmwob0F1dGhQYXRoOiBzdHJpbmcsIGNhbGxiYWNrVXJsOiBzdHJpbmcsIHdpbmRvd1R5cGU6IHN0cmluZyk6IHN0cmluZyB7XG4gICAgICAgIGxldCB1cmw6IHN0cmluZztcblxuICAgICAgICB1cmwgPSAgIGAke3RoaXMuYXRPcHRpb25zLm9BdXRoQmFzZX0vJHtvQXV0aFBhdGh9YDtcbiAgICAgICAgdXJsICs9ICBgP29tbmlhdXRoX3dpbmRvd190eXBlPSR7d2luZG93VHlwZX1gO1xuICAgICAgICB1cmwgKz0gIGAmYXV0aF9vcmlnaW5fdXJsPSR7ZW5jb2RlVVJJQ29tcG9uZW50KGNhbGxiYWNrVXJsKX1gO1xuXG4gICAgICAgIGlmICh0aGlzLmF0Q3VycmVudFVzZXJUeXBlICE9IG51bGwpXG4gICAgICAgICAgICB1cmwgKz0gYCZyZXNvdXJjZV9jbGFzcz0ke3RoaXMuYXRDdXJyZW50VXNlclR5cGUubmFtZX1gO1xuXG4gICAgICAgIHJldHVybiB1cmw7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICpcbiAgICAgKiBPQXV0aFxuICAgICAqXG4gICAgICovXG5cbiAgICBwcml2YXRlIHJlcXVlc3RDcmVkZW50aWFsc1ZpYVBvc3RNZXNzYWdlKGF1dGhXaW5kb3c6IGFueSk6IE9ic2VydmFibGU8YW55PiB7XG4gICAgICAgIGxldCBwb2xsZXJPYnNlcnYgPSBpbnRlcnZhbCg1MDApO1xuXG4gICAgICAgIGxldCByZXNwb25zZU9ic2VydiA9IGZyb21FdmVudCh3aW5kb3csICdtZXNzYWdlJykucGlwZShcbiAgICAgICAgICAgIHBsdWNrKCdkYXRhJyksXG4gICAgICAgICAgICBmaWx0ZXIodGhpcy5vQXV0aFdpbmRvd1Jlc3BvbnNlRmlsdGVyKVxuICAgICAgICApO1xuXG4gICAgICAgIGxldCByZXNwb25zZVN1YnNjcmlwdGlvbiA9IHJlc3BvbnNlT2JzZXJ2LnN1YnNjcmliZShcbiAgICAgICAgICAgIHRoaXMuZ2V0QXV0aERhdGFGcm9tUG9zdE1lc3NhZ2UuYmluZCh0aGlzKVxuICAgICAgICApO1xuXG4gICAgICAgIGxldCBwb2xsZXJTdWJzY3JpcHRpb24gPSBwb2xsZXJPYnNlcnYuc3Vic2NyaWJlKCgpID0+IHtcbiAgICAgICAgICAgIGlmIChhdXRoV2luZG93LmNsb3NlZClcbiAgICAgICAgICAgICAgICBwb2xsZXJTdWJzY3JpcHRpb24udW5zdWJzY3JpYmUoKTtcbiAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICBhdXRoV2luZG93LnBvc3RNZXNzYWdlKCdyZXF1ZXN0Q3JlZGVudGlhbHMnLCAnKicpO1xuICAgICAgICB9KTtcblxuICAgICAgICByZXR1cm4gcmVzcG9uc2VPYnNlcnY7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBvQXV0aFdpbmRvd1Jlc3BvbnNlRmlsdGVyKGRhdGE6IGFueSk6IGFueSB7XG4gICAgICAgIGlmKGRhdGEubWVzc2FnZSA9PSAnZGVsaXZlckNyZWRlbnRpYWxzJyB8fCBkYXRhLm1lc3NhZ2UgPT0gJ2F1dGhGYWlsdXJlJylcbiAgICAgICAgICAgIHJldHVybiBkYXRhO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqXG4gICAgICogVXRpbGl0aWVzXG4gICAgICpcbiAgICAgKi9cblxuICAgIC8vIE1hdGNoIHVzZXIgY29uZmlnIGJ5IHVzZXIgY29uZmlnIG5hbWVcbiAgICBwcml2YXRlIGdldFVzZXJUeXBlQnlOYW1lKG5hbWU6IHN0cmluZyk6IFVzZXJUeXBlIHtcbiAgICAgICAgaWYgKG5hbWUgPT0gbnVsbCB8fCB0aGlzLmF0T3B0aW9ucy51c2VyVHlwZXMgPT0gbnVsbClcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuXG4gICAgICAgIHJldHVybiB0aGlzLmF0T3B0aW9ucy51c2VyVHlwZXMuZmluZChcbiAgICAgICAgICAgIHVzZXJUeXBlID0+IHVzZXJUeXBlLm5hbWUgPT09IG5hbWVcbiAgICAgICAgKTtcbiAgICB9XG59XG4iLCJpbXBvcnQgeyBDb21wb25lbnQsIElucHV0IH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQgeyBBbmd1bGFyMlRva2VuU2VydmljZSB9IGZyb20gJy4uL2FuZ3VsYXIyLXRva2VuLnNlcnZpY2UnO1xuXG5AQ29tcG9uZW50KHtcbiAgICBzZWxlY3RvcjogICAnYTJ0LXVpJyxcbiAgICB0ZW1wbGF0ZTogYFxuICAgICAgICA8ZGl2IGNsYXNzPVwiYTJ0LXdyYXBwZXJcIj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJhMnQtY29udGFpbmVyXCI+XG4gICAgICAgICAgICAgICAgPHJvdXRlci1vdXRsZXQ+PC9yb3V0ZXItb3V0bGV0PlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvZGl2PlxuICAgIGAsXG4gICAgc3R5bGVzOiBbYFxuICAgICAgICAuYTJ0LXdyYXBwZXIge1xuICAgICAgICAgICAgd2lkdGg6IDEwMCU7XG4gICAgICAgICAgICBoZWlnaHQ6IDEwMHZoO1xuICAgICAgICAgICAgbWluLWhlaWdodDogNTAwcHg7XG5cbiAgICAgICAgICAgIHBhZGRpbmctdG9wOiAxMDBweDtcblxuICAgICAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgICAgIGp1c3RpZnktY29udGVudDogY2VudGVyO1xuXG4gICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjMzI3MGEwO1xuICAgICAgICB9XG5cbiAgICAgICAgLmEydC1sb2dvIHtcbiAgICAgICAgICAgIHRleHQtYWxpZ246IGNlbnRlcjtcbiAgICAgICAgICAgIGNvbG9yOiB3aGl0ZTtcbiAgICAgICAgICAgIGZvbnQtc2l6ZTogMzBweDtcbiAgICAgICAgfVxuXG4gICAgICAgIC5hMnQtY29udGFpbmVyIHtcbiAgICAgICAgICAgIHdpZHRoOiA0MDBweDtcbiAgICAgICAgfVxuICAgIGBdXG59KVxuZXhwb3J0IGNsYXNzIEEydFVpQ29tcG9uZW50IHtcbiAgICBjb25zdHJ1Y3RvcigpIHsgfVxufVxuIiwiaW1wb3J0IHsgVmFsaWRhdG9ycyB9IGZyb20gJ0Bhbmd1bGFyL2Zvcm1zJztcblxuZXhwb3J0IGNsYXNzIEJhc2VGaWVsZHtcbiAgICB2YWx1ZTogc3RyaW5nO1xuICAgIGtleTogc3RyaW5nO1xuICAgIGxhYmVsOiBzdHJpbmc7XG4gICAgdHlwZTogc3RyaW5nO1xuICAgIHZhbGlkYXRvcnM6IGFueVtdO1xuXG4gICAgY29uc3RydWN0b3Iob3B0aW9uczoge1xuICAgICAgICB2YWx1ZT86IHN0cmluZyxcbiAgICAgICAga2V5Pzogc3RyaW5nLFxuICAgICAgICBsYWJlbD86IHN0cmluZyxcbiAgICAgICAgdHlwZT86IHN0cmluZyxcbiAgICAgICAgdmFsaWRhdG9ycz86IGFueVtdLFxuICAgIH0gPSB7fSkge1xuICAgICAgICB0aGlzLnZhbHVlID0gb3B0aW9ucy52YWx1ZTtcbiAgICAgICAgdGhpcy5rZXkgPSBvcHRpb25zLmtleSB8fCAnJztcbiAgICAgICAgdGhpcy5sYWJlbCA9IG9wdGlvbnMubGFiZWwgfHwgJyc7XG4gICAgICAgIHRoaXMudmFsaWRhdG9ycyA9IG9wdGlvbnMudmFsaWRhdG9ycyA9PT0gdW5kZWZpbmVkID8gW10gOiBvcHRpb25zLnZhbGlkYXRvcnM7XG4gICAgICAgIHRoaXMudHlwZSA9IG9wdGlvbnMudHlwZSB8fCAnJztcbiAgICB9XG59XG5cbmV4cG9ydCBjb25zdCBTSUdOX0lOX0ZPUk06IEJhc2VGaWVsZFtdID0gW1xuICAgIG5ldyBCYXNlRmllbGQoe1xuICAgICAgICBrZXk6ICdlbWFpbCcsXG4gICAgICAgIGxhYmVsOiAnRW1haWwnLFxuICAgICAgICB0eXBlOiAndGV4dCcsXG4gICAgICAgIHZhbGlkYXRvcnM6IFtcbiAgICAgICAgICAgIFZhbGlkYXRvcnMucmVxdWlyZWQsXG4gICAgICAgICAgICBWYWxpZGF0b3JzLm1pbkxlbmd0aCg4KVxuICAgICAgICBdXG4gICAgfSksXG4gICAgbmV3IEJhc2VGaWVsZCh7XG4gICAgICAgIGtleTogJ3Bhc3N3b3JkJyxcbiAgICAgICAgbGFiZWw6ICdQYXNzd29yZCcsXG4gICAgICAgIHR5cGU6ICdwYXNzd29yZCcsXG4gICAgICAgIHZhbGlkYXRvcnM6IFtcbiAgICAgICAgICAgIFZhbGlkYXRvcnMucmVxdWlyZWQsXG4gICAgICAgICAgICBWYWxpZGF0b3JzLm1pbkxlbmd0aCg4KVxuICAgICAgICBdXG4gICAgfSlcbl07XG5cbmV4cG9ydCBjb25zdCBTSUdOX1VQX0ZPUk06IEJhc2VGaWVsZFtdID0gW1xuICAgIG5ldyBCYXNlRmllbGQoe1xuICAgICAgICBrZXk6ICdlbWFpbCcsXG4gICAgICAgIGxhYmVsOiAnRW1haWwnLFxuICAgICAgICB0eXBlOiAndGV4dCcsXG4gICAgICAgIHZhbGlkYXRvcnM6IFtcbiAgICAgICAgICAgIFZhbGlkYXRvcnMucmVxdWlyZWQsXG4gICAgICAgICAgICBWYWxpZGF0b3JzLm1pbkxlbmd0aCg4KVxuICAgICAgICBdXG4gICAgfSksXG4gICAgbmV3IEJhc2VGaWVsZCh7XG4gICAgICAgIGtleTogJ3Bhc3N3b3JkJyxcbiAgICAgICAgbGFiZWw6ICdQYXNzd29yZCcsXG4gICAgICAgIHR5cGU6ICdwYXNzd29yZCcsXG4gICAgICAgIHZhbGlkYXRvcnM6IFtcbiAgICAgICAgICAgIFZhbGlkYXRvcnMucmVxdWlyZWQsXG4gICAgICAgICAgICBWYWxpZGF0b3JzLm1pbkxlbmd0aCg4KVxuICAgICAgICBdXG4gICAgfSksXG4gICAgbmV3IEJhc2VGaWVsZCh7XG4gICAgICAgIGtleTogJ3Bhc3N3b3JkQ29uZmlybWF0aW9uJyxcbiAgICAgICAgbGFiZWw6ICdQYXNzd29yZCBDb25maXJtYXRpb24nLFxuICAgICAgICB0eXBlOiAncGFzc3dvcmQnLFxuICAgICAgICB2YWxpZGF0b3JzOiBbXG4gICAgICAgICAgICBWYWxpZGF0b3JzLnJlcXVpcmVkLFxuICAgICAgICAgICAgVmFsaWRhdG9ycy5taW5MZW5ndGgoOClcbiAgICAgICAgXVxuICAgIH0pXG5dO1xuXG5leHBvcnQgY29uc3QgUkVTRVRfUEFTU1dPUkRfRk9STTogQmFzZUZpZWxkW10gPSBbXG4gICAgbmV3IEJhc2VGaWVsZCh7XG4gICAgICAgIGtleTogJ2VtYWlsJyxcbiAgICAgICAgbGFiZWw6ICdFbWFpbCcsXG4gICAgICAgIHR5cGU6ICd0ZXh0JyxcbiAgICAgICAgdmFsaWRhdG9yczogW1xuICAgICAgICAgICAgVmFsaWRhdG9ycy5yZXF1aXJlZCxcbiAgICAgICAgICAgIFZhbGlkYXRvcnMubWluTGVuZ3RoKDgpXG4gICAgICAgIF1cbiAgICB9KVxuXTtcblxuZXhwb3J0IGNvbnN0IFVQREFURV9QQVNTV09SRF9GT1JNOiBCYXNlRmllbGRbXSA9IFtcbiAgICBuZXcgQmFzZUZpZWxkKHtcbiAgICAgICAga2V5OiAncGFzc3dvcmQnLFxuICAgICAgICBsYWJlbDogJ1Bhc3N3b3JkJyxcbiAgICAgICAgdHlwZTogJ3Bhc3N3b3JkJyxcbiAgICAgICAgdmFsaWRhdG9yczogW1xuICAgICAgICAgICAgVmFsaWRhdG9ycy5yZXF1aXJlZCxcbiAgICAgICAgICAgIFZhbGlkYXRvcnMubWluTGVuZ3RoKDgpXG4gICAgICAgIF1cbiAgICB9KSxcbiAgICBuZXcgQmFzZUZpZWxkKHtcbiAgICAgICAga2V5OiAncGFzc3dvcmRDb25maXJtYXRpb24nLFxuICAgICAgICBsYWJlbDogJ1Bhc3N3b3JkIENvbmZpcm1hdGlvbicsXG4gICAgICAgIHR5cGU6ICdwYXNzd29yZCcsXG4gICAgICAgIHZhbGlkYXRvcnM6IFtcbiAgICAgICAgICAgIFZhbGlkYXRvcnMucmVxdWlyZWQsXG4gICAgICAgICAgICBWYWxpZGF0b3JzLm1pbkxlbmd0aCg4KVxuICAgICAgICBdXG4gICAgfSksXG4gICAgbmV3IEJhc2VGaWVsZCh7XG4gICAgICAgIGtleTogJ3Bhc3N3b3JkQ3VycmVudCcsXG4gICAgICAgIGxhYmVsOiAnT2xkIFBhc3N3b3JkJyxcbiAgICAgICAgdHlwZTogJ3Bhc3N3b3JkJyxcbiAgICAgICAgdmFsaWRhdG9yczogW1xuICAgICAgICAgICAgVmFsaWRhdG9ycy5yZXF1aXJlZCxcbiAgICAgICAgICAgIFZhbGlkYXRvcnMubWluTGVuZ3RoKDgpXG4gICAgICAgIF1cbiAgICB9KVxuXTsiLCJpbXBvcnQgeyBDb21wb25lbnQsIElucHV0IH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQgeyBSb3V0ZXIgfSBmcm9tICdAYW5ndWxhci9yb3V0ZXInO1xuaW1wb3J0IHsgQW5ndWxhcjJUb2tlblNlcnZpY2UgfSBmcm9tICcuLi8uLi9hbmd1bGFyMi10b2tlbi5zZXJ2aWNlJztcblxuaW1wb3J0IHsgU2lnbkluRGF0YSB9IGZyb20gJy4uLy4uL2FuZ3VsYXIyLXRva2VuLm1vZGVsJztcbmltcG9ydCB7IEEydEZvcm1TZXJ2aWNlIH0gZnJvbSAnLi4vYTJ0LXNoYXJlZC9hMnQtZm9ybS9hMnQtZm9ybS5zZXJ2aWNlJztcbmltcG9ydCB7IFNJR05fSU5fRk9STSB9IGZyb20gJy4uL2EydC11aS5mb3Jtcyc7XG5cbkBDb21wb25lbnQoe1xuICAgIHNlbGVjdG9yOiAgICdhMnQtc2lnbi1pbicsXG4gICAgcHJvdmlkZXJzOiAgW0EydEZvcm1TZXJ2aWNlXSxcbiAgICB0ZW1wbGF0ZTogYFxuICAgICAgICA8YTJ0LWhlYWRsaW5lPlNpZ24gSW48L2EydC1oZWFkbGluZT5cbiAgICAgICAgPGEydC1lcnJvciBbZXJyb3JzXT1cIl9lcnJvcnNcIj48L2EydC1lcnJvcj5cbiAgICAgICAgPGEydC1mb3JtPlNpZ24gSW48L2EydC1mb3JtPlxuICAgICAgICA8YTJ0LWxpbmtzIGNhc2U9XCJzaWduLWluXCI+PC9hMnQtbGlua3M+XG4gICAgYFxufSlcbmV4cG9ydCBjbGFzcyBBMnRTaWduSW5Db21wb25lbnQge1xuXG4gICAgX2Vycm9yczogc3RyaW5nW107XG5cbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgcHVibGljIF9mb3JtU2VydmljZTogQTJ0Rm9ybVNlcnZpY2UsXG4gICAgICAgIHB1YmxpYyBfc2Vzc2lvblNlcnZpY2U6IEFuZ3VsYXIyVG9rZW5TZXJ2aWNlLFxuICAgICAgICBwdWJsaWMgX3JvdXRlcjogUm91dGVyXG4gICAgKSB7XG4gICAgICAgIHRoaXMuX2Zvcm1TZXJ2aWNlLmluaXRGb3JtKFNJR05fSU5fRk9STSk7XG4gICAgICAgIHRoaXMuX2Zvcm1TZXJ2aWNlLnN1Ym1pdCQuc3Vic2NyaWJlKFxuICAgICAgICAgICAgKGRhdGE6IFNpZ25JbkRhdGEpID0+IHRoaXMuX3Nlc3Npb25TZXJ2aWNlLnNpZ25JbihkYXRhKS5zdWJzY3JpYmUoXG4gICAgICAgICAgICAgICAgKHJlczogYW55KSA9PiAgIHRoaXMuX2hhbmRsZVN1Y2Nlc3MocmVzKSxcbiAgICAgICAgICAgICAgICAoZXJyb3I6IGFueSkgPT4gdGhpcy5faGFuZGxlRXJyb3IoZXJyb3IpXG4gICAgICAgICAgICApXG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBfaGFuZGxlU3VjY2VzcyhkYXRhOiBhbnkpIHtcbiAgICAgICAgdGhpcy5fZXJyb3JzID0gbnVsbDtcbiAgICAgICAgdGhpcy5fZm9ybVNlcnZpY2UudW5sb2NrU3VibWl0KCk7XG4gICAgICAgIHRoaXMuX3JvdXRlci5uYXZpZ2F0ZShbJ3Jlc3RyaWN0ZWQnXSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBfaGFuZGxlRXJyb3IoZXJyb3I6IGFueSkge1xuICAgICAgICB0aGlzLl9lcnJvcnMgPSBlcnJvci5qc29uKCkuZXJyb3JzO1xuICAgICAgICB0aGlzLl9mb3JtU2VydmljZS51bmxvY2tTdWJtaXQoKTtcbiAgICB9XG59XG4iLCJpbXBvcnQgeyBDb21wb25lbnQsIElucHV0IH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQgeyBSb3V0ZXIgfSBmcm9tICdAYW5ndWxhci9yb3V0ZXInO1xuaW1wb3J0IHsgQW5ndWxhcjJUb2tlblNlcnZpY2UgfSBmcm9tICcuLi8uLi9hbmd1bGFyMi10b2tlbi5zZXJ2aWNlJztcblxuaW1wb3J0IHsgUmVnaXN0ZXJEYXRhIH0gZnJvbSAnLi4vLi4vYW5ndWxhcjItdG9rZW4ubW9kZWwnO1xuaW1wb3J0IHsgQTJ0Rm9ybVNlcnZpY2UgfSBmcm9tICcuLi9hMnQtc2hhcmVkL2EydC1mb3JtL2EydC1mb3JtLnNlcnZpY2UnO1xuaW1wb3J0IHsgU0lHTl9VUF9GT1JNIH0gZnJvbSAnLi4vYTJ0LXVpLmZvcm1zJztcblxuQENvbXBvbmVudCh7XG4gICAgc2VsZWN0b3I6ICAgICAgICdhMnQtc2lnbi11cCcsXG4gICAgcHJvdmlkZXJzOiAgICAgIFtBMnRGb3JtU2VydmljZV0sXG4gICAgdGVtcGxhdGU6IGBcbiAgICAgICAgPGEydC1oZWFkbGluZT5TaWduIFVwPC9hMnQtaGVhZGxpbmU+XG4gICAgICAgIDxhMnQtZXJyb3IgW2Vycm9yc109XCJfZXJyb3JzXCI+PC9hMnQtZXJyb3I+XG4gICAgICAgIDxhMnQtZm9ybT5TaWduIFVwPC9hMnQtZm9ybT5cbiAgICAgICAgPGEydC1saW5rcyBjYXNlPVwic2lnbi11cFwiPjwvYTJ0LWxpbmtzPlxuICAgIGBcbn0pXG5leHBvcnQgY2xhc3MgQTJ0U2lnblVwQ29tcG9uZW50IHtcblxuICAgIF9lcnJvcnM6IHN0cmluZ1tdO1xuXG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIHB1YmxpYyBfZm9ybVNlcnZpY2U6IEEydEZvcm1TZXJ2aWNlLFxuICAgICAgICBwdWJsaWMgX3Nlc3Npb25TZXJ2aWNlOiBBbmd1bGFyMlRva2VuU2VydmljZSxcbiAgICAgICAgcHVibGljIF9yb3V0ZXI6IFJvdXRlclxuICAgICkge1xuICAgICAgICB0aGlzLl9mb3JtU2VydmljZS5pbml0Rm9ybShTSUdOX1VQX0ZPUk0pO1xuICAgICAgICB0aGlzLl9mb3JtU2VydmljZS5zdWJtaXQkLnN1YnNjcmliZShcbiAgICAgICAgICAgIChkYXRhOiBSZWdpc3RlckRhdGEpID0+IHRoaXMuX3Nlc3Npb25TZXJ2aWNlLnJlZ2lzdGVyQWNjb3VudChkYXRhKS5zdWJzY3JpYmUoXG4gICAgICAgICAgICAgICAgcmVzID0+ICAgICAgdGhpcy5faGFuZGxlU3VjY2VzcyhyZXMpLFxuICAgICAgICAgICAgICAgIGVycm9yID0+ICAgIHRoaXMuX2hhbmRsZUVycm9yKGVycm9yKVxuICAgICAgICAgICAgKVxuICAgICAgICApO1xuICAgIH1cblxuICAgIHByaXZhdGUgX2hhbmRsZVN1Y2Nlc3MoZGF0YTogYW55KSB7XG4gICAgICAgIHRoaXMuX2Vycm9ycyA9IG51bGw7XG4gICAgICAgIHRoaXMuX2Zvcm1TZXJ2aWNlLnVubG9ja1N1Ym1pdCgpO1xuICAgICAgICB0aGlzLl9yb3V0ZXIubmF2aWdhdGUoWydyZXN0cmljdGVkJ10pO1xuICAgIH1cblxuICAgIHByaXZhdGUgX2hhbmRsZUVycm9yKGVycm9yOiBhbnkpIHtcbiAgICAgICAgdGhpcy5fZXJyb3JzID0gZXJyb3IuanNvbigpLmVycm9ycy5mdWxsX21lc3NhZ2VzO1xuICAgICAgICB0aGlzLl9mb3JtU2VydmljZS51bmxvY2tTdWJtaXQoKTtcbiAgICB9XG59XG4iLCJpbXBvcnQgeyBDb21wb25lbnQsIElucHV0IH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQgeyBBbmd1bGFyMlRva2VuU2VydmljZSB9IGZyb20gJy4uLy4uL2FuZ3VsYXIyLXRva2VuLnNlcnZpY2UnO1xuXG5pbXBvcnQgeyBSZXNldFBhc3N3b3JkRGF0YSB9IGZyb20gJy4uLy4uL2FuZ3VsYXIyLXRva2VuLm1vZGVsJztcbmltcG9ydCB7IEEydEZvcm1TZXJ2aWNlIH0gZnJvbSAnLi4vYTJ0LXNoYXJlZC9hMnQtZm9ybS9hMnQtZm9ybS5zZXJ2aWNlJztcbmltcG9ydCB7IFJFU0VUX1BBU1NXT1JEX0ZPUk0gfSBmcm9tICcuLi9hMnQtdWkuZm9ybXMnO1xuXG5AQ29tcG9uZW50KHtcbiAgICBzZWxlY3RvcjogICAgICAgJ2EydC1yZXNldC1wYXNzd29yZCcsXG4gICAgcHJvdmlkZXJzOiAgICAgIFtBMnRGb3JtU2VydmljZV0sXG4gICAgdGVtcGxhdGU6IGBcbiAgICAgICAgPGEydC1oZWFkbGluZSAqbmdJZj1cIiFfZW1haWxTZW5kXCI+UmVzZXQgeW91ciBQYXNzd29yZDwvYTJ0LWhlYWRsaW5lPlxuICAgICAgICA8YTJ0LWZvcm0gKm5nSWY9XCIhX2VtYWlsU2VuZFwiPlJlc2V0IFBhc3N3b3JkPC9hMnQtZm9ybT5cbiAgICAgICAgPHAgY2xhc3M9XCJlbWFpbC1zZW5kLXRleHRcIiAqbmdJZj1cIl9lbWFpbFNlbmRcIj5cbiAgICAgICAgICAgIElmIHRoZSBlbnRlcmVkIGVtYWlsIGlzIHJlZ2lzdGVyZWQgd2Ugd2lsbCBzZW5kIGluc3RydWN0aW9uIG9uIGhvdyB0byByZXNldCB5b3VyIHBhc3N3b3JkLlxuICAgICAgICA8L3A+XG4gICAgICAgIDxhMnQtbGlua3MgKm5nSWY9XCIhX2VtYWlsU2VuZFwiIGNhc2U9XCJyZXNldC1wYXNzd29yZFwiPjwvYTJ0LWxpbmtzPlxuICAgIGAsXG4gICAgc3R5bGVzOiBbYFxuICAgICAgICAuZW1haWwtc2VuZC10ZXh0IHtcbiAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6ICM3MmMzODA7XG4gICAgICAgICAgICBjb2xvcjogd2hpdGU7XG4gICAgICAgICAgICBmb250LXNpemU6IDE2cHQ7XG4gICAgICAgICAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XG4gICAgICAgICAgICBwYWRkaW5nOiAyMHB4O1xuICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogM3B4O1xuICAgICAgICB9XG4gICAgYF1cbn0pXG5leHBvcnQgY2xhc3MgQTJ0UmVzZXRQYXNzd29yZENvbXBvbmVudCB7XG5cbiAgICBfZW1haWxTZW5kOiBib29sZWFuID0gZmFsc2U7XG5cbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgcHJpdmF0ZSBfZm9ybVNlcnZpY2U6IEEydEZvcm1TZXJ2aWNlLFxuICAgICAgICBwcml2YXRlIF9zZXNzaW9uU2VydmljZTogQW5ndWxhcjJUb2tlblNlcnZpY2VcbiAgICApIHtcbiAgICAgICAgdGhpcy5fZm9ybVNlcnZpY2UuaW5pdEZvcm0oUkVTRVRfUEFTU1dPUkRfRk9STSk7XG4gICAgICAgIHRoaXMuX2Zvcm1TZXJ2aWNlLnN1Ym1pdCQuc3Vic2NyaWJlKFxuICAgICAgICAgICAgKGRhdGE6IFJlc2V0UGFzc3dvcmREYXRhKSA9PiB0aGlzLl9zZXNzaW9uU2VydmljZS5yZXNldFBhc3N3b3JkKGRhdGEpLnN1YnNjcmliZShcbiAgICAgICAgICAgICAgICByZXMgPT4gICAgICB0aGlzLl9oYW5kbGVTdWNjZXNzKCksXG4gICAgICAgICAgICAgICAgZXJyb3IgPT4gICAgdGhpcy5faGFuZGxlRXJyb3IoKVxuICAgICAgICAgICAgKVxuICAgICAgICApO1xuICAgIH1cblxuICAgIHByaXZhdGUgX2hhbmRsZVN1Y2Nlc3MoKSB7XG4gICAgICAgIHRoaXMuX2VtYWlsU2VuZCA9IHRydWU7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBfaGFuZGxlRXJyb3IoKSB7XG4gICAgICAgIHRoaXMuX2VtYWlsU2VuZCA9IHRydWU7XG4gICAgfVxufVxuIiwiaW1wb3J0IHsgQ29tcG9uZW50LCBJbnB1dCB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgUm91dGVyIH0gZnJvbSAnQGFuZ3VsYXIvcm91dGVyJztcbmltcG9ydCB7IEFuZ3VsYXIyVG9rZW5TZXJ2aWNlIH0gZnJvbSAnLi4vLi4vYW5ndWxhcjItdG9rZW4uc2VydmljZSc7XG5cbmltcG9ydCB7IFVwZGF0ZVBhc3N3b3JkRGF0YSB9IGZyb20gJy4uLy4uL2FuZ3VsYXIyLXRva2VuLm1vZGVsJztcbmltcG9ydCB7IEEydEZvcm1TZXJ2aWNlIH0gZnJvbSAnLi4vYTJ0LXNoYXJlZC9hMnQtZm9ybS9hMnQtZm9ybS5zZXJ2aWNlJztcbmltcG9ydCB7IFVQREFURV9QQVNTV09SRF9GT1JNIH0gZnJvbSAnLi4vYTJ0LXVpLmZvcm1zJztcblxuQENvbXBvbmVudCh7XG4gICAgc2VsZWN0b3I6ICAgJ2EydC11cGRhdGUtcGFzc3dvcmQnLFxuICAgIHByb3ZpZGVyczogIFtBMnRGb3JtU2VydmljZV0sXG4gICAgdGVtcGxhdGU6IGBcbiAgICAgICAgPGEydC1oZWFkbGluZT5VcGRhdGUgeW91ciBQYXNzd29yZDwvYTJ0LWhlYWRsaW5lPlxuICAgICAgICA8YTJ0LWVycm9yIFtlcnJvcnNdPVwiX2Vycm9yc1wiPjwvYTJ0LWVycm9yPlxuICAgICAgICA8YTJ0LWZvcm0+VXBkYXRlIFBhc3N3b3JkPC9hMnQtZm9ybT5cbiAgICBgXG59KVxuZXhwb3J0IGNsYXNzIEEydFVwZGF0ZVBhc3N3b3JkQ29tcG9uZW50IHtcblxuICAgIF9lcnJvcnM6IHN0cmluZ1tdO1xuXG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIHB1YmxpYyBfZm9ybVNlcnZpY2U6IEEydEZvcm1TZXJ2aWNlLFxuICAgICAgICBwdWJsaWMgX3Nlc3Npb25TZXJ2aWNlOiBBbmd1bGFyMlRva2VuU2VydmljZSxcbiAgICAgICAgcHVibGljIF9yb3V0ZXI6IFJvdXRlclxuICAgICkge1xuICAgICAgICB0aGlzLl9mb3JtU2VydmljZS5pbml0Rm9ybShVUERBVEVfUEFTU1dPUkRfRk9STSk7XG4gICAgICAgIHRoaXMuX2Zvcm1TZXJ2aWNlLnN1Ym1pdCQuc3Vic2NyaWJlKFxuICAgICAgICAgICAgKGRhdGE6IFVwZGF0ZVBhc3N3b3JkRGF0YSkgPT4gdGhpcy5fc2Vzc2lvblNlcnZpY2UudXBkYXRlUGFzc3dvcmQoZGF0YSkuc3Vic2NyaWJlKFxuICAgICAgICAgICAgICAgIHJlcyA9PiAgICAgIHRoaXMuX2hhbmRsZVN1Y2Nlc3MocmVzKSxcbiAgICAgICAgICAgICAgICBlcnJvciA9PiAgICB0aGlzLl9oYW5kbGVFcnJvcihlcnJvcilcbiAgICAgICAgICAgIClcbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIF9oYW5kbGVTdWNjZXNzKGRhdGE6IGFueSkge1xuICAgICAgICB0aGlzLl9yb3V0ZXIubmF2aWdhdGUoWydzZXNzaW9uL3NpZ24taW4nXSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBfaGFuZGxlRXJyb3IoZXJyb3I6IGFueSkge1xuICAgICAgICB0aGlzLl9lcnJvcnMgPSBlcnJvci5qc29uKCkuZXJyb3JzO1xuICAgICAgICB0aGlzLl9mb3JtU2VydmljZS51bmxvY2tTdWJtaXQoKTtcbiAgICB9XG59XG4iLCJpbXBvcnQgeyBNb2R1bGVXaXRoUHJvdmlkZXJzIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQgeyBSb3V0ZXMsIFJvdXRlck1vZHVsZSB9IGZyb20gJ0Bhbmd1bGFyL3JvdXRlcic7XG5cbmltcG9ydCB7IEFuZ3VsYXIyVG9rZW5TZXJ2aWNlIH0gZnJvbSAnLi4vYW5ndWxhcjItdG9rZW4uc2VydmljZSc7XG5cbmltcG9ydCB7IEEydFVpQ29tcG9uZW50IH0gZnJvbSAnLi9hMnQtdWkuY29tcG9uZW50JztcbmltcG9ydCB7IEEydFNpZ25JbkNvbXBvbmVudCB9IGZyb20gJy4vYTJ0LXNpZ24taW4vYTJ0LXNpZ24taW4uY29tcG9uZW50JztcbmltcG9ydCB7IEEydFNpZ25VcENvbXBvbmVudCB9IGZyb20gJy4vYTJ0LXNpZ24tdXAvYTJ0LXNpZ24tdXAuY29tcG9uZW50JztcbmltcG9ydCB7IEEydFJlc2V0UGFzc3dvcmRDb21wb25lbnQgfSBmcm9tICcuL2EydC1yZXNldC1wYXNzd29yZC9hMnQtcmVzZXQtcGFzc3dvcmQuY29tcG9uZW50JztcbmltcG9ydCB7IEEydFVwZGF0ZVBhc3N3b3JkQ29tcG9uZW50IH0gZnJvbSAnLi9hMnQtdXBkYXRlLXBhc3N3b3JkL2EydC11cGRhdGUtcGFzc3dvcmQuY29tcG9uZW50JztcblxuY29uc3Qgcm91dGVzOiBSb3V0ZXMgPSBbe1xuICAgICAgICBwYXRoOiAnc2Vzc2lvbicsXG4gICAgICAgIGNvbXBvbmVudDogQTJ0VWlDb21wb25lbnQsXG4gICAgICAgIGNoaWxkcmVuOiBbXG4gICAgICAgICAgICB7IHBhdGg6ICdzaWduLWluJywgY29tcG9uZW50OiBBMnRTaWduSW5Db21wb25lbnQgfSxcbiAgICAgICAgICAgIHsgcGF0aDogJ3NpZ24tdXAnLCBjb21wb25lbnQ6IEEydFNpZ25VcENvbXBvbmVudCB9LFxuICAgICAgICAgICAgeyBwYXRoOiAncmVzZXQtcGFzc3dvcmQnLCBjb21wb25lbnQ6IEEydFJlc2V0UGFzc3dvcmRDb21wb25lbnQgfSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBwYXRoOiAndXBkYXRlLXBhc3N3b3JkJyxcbiAgICAgICAgICAgICAgICBjb21wb25lbnQ6IEEydFVwZGF0ZVBhc3N3b3JkQ29tcG9uZW50LFxuICAgICAgICAgICAgICAgIGNhbkFjdGl2YXRlOiBbQW5ndWxhcjJUb2tlblNlcnZpY2VdXG4gICAgICAgICAgICB9XG4gICAgICAgIF1cbn1dO1xuXG5leHBvcnQgY29uc3QgYTJ0Um91dGVzID0gUm91dGVyTW9kdWxlLmZvckNoaWxkKHJvdXRlcyk7XG4iLCJpbXBvcnQgeyBOZ01vZHVsZSB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnXG5pbXBvcnQgeyBDb21tb25Nb2R1bGUgfSBmcm9tICdAYW5ndWxhci9jb21tb24nO1xuaW1wb3J0IHsgUm91dGVyTW9kdWxlIH0gZnJvbSAnQGFuZ3VsYXIvcm91dGVyJztcblxuaW1wb3J0IHsgQW5ndWxhcjJUb2tlblNlcnZpY2UgfSBmcm9tICcuLi9hbmd1bGFyMi10b2tlbi5zZXJ2aWNlJztcblxuaW1wb3J0IHsgQTJ0U2hhcmVkTW9kdWxlIH0gZnJvbSAnLi9hMnQtc2hhcmVkL2EydC1zaGFyZWQubW9kdWxlJztcbmltcG9ydCB7IGEydFJvdXRlcyB9IGZyb20gJy4vYTJ0LXVpLnJvdXRlcyc7XG5pbXBvcnQgeyBBMnRVaUNvbXBvbmVudCB9IGZyb20gJy4vYTJ0LXVpLmNvbXBvbmVudCc7XG5pbXBvcnQgeyBBMnRTaWduSW5Db21wb25lbnQgfSBmcm9tICcuL2EydC1zaWduLWluL2EydC1zaWduLWluLmNvbXBvbmVudCc7XG5pbXBvcnQgeyBBMnRTaWduVXBDb21wb25lbnQgfSBmcm9tICcuL2EydC1zaWduLXVwL2EydC1zaWduLXVwLmNvbXBvbmVudCc7XG5pbXBvcnQgeyBBMnRSZXNldFBhc3N3b3JkQ29tcG9uZW50IH0gZnJvbSAnLi9hMnQtcmVzZXQtcGFzc3dvcmQvYTJ0LXJlc2V0LXBhc3N3b3JkLmNvbXBvbmVudCc7XG5pbXBvcnQgeyBBMnRVcGRhdGVQYXNzd29yZENvbXBvbmVudCB9IGZyb20gJy4vYTJ0LXVwZGF0ZS1wYXNzd29yZC9hMnQtdXBkYXRlLXBhc3N3b3JkLmNvbXBvbmVudCc7XG5cbkBOZ01vZHVsZSh7XG4gICAgaW1wb3J0czogW1xuICAgICAgICBDb21tb25Nb2R1bGUsXG4gICAgICAgIFJvdXRlck1vZHVsZSxcbiAgICAgICAgQTJ0U2hhcmVkTW9kdWxlLFxuICAgICAgICBhMnRSb3V0ZXNcbiAgICBdLFxuICAgIGRlY2xhcmF0aW9uczogW1xuICAgICAgICBBMnRVaUNvbXBvbmVudCxcbiAgICAgICAgQTJ0U2lnbkluQ29tcG9uZW50LFxuICAgICAgICBBMnRTaWduVXBDb21wb25lbnQsXG4gICAgICAgIEEydFJlc2V0UGFzc3dvcmRDb21wb25lbnQsXG4gICAgICAgIEEydFVwZGF0ZVBhc3N3b3JkQ29tcG9uZW50XG4gICAgXVxufSlcbmV4cG9ydCBjbGFzcyBBMnRVaU1vZHVsZSB7IH0iXSwibmFtZXMiOlsiRXZlbnRFbWl0dGVyIiwiRm9ybUNvbnRyb2wiLCJGb3JtR3JvdXAiLCJJbmplY3RhYmxlIiwiQ29tcG9uZW50IiwiSW5wdXQiLCJOZ01vZHVsZSIsIkNvbW1vbk1vZHVsZSIsIlJlYWN0aXZlRm9ybXNNb2R1bGUiLCJSb3V0ZXJNb2R1bGUiLCJodHRwIiwicm91dGVyIiwiSGVhZGVycyIsIlJlcXVlc3RNZXRob2QiLCJSZXF1ZXN0T3B0aW9ucyIsIlJlcXVlc3QiLCJzaGFyZSIsImludGVydmFsIiwiZnJvbUV2ZW50IiwicGx1Y2siLCJmaWx0ZXIiLCJIdHRwIiwiQWN0aXZhdGVkUm91dGUiLCJPcHRpb25hbCIsIlJvdXRlciIsIlZhbGlkYXRvcnMiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7QUFBQTtRQWtCSTsyQkFQaUIsSUFBSUEsaUJBQVksRUFBTzs4QkFDWCxLQUFLO1NBTWpCOzs7OztRQUVWLGlDQUFROzs7O3NCQUFDLE1BQW1CO2dCQUMvQixJQUFJLENBQUMsTUFBTSxHQUFHLE1BQU0sQ0FBQztnQkFDckIsSUFBSSxDQUFDLGdCQUFnQixFQUFFLENBQUM7Ozs7O1FBR3JCLCtCQUFNOzs7O2dCQUNULElBQUksQ0FBQyxVQUFVLEdBQUcsSUFBSSxDQUFDO2dCQUN2QixJQUFJLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDLEtBQUssQ0FBQyxDQUFDOzs7OztRQUdyQyxxQ0FBWTs7OztnQkFDZixJQUFJLENBQUMsU0FBUyxDQUFDLEtBQUssRUFBRSxDQUFDO2dCQUN2QixJQUFJLENBQUMsVUFBVSxHQUFHLEtBQUssQ0FBQzs7Ozs7UUFHcEIseUNBQWdCOzs7O2dCQUVwQixxQkFBSSxLQUFLLEdBQVEsRUFBRSxDQUFDO2dCQUVwQixJQUFJLENBQUMsTUFBTSxDQUFDLE9BQU8sQ0FBQyxVQUFBLFFBQVE7b0JBQ3hCLEtBQUssQ0FBQyxRQUFRLENBQUMsR0FBRyxDQUFDLEdBQUcsSUFBSUMsaUJBQVcsQ0FBQyxJQUFJLEVBQUUsUUFBUSxDQUFDLFVBQVUsQ0FBQyxDQUFDO2lCQUNwRSxDQUFDLENBQUM7Z0JBRUgsSUFBSSxDQUFDLFNBQVMsR0FBRyxJQUFJQyxlQUFTLENBQUMsS0FBSyxDQUFDLENBQUM7OztvQkFwQzdDQyxlQUFVOzs7OzZCQVBYOzs7Ozs7O0FDQUE7UUFvRUksMEJBQW1CLFlBQTRCO1lBQTVCLGlCQUFZLEdBQVosWUFBWSxDQUFnQjtTQUFLOztvQkEvRHZEQyxjQUFTLFNB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